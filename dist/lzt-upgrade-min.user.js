// ==UserScript==
// @name [Development Build] LZT Upgrade
// @description A free extension for Lolzteam with many useful features
// @description:ru Бесплатное расширение для Lolzteam с множеством полезных функций
// @version 2.0.0dev
// @author Toil
// @supportURL https://github.com/lzt-upgrade/lzt-upgrade/issues
// @match *://lolz.guru/*
// @match *://lolz.live/*
// @match *://zelenka.guru/*
// @match *://lzt.market/*
// @match *://lolz.market/*
// @connect lztupgrade.toiloff.ru
// @connect greasyfork.org
// @downloadURL https://github.com/lzt-upgrade/lzt-upgrade/raw/master/dist/lzt-upgrade.user.js
// @grant GM_xmlhttpRequest
// @grant GM_info
// @grant GM_addStyle
// @grant GM_setValue
// @grant GM_getValue
// @grant GM_deleteValue
// @grant GM_listValues
// @homepageURL https://github.com/lzt-upgrade/lzt-upgrade
// @icon https://cdn.jsdelivr.net/gh/lzt-upgrade/lzt-upgrade@latest/src/images/logo-mini.png
// @license MIT
// @namespace lztupgrade
// @require https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js
// @require https://raw.githubusercontent.com/lzt-upgrade/coloris-lzt-theme/main/dist/coloris.js
// @require https://raw.githubusercontent.com/lzt-upgrade/lzt-upgrade/2.0.0/libs/purify3.0.3.min.js
// @require https://raw.githubusercontent.com/lzt-upgrade/lzt-upgrade/2.0.0/libs/Sortable1.15.0.min.js
// @run-at document-start
// @updateURL https://github.com/lzt-upgrade/lzt-upgrade/raw/master/dist/lzt-upgrade.user.js
// ==/UserScript==

/*! For license information please see lzt-upgrade-min.js.LICENSE.txt */
(()=>{"use strict";var t,n,r,a,s={"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/buttons.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var r=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),a=n.n(r),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(a());o.push([e.id,"#LZTUpButton{color:#0daf77;font-weight:600}",""]);const i=o},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/errorPage.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var r=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),a=n.n(r),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(a());o.push([e.id,".LZTUpErrorPage{background-color:#272727}.LZTUpErrorPage article{color:#d6d6d6}.LZTUpErrorPage article div{display:flex;flex-direction:column;justify-content:center;align-items:center}.LZTUpErrorPage article div .LZTUpErrorPageSelfAd{border-top:1px solid #363636}.LZTUpErrorPage article div .LZTUpErrorPageSelfAd .selfAd{font-size:18px;color:#949494;max-width:75%;text-align:center}.LZTUpErrorPage article div .LZTUpErrorPageSelfAd .buttons{display:flex;flex-direction:row}.LZTUpErrorPage article div .LZTUpErrorPageSelfAd .buttons .button{display:flex;align-items:center;background:#0daf77;border-radius:6px;color:#fff;padding:0px 15px;margin:10px;line-height:34px;font-size:18px;transition:.5s background ease}.LZTUpErrorPage article div .LZTUpErrorPageSelfAd .buttons .button:hover{background:rgba(13,175,119,.8) !important}.LZTUpErrorPage article div .LZTUpErrorPageSelfAd .buttons .button svg{width:24px;height:24px;margin-right:5px;fill:#fff}",""]);const i=o},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/menu.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var r=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),a=n.n(r),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(a());o.push([e.id,"@import url(https://cdn.jsdelivr.net/gh/lzt-upgrade/coloris-lzt-theme@latest/dist/coloris.min.css);"]),o.push([e.id,'.clr-picker{display:none}.LZTUpColorPickerWrap{display:flex;align-items:center}.LZTUpColorPickerWrap:not(:first-of-type){margin-top:10px}.LZTUpColorPickerWrap .LZTUpModalDescription{margin-right:10px !important}.LZTUpColorPickerWrap .clr-field input{width:24px;height:24px}.LZTUpColorPickerWrap .clr-field button{width:28px;height:28px}.LZTUpColorPickerWrap .clr-field input,.LZTUpColorPickerWrap .clr-field button{border-radius:4px}.LZTUpSelect option{background:#272727;padding:10px 15px;font-weight:600;border-radius:6px}.LZTUpSelect option:hover{background:#2d2d2d}.LZTUpIconButton{display:flex;flex-direction:row-reverse;align-items:center;justify-content:center}.LZTUpIconButton.fit{max-width:fit-content}.LZTUpIconButton i{margin:0 8px;margin-top:3.5px}.LZTUpRefreshButton{min-width:32px !important;margin-left:32px !important}.LZTUpSortableItem{display:flex;align-items:center;padding:16px;margin:8px 0;border-radius:8px;background:rgba(54,54,54,.75)}.LZTUpSortableItem .LZTUpSortableDraggable{color:#8c8c8c;margin-right:10px;cursor:move}.LZTUpSortableItem .LZTUpSortableContent p{margin:0 !important}.LZTUpSortableItem .LZTUpSortableUtility{display:flex;margin-left:auto}.LZTUpSortableItem .LZTUpSortableUtility div{margin-left:10px;cursor:pointer;transition:.5s color ease}.LZTUpSortableItem .LZTUpSortableUtility .LZTUpSortableEditButton{color:#6a6a6a}.LZTUpSortableItem .LZTUpSortableUtility .LZTUpSortableEditButton:hover{color:#0daf77}.LZTUpSortableItem .LZTUpSortableUtility .LZTUpSortableRemoveButton{color:#964448}.LZTUpSortableItem .LZTUpSortableUtility .LZTUpSortableRemoveButton:hover{color:#f13838}#LZTUpModalMainTitle{text-align:center;padding:16px;font-size:20px;font-weight:bold}.LZTUpModalBackButton{position:absolute;top:18px;left:25px;padding:0px 5px;margin:-4px -5px;cursor:pointer;line-height:25px;height:26px;width:26px;border:0 !important;background:rgba(0,0,0,0);color:#d6d6d6;font-size:18px}.LZTUpModalBackButton:hover{background:rgba(18,76,50,.4);border-radius:8px}.LZTUpTabs{width:100%;box-sizing:border-box;padding:0 10px;border:none !important;margin:15px auto !important;display:flex;align-items:center;justify-content:center}.LZTUpTabs #LZTUpTab{position:relative;padding:10px;margin:0 4px;float:left;font-weight:600;list-style:none;font-size:14px}.LZTUpTabs #LZTUpTab:hover{cursor:pointer}.LZTUpTabs #LZTUpTab.active{box-shadow:inset 0px -2px 0px 0px #0daf77;transform:translateY(-1px);transition:.2s}.LZTUpTabs #LZTUpTab:not(.active):hover{box-shadow:inset 0px -2px 0px 0px #363636}.LZTUpSection{display:flex;flex-wrap:wrap;margin:20px 15px}.LZTUpSection.row{flex-direction:row}.LZTUpSection.row .LZTUpSectionItem{max-width:284px}.LZTUpSection.row .LZTUpSectionTitle,.LZTUpSection.row .LZTUpSectionDesc{max-width:200px}.LZTUpSection.column{flex-direction:column}.LZTUpSection.column .LZTUpSectionTitle,.LZTUpSection.column .LZTUpSectionDesc{max-width:440px}.LZTUpSection.column .LZTUpSectionDesc{white-space:break-spaces}.LZTUpSection.column .LZTUpSectionItem{max-width:580px}.LZTUpSection .LZTUpSectionItem{flex-basis:50%;flex-grow:1;height:64px;display:flex;align-items:center;transition:all .5s ease}.LZTUpSection .LZTUpSectionItem:hover{background:rgba(54,54,54,.75);border-radius:8px;cursor:pointer}.LZTUpSectionTextContainer{display:flex;flex-direction:column;justify-content:center;flex:1 1 auto;max-width:100%}#LZTUpIcon{width:28px;height:28px;margin:20px;font-size:28px;color:#0daf77}#LZTUpIcon.gray{color:#949494}#LZTUpIcon.right{text-align:right}#LZTUpModalContainer{margin:15px;max-width:400px}#LZTUpModalChecksContainer,#LZTUpModalReportButtonsContainer,#LZTUpModalCell,.LZTUpModalMesh,.LZTUpModalSeparator{margin:15px;max-width:95%}.LZTUpContainer{display:flex;flex-direction:column;margin:15px;max-width:95%}.LZTUpModalHeading{margin:10px 0 5px 0 !important}.LZTUpModalDescription{margin:0 !important;margin-bottom:5px !important}.LZTUpTextArea{min-height:40px}.LZTUpModalSeparator{border-bottom:1px solid #363636}#LZTUpModalChecksText{margin:0px 25px 5px}.LZTUpSectionTitle,.LZTUpSectionDesc{display:block;margin-right:20px;font-size:15px;font-weight:bold;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.LZTUpSectionDesc{font-size:13px;font-weight:normal;color:#949494}.LZTUpSectionDesc .mceSmilie{max-height:18px !important}.LZTUpModalSectionTexts{display:flex;flex-direction:column;justify-content:center;flex:1 1 auto}.LZTUpModalSectionTexts .LZTUpSubText{max-width:450px}#LZTUpModalComment{background:#363636;margin:5px 15px;padding:10px 15px;border-radius:10px}#LZTUpModalComment a{color:#00ba78}.LZTUpModalBlock{display:flex}.LZTUpModalBlockButtons{display:flex;flex-wrap:wrap;justify-content:center;margin-top:25px}.LZTUpModalBlockButtons .button{margin:5px;width:250px}.LZTUpSubMenu .previewContainer{display:flex;float:right;margin:25px 15px;padding:10px 10px 15px 10px;background-size:cover;background-position:center;background-attachment:fixed;background-repeat:no-repeat;border-radius:10px;width:92%;max-width:92%}.LZTUpSubMenu .previewContainer .avatar img{width:66px;height:66px}.LZTUpSubMenu .previewContainer .info{padding:0 0 0 20px}.LZTUpSubMenu .previewContainer .info .username{font-weight:600}.LZTUpSubMenu .previewContainer .bannerOrStatus{min-width:150px;margin:10px 0 0;color:#949494}.LZTUpSubMenu .previewContainer .bannerOrStatus em{font-style:inherit}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge .customUniqIcon{padding:2px 0;text-align:center}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge .customUniqIcon svg{width:16px !important;height:16px !important}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge::before{font-family:"Font Awesome 5 Pro";font-weight:600;display:inline-block;font-size:12.32px}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.admin{background:#964448}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.admin::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.bot::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.Designer::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.headDesigner::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.editor::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.sponsor::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.coder::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.uniq_default::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.Legend::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.Ikarus::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.moder{background:#3d6b39}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.curator{background:rgba(8,156,122,.8509803922)}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.moder::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.main_moder::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.curator::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.arbitr::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.main_arbitr::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.telegramBot::before{content:""}.LZTUpSubMenu .previewContainer .UsernameStyle.style18,.LZTUpSubMenu .previewContainer .UsernameStyle.style360{text-decoration:line-through;color:#aaa}.LZTUpSubMenu .previewContainer .UsernameStyle.style3{color:#f13838}.LZTUpSubMenu .previewContainer .UsernameStyle.style30{color:#ff9afc}.LZTUpSubMenu .previewContainer .UsernameStyle.style353{background:linear-gradient(98.26deg, #FF42F7 2.08%, #FF24CF 100%);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0)}.LZTUpSubMenu .previewContainer .UsernameStyle.style350{background:linear-gradient(90deg, #5c45ff, #feb5f2 100%);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0)}.LZTUpSubMenu .previewContainer .UsernameStyle.style12{color:#01f73c}.LZTUpSubMenu .previewContainer .UsernameStyle.style1,.LZTUpSubMenu .previewContainer .UsernameStyle.style41,.LZTUpSubMenu .previewContainer .UsernameStyle.style142,.LZTUpSubMenu .previewContainer .UsernameStyle.style144{color:#aaa}.LZTUpSubMenu .previewContainer .UsernameStyle.style32,.LZTUpSubMenu .previewContainer .UsernameStyle.style93,.LZTUpSubMenu .previewContainer .UsernameStyle.style21,.LZTUpSubMenu .previewContainer .UsernameStyle.style2{color:#949494}.LZTUpSubMenu .previewContainer .UsernameStyle.style60{color:#ffa8af}.LZTUpSubMenu .previewContainer .UsernameStyle.style9{color:#0075ad}.LZTUpSubMenu .previewContainer .UsernameStyle.style65{color:#a5e3ff}.LZTUpSubMenu .previewContainer .UsernameStyle.style351{color:#ff0076}.LZTUpSubMenu .previewContainer .UsernameStyle.style29{color:#0acc9e}.LZTUpSubMenu .previewContainer .UsernameStyle.style26{background:linear-gradient(90deg, #0095dd 0%, #f1094b 100%, #0095dd);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0)}.LZTUpSubMenu .previewContainer .UsernameStyle.style4{color:#0e9100}.LZTUpSubMenu .previewContainer .UsernameStyle.style22{color:#eee}.LZTUpSubMenu .previewContainer .UsernameStyle.style11{color:#56b5e0}.LZTUpSubMenu .previewContainer .UsernameStyle.style7{color:#ff9304}.LZTUpSubMenu .previewContainer .UsernameStyle.style349,.LZTUpSubMenu .previewContainer .UsernameStyle.style365{color:#0087ff}.LZTUpSubMenu .previewContainer .UsernameStyle.style354{color:aqua}.LZTUpSubMenu .previewContainer .UsernameStyle.style218{color:#f13838}.LZTUpSubMenu .previewContainer .UsernameStyle.style359{color:#e5d9a3}.LZTUpSubMenu .previewContainer .UsernameStyle.style8{color:gold}.LZTUpSubMenu .previewContainer .UsernameStyle.style265{background:linear-gradient(35deg, #006eff, #00ff81 52%, #fff 50%, #93cbff);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);text-shadow:0 0 7px rgba(0,255,207,.5019607843)}.LZTUpSubMenu .previewContainer .UsernameStyle.style23{color:#b35ede}.LZTUpSubMenu .previewContainer .UsernameStyle.banned,.LZTUpSubMenu .previewContainer .UsernameStyle.is_banned{text-decoration:line-through;background:inherit;-webkit-text-fill-color:inherit;text-shadow:inherit !important;color:#aaa !important}.LZTUpSubMenu .previewContainer .avatarBox{position:relative}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .badgeDefaultBackground{background:#363636}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .avatarUserBadge{position:absolute;bottom:-12px;left:20px;border:2px solid #272727;font-size:0;width:22px;height:22px;margin:0;line-height:22px;border-radius:50%;text-align:center;text-shadow:none !important;box-shadow:none !important;border-radius:50% !important;-webkit-background-clip:unset !important;-webkit-text-fill-color:unset !important;overflow:hidden}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .avatarUserBadge:only-child{left:35px}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .avatarUserBadge.avatarUserBadge--1{left:20px}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .avatarUserBadge.avatarUserBadge--2{left:40px}.LZTUpSubMenu .previewContainer .avatarBox,.LZTUpSubMenu .previewContainer .info{display:table-cell;vertical-align:top}',""]);const i=o},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/universal.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var r=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),a=n.n(r),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(a());o.push([e.id,"#LZTUpCustomBackground{background-size:cover;background-position:center;background-attachment:fixed;background-repeat:no-repeat}",""]);const i=o},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/xenforo.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var r=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),a=n.n(r),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(a());o.push([e.id,".copyButton{cursor:pointer;font-size:16px;font-weight:400;padding:1px 4px;margin:-5px 0 0 6px;display:inline-block;color:#505050}.copyButton:hover{color:#949494}",""]);const i=o},"./node_modules/css-loader/dist/runtime/api.js":e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&o[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":e=>{e.exports=function(e){return e[1]}},"./src/styles/errorPage.scss":(e,t,n)=>{var r=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),a=n.n(r),s=n("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),o=n.n(s),i=n("./node_modules/style-loader/dist/runtime/insertBySelector.js"),c=n.n(i),l=n("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),d=n.n(l),u=n("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),p=n.n(u),m=n("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),g=n.n(m),h=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/errorPage.scss"),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=c().bind(null,"html"),f.domAPI=o(),f.insertStyleElement=p(),a()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals},"./src/styles/universal.scss":(e,t,n)=>{var r=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),a=n.n(r),s=n("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),o=n.n(s),i=n("./node_modules/style-loader/dist/runtime/insertBySelector.js"),c=n.n(i),l=n("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),d=n.n(l),u=n("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),p=n.n(u),m=n("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),g=n.n(m),h=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/universal.scss"),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=c().bind(null,"html"),f.domAPI=o(),f.insertStyleElement=p(),a()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals},"./src/styles/xenforo.scss":(e,t,n)=>{var r=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),a=n.n(r),s=n("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),o=n.n(s),i=n("./node_modules/style-loader/dist/runtime/insertBySelector.js"),c=n.n(i),l=n("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),d=n.n(l),u=n("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),p=n.n(u),m=n("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),g=n.n(m),h=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/xenforo.scss"),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=c().bind(null,"html"),f.domAPI=o(),f.insertStyleElement=p(),a()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],i=0;i<e.length;i++){var c=e[i],l=r.base?c[0]+r.base:c[0],d=s[l]||0,u="".concat(l," ").concat(d);s[l]=d+1;var p=n(u),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var g=a(m,r);r.byIndex=i,t.splice(i,0,{identifier:u,updater:g,references:1})}o.push(u)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var s=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var i=n(s[o]);t[i].references--}for(var c=r(e,a),l=0;l<s.length;l++){var d=n(s[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=c}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},"./src/api/lztupgrade/themeAPI.js":(e,t,n)=>{n.d(t,{Z:()=>s});const r=JSON.parse('{"RC":"https://lztupgrade.toiloff.ru/api/themes","I1":"https://lztupgrade.toiloff.ru/static/themes"}');var a=n("./src/utils/logger.js");const s={getThemes:async function(){return await async function(e,t){try{return await $.ajax({url:e,dataType:"json"})}catch(e){return a.Z.log(t),!1}}(r.RC,`Не удалось получить список тем (${r.RC})`)},loadTheme:function(e){const t=document.createElement("link");t.href=`${r.I1}/${e}.css`,t.type="text/css",t.rel="stylesheet",document.head.appendChild(t)}}},"./src/callbacks/contestsParticipate.js":(e,t,n)=>{n.d(t,{p:()=>s,m:()=>o});var r=n("./src/utils/utils.js"),a=n("./src/utils/logger.js");function s(e){e&&function(e,t=1e3){(0,r.Nc)(".LztContest--Participate").then((n=>{a.Z.debug("onParticipateHandler: Participate button finded"),n.addEventListener("click",(async()=>{if(a.Z.debug("onParticipateHandler: click contest button"),n.classList.contains("disabled"))a.Z.debug("onParticipateHandler: clicked on disabled contest button");else{if(a.Z.debug("onParticipateHandler: waiting for alreadyParticipate button"),!await(0,r.Nc)("span.alreadyParticipate"))return void a.Z.debug("onParticipateHandler: no alreadyParticipate button");a.Z.debug("onParticipateHandler: alreadyParticipate button finded"),await(0,r._v)(t),e()}}))})).catch((e=>{a.Z.debug("onParticipateHandler: no contest button")}))}((()=>{window.close()}))}function o(e){console.log("participateOnBtn",e),"Tab"===e.key&&(e.preventDefault(),document.querySelector(".alreadyParticipate.hidden")&&document.querySelector(".LztContest--Participate:not(.disabled)")?.click())}},"./src/callbacks/extensionStart.js":(e,t,n)=>{n.d(t,{P:()=>s});var r=n("./src/api/lztupgrade/themeAPI.js"),a=n("./src/utils/logger.js");function s(e){return new Promise((async(t,n)=>{a.Z.debug(`onExtensionStart: Start loading theme with id ${e}`);const s=await r.Z.getThemes();if(s?.length){a.Z.debug("onExtensionStart: Themes arrray getted: ",s);const n=s.find((t=>t.uid===e&&1===t.active));return t(n?.file)}a.Z.debug("onExtensionStart: Not finded active theme"),n(!1)}))}},"./src/configs/StorageName.js":(e,t,n)=>{n.d(t,{Z:()=>r});class r{static UserGroup=new r("LZTUserGroup").name;static Cache=new r("cache").name;static Appear=new r("appearData").name;static Contests=new r("contestsData").name;static Users=new r("usersData").name;static Settings=new r("settingsData").name;constructor(e){this.name=e}}},"./src/configs/config.js":(e,t,n)=>{n.d(t,{Z:()=>r});const r={extName:"LZT Upgrade UNRELEASED",cacheTime:604800,defaultUserGroup:"style2"}},"./src/configs/extData.js":(e,t,n)=>{n.d(t,{Z:()=>r});const r={nodes:{contests:".node766"},selectors:{memberCard:".xenOverlay.memberCard"},uiElementsId:{lztupTempSubMenu:"LZTUpTempSubMenu"},uiElementsSelectors:{lztupTempSubMenu:"#LZTUpTempSubMenu"},links:{telegramChannel:"https://t.me/lzt_upgrade",githubPage:"https://github.com/lzt-upgrade/lzt-upgrade"},infoLinks:[{icon:"far fa-donate",title:"Поддержать разработку",desc:'Можете немного закинуть, если хотите <img src="/styles/default/xenforo/smilies/ok_lol.png" class="mceSmilie" alt=":ok_lol:" title="Lol">',href:"https://lzt.market/balance/transfer?redirect=https%3A%2F%2Fzelenka.guru&username=Toil",sectionId:"LZTUpInfoDonateItem"},{icon:"far fa-comments",title:"Тема на форуме",desc:"Новости об обновлениях и отзывы других пользователей",href:"https://zelenka.guru/threads/1",sectionId:"LZTUpInfoThreadItem"},{icon:"fab fa-telegram-plane",title:"Telegram канал",desc:"Все новости расширения и анонсы новых функций",href:"https://t.me/lzt_upgrade",sectionId:"LZTUpInfoTGChannelItem"},{icon:"fab fa-telegram-plane",title:"Telegram чат",desc:"Чатик для общения с другими пользователями расширения",href:"https://t.me/lzt_upgrade_chat",sectionId:"LZTUpInfoTGChatItem"},{icon:"fab fa-github",title:"Github",desc:"Исходники расширения + все версии расширения",href:"https://github.com/lzt-upgrade/lzt-upgrade",sectionId:"LZTUpInfoGithubItem"},{icon:"far fa-code-branch",title:"Greasy Fork",desc:"Альтернативный источник для установки расширения",href:"https://github.com/lzt-upgrade/lzt-upgrade",sectionId:"LZTUpInfoGreasyForkItem"},{icon:"far fa-tasks",title:"Следить за разработкой",desc:"Доска задач нашего расширения",href:"https://app.weeek.net/ws/438227/shared/board/4prKcWJhKKxLuKNm0CiP7qJEZUH3quST",sectionId:"LZTUpInfoFollowDevItem"}]}},"./src/events/categories.js":(e,t,n)=>{n.d(t,{Z:()=>a});var r=n("./src/utils/utils.js");const a=function(e,t){const n=$(`li.node${e}.forum.level-n`);$(n).on("click",(async()=>{await(0,r._v)(750),await(0,r.Nc)("div.pageNavLinkGroup")&&t()}))}},"./src/index.js":(t,n,r)=>{r.a(t,(async(t,n)=>{try{var a=r("./src/api/lztupgrade/themeAPI.js"),s=r("./src/configs/config.js"),o=r("./src/configs/extData.js"),i=r("./src/configs/StorageName.js"),c=r("./src/callbacks/contestsParticipate.js"),l=r("./src/callbacks/extensionStart.js"),d=r("./src/indexedDB/profile.js"),u=r("./src/ui/components/buttons/contestsButton.js"),p=r("./src/ui/components/buttons/menuButton.js"),m=r("./src/ui/components/buttons/errorPageButton.js"),g=r("./src/events/categories.js"),h=r("./src/utils/logger.js"),f=r("./src/utils/registers.js"),b=r("./src/utils/contests.js"),y=r("./src/utils/users.js"),T=r("./src/xenforo/bypass.js"),L=r("./src/visuals/users.js"),v=r("./src/visuals/universal.js"),w=r("./src/visuals/profile.js"),Z=r("./src/utils/checkers.js");async function U(){console.time("init-theme"),console.timeLog("init-theme","getting appearData...");const e=await GM_getValue(i.Z.Appear,{});console.timeLog("init-theme","loading name from cache...");let t=await GM_getValue(i.Z.Cache,{}).themeName;if(console.timeLog("init-theme","Check themeName valid..."),!t&&e.theme>0){h.Z.debug(`Requesting theme with id ${e.theme}...`),t=await(0,l.P)(e.theme).catch((e=>console.error(e)));let n=await GM_getValue(i.Z.Cache,{});n.themeName=t,await GM_setValue(i.Z.Cache,n)}console.timeLog("Loading theme..."),a.Z.loadTheme(t),console.timeEnd("init-theme")}async function S(){console.time("lztup-start"),GM_info?.script?.version&&h.Z.log(`${s.Z.extName} version: ${GM_info?.script?.version}`);const e=await GM_getValue(i.Z.Appear,{});console.timeLog("lztup-start","Waiting body..."),document.addEventListener("DOMContentLoaded",(async()=>{if(console.timeLog("lztup-start","Body loaded successfully"),/^(Error\s[0-9]{3}|Site\sMaintenance|429\sToo\sMany\sRequests)$/.test(document.head.querySelector("title").innerText)){if(!e.newErrorPage)return;document.body.classList.add("LZTUpErrorPage");const t=document.body.querySelector("article > div"),n=document.createElement("img");if(n.src="https://i.imgur.com/iVmKDr7.gif",n.alt="Duck rain",t.appendChild(n),!e.selfAdOnNewErrorPage)return;const r=document.createElement("div");r.classList.add("LZTUpErrorPageSelfAd");const a=document.createElement("p");a.innerText="Пока форум недоступен, рекомендуем ознакомиться с нашими соц. сетями",a.classList.add("selfAd");const s=document.createElement("div");s.classList.add("buttons");const i=new m.Z('\n          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">\n            <path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"/>\n          </svg>\n          Telegram\n        ',o.Z.links.telegramChannel).createElement(),c=new m.Z('\n          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">\n            <path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/>\n          </svg>\n          Github\n        ',o.Z.links.githubPage).createElement();return s.appendChild(i),s.appendChild(c),r.appendChild(a),r.appendChild(s),void t.appendChild(r)}console.timeLog("lztup-start","GET DEBUG INFO");const t=(0,y.Ms)("me"),n=(0,y.n5)("me"),r=(0,y.xc)("me"),a=$("img.navTab--visitorAvatar").attr("src");h.Z.debug("┏━━━━━━━━ DEBUG INFO ━━━━━━━━━━┓"),h.Z.debug(`Script version: ${GM_info?.script?.version}`),h.Z.debug(`Account username: ${t}`),h.Z.debug(`Account userid: ${n}`),h.Z.debug(`Account userGroup: ${r}`),h.Z.debug(`Account userAvatar: ${a}`),h.Z.debug("┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┚"),console.timeLog("lztup-start","Register menu button"),(0,f.e7)(p.Z),console.timeLog("lztup-start","Add user group to cache"),await GM_setValue(i.Z.UserGroup,r),console.timeLog("lztup-start","Loading Profile DB...");const s=new d.M,l=await s.read();console.timeLog("lztup-start","Checking Profile data..."),l&&(console.timeLog("lztup-start","Check Profile User or Badge style"),(l.usernameStyle||l.badgeIcons.length)&&(console.timeLog("lztup-start","Check Profile User style"),l.usernameStyle&&(0,L.bR)(l.usernameStyle),console.timeLog("lztup-start","Check Profile badge style"),l.badgeIcons.length&&(0,L.Az)(l.badgeIcons),console.timeLog("lztup-start","Reg profile observer"),(0,f.O0)((async e=>{if(h.Z.debug(e),e.target.classList.contains("messageList")||e.target.classList.contains("messageSimpleList")||e.target.classList.contains("messageResponse")||e.target.classList.contains("CommentPostList")||e.target.classList.contains("discussionList")||e.target.classList.contains("chat2-messages")||e.target.classList.contains("fe-ac-user")||e.target.classList.contains("latestThreads")||e.target.parentElement?.classList.contains("conversationMessages")||e.nextSibling?.classList?.contains("modal")||e.previousSibling?.classList?.contains("Alert")||e.previousSibling?.nextSibling?.classList?.contains("Alert")||"AjaxProgress"===e.removedNodes?.[0]?.id||"AlertsDestinationWrapper"===e.target.id||"StackAlerts"===e.target.id){const e=await s.read();e.usernameStyle&&(0,L.bR)(e.usernameStyle),e.badgeIcons.length&&(0,L.Az)(e.badgeIcons)}}))),console.timeLog("lztup-start","Check Profile banner"),l.bannerStyle&&l.bannerText&&(0,L.$)(l.bannerStyle,l.bannerText),console.timeLog("lztup-start","Check Profile bg"),l.backgroundImage&&(l.backgroundImageEverywhere?(0,v.j)(l.backgroundImage):(0,w.m)(l.backgroundImage)),console.timeLog("lztup-start","Profile bg loaded")),console.timeLog("lztup-start","Loading Contests DB...");const U=await GM_getValue(i.Z.Contests,{});console.timeLog("lztup-start","Add reg 10 btn"),U.openTenContestsBtn&&(0,u.u)(10),console.timeLog("lztup-start","Add onclick contests category"),(0,g.Z)(o.Z.nodes.contests,(async()=>{(await GM_getValue(i.Z.Contests,{})).openTenContestsBtn&&(0,u.u)(10)})),console.timeLog("lztup-start","hideTagsInThread"),U.hideTagsInThread&&(0,b.s$)(!0),console.timeLog("lztup-start","autoCloseOnParticipate"),U.autoCloseOnParticipate&&(0,c.p)(!0),console.timeLog("lztup-start","infoTopInThread"),U.infoTopInThread&&(0,b.Q6)(!0),console.timeLog("lztup-start","removeContent"),U.removeContent&&(0,b.Q9)(!0),console.timeLog("lztup-start","removePoll"),U.removePoll&&(0,b.Rf)(!0),console.timeLog("lztup-start","updateCaptchaButton"),U.updateCaptchaButton&&(0,b.g4)(),console.timeLog("lztup-start","autoFixCaptcha"),U.autoFixCaptcha&&(0,b.gu)(),console.timeLog("lztup-start","participateByKey"),U.participateByKey&&(0,b.sO)(!0),console.timeLog("lztup-start","Loading Users DB...");const S=await GM_getValue(i.Z.Users,{});console.timeLog("lztup-start","showUserIdInMemberCard"),S.showUserIdInMemberCard&&((0,y.SL)(),(0,f.O0)((e=>{e.nextSibling&&e.nextSibling?.classList?.contains("modal")&&(0,y.SL)()}))),console.timeLog("lztup-start","disableShareTyping"),S.disableShareTyping&&(0,T.$)(),(0,Z.cD)()&&(console.timeLog("lztup-start","showUserIdInProfile"),S.showUserIdInProfile&&(0,y.Rj)(),console.timeLog("lztup-start","showFullRegInProfile"),S.showFullRegInProfile&&(0,y.M1)(!0)),console.timeEnd("lztup-start")}))}r("./src/styles/errorPage.scss"),r("./src/styles/universal.scss"),r("./src/styles/xenforo.scss");try{await Promise.allSettled([U(),S()])}catch{console.error(e)}n()}catch(x){n(x)}}),1)},"./src/indexedDB/default.js":(e,t,n)=>{n.d(t,{c:()=>a});var r=n("./src/utils/logger.js");class a{constructor(e,t,n=1,r={},a={}){this.name=e,this.objectKey=t,this.version=n,this.indexes=r,this.defaultData=a}checker(e,...t){let n=!1;if("object"!=typeof arguments[1])return n;for(const t of Object.entries(arguments[1]))!t[0].toString()in e||typeof t[1]===e[t[0].toString()]&&(n=!0);return n}callback(e,t,n){if("object"!=typeof n)return response;for(const r of Object.entries(n))!r[0].toString()in e||typeof r[1]===e[r[0].toString()]&&(t[r[0].toString()]=r[1]);return t}open(){return indexedDB.open(this.name,this.version)}async delete(){return indexedDB.deleteDatabase(this.name)}async init(){return new Promise(((e,t)=>{const n=this.open();n.onerror=()=>{console.log(n),alert(`LZT Upgrade: Произошла ошибка при инициализации Базы Данных ${this.name}`),r.Z.error(`Ошибка инициализации Базы Данных ${this.name}: `,n.errorCode),t(!1)},n.onupgradeneeded=()=>{const a=n.result;a.onerror=()=>{alert(`LZT Upgrade: Не удалось загрузить базу данных ${this.name}`),r.Z.error(`Не удалось загрузить базу данных ${this.name}: `,n.error),t(!1)};const s=a.createObjectStore(this.objectKey,{keyPath:"key"});for(const e in this.indexes)void 0!==e&&s.createIndex(e,e,{unique:!1});r.Z.log(`База Данных ${this.name} создана`),s.transaction.oncomplete=()=>{const n=a.transaction(this.objectKey,"readwrite").objectStore(this.objectKey).add(this.defaultData);n.onsuccess=()=>{r.Z.log(`Стандартные настройки "${this.name}" добавлены в Базу Данных: `,n.result),e(!0)},n.onerror=()=>{r.Z.error(`Ошибка при добавление стандартных настроек "${this.name}" в Базу Данных: `,n.error),t(!1)}}},n.onsuccess=()=>{r.Z.log(`База данных ${this.name} инициализована`);const a=n.result;a.onversionchange=()=>{a.close(),alert(`LZT Upgrade: Базе данных ${this.name} необходимо обновление, пожалуйста, перезагрузите страницу.`),r.Z.log(`Базе данных ${this.name} необходимо обновление, пожалуйста, перезагрузите страницу`),t(!1)},e(!0)},n.onblocked=()=>{const e=n.result;r.Z.error(`База Данных ${this.name} временно заблокирована из-за ошибки: `,e),alert(`LZT Upgrade отключен из-за ошибки при обновление Базы Данных ${this.name}. Закройте все открытые вкладки с Lolzteam и попробуйте снова.`),t(!1)}}))}async read(){return new Promise(((e,t)=>{const n=this.open(this.name,this.version);n.onerror=()=>{alert(`LZT Upgrade: Произошла ошибка при чтение Базы Данных ${this.name}`),r.Z.error(`Ошибка чтения Базы Данных ${this.name}: `,n.errorCode),t(!1)},n.onupgradeneeded=()=>{n.result.close(),this.init(),e(!0)},n.onsuccess=()=>{const a=n.result;a.onversionchange=()=>{a.close(),alert(`LZT Upgrade: Базе данных ${this.name} необходимо обновление, пожалуйста, перезагрузите страницу.`),r.Z.log(`Базе данных ${this.name} необходимо обновление, пожалуйста, перезагрузите страницу`),t(!1)};const s=a.transaction(this.objectKey).objectStore(this.objectKey).get(this.objectKey);s.onerror=e=>{r.Z.error(`Не удалось получить данные из Базы Данных ${this.name}: `,e.error),t(!1)},s.onsuccess=()=>{const t=s.result;e(t)}},n.onblocked=()=>{const e=n.result;r.Z.error(`База Данных ${this.name} временно заблокирована из-за ошибки: `,e),alert(`LZT Upgrade отключен из-за ошибки при обновление Базы Данных ${this.name}. Закройте все открытые вкладки с Lolzteam и попробуйте снова.`),t(!1)}}))}async update(e){return new Promise(((t,n)=>{if(this.checker(this.indexes,e)){const a=this.open(this.name);a.onerror=()=>{alert(`LZT Upgrade: Произошла ошибка при обновление Базы Данных ${this.name}`),r.Z.error(`Ошибка при обновление Базы Данных ${this.name}: `,a.errorCode),n(!1)},a.onupgradeneeded=()=>{a.result.close(),this.init(),t(!0)},a.onsuccess=()=>{const s=a.result;s.onversionchange=()=>{s.close(),alert(`LZT Upgrade: Базе данных ${this.name} необходимо обновление, пожалуйста, перезагрузите страницу.`),r.Z.log(`Базе данных ${this.name} необходимо обновление, пожалуйста, перезагрузите страницу`),n(!1)};var o=s.transaction(this.objectKey,"readwrite").objectStore(this.objectKey),i=o.get(this.objectKey);i.onerror=e=>{r.Z.error(`Не удалось получить данные из Базы Данных ${this.name}: `,e.error),n(!1)},i.onsuccess=()=>{let a=i.result;a=this.callback(this.indexes,a,e);const s=o.put(a);s.onerror=e=>{r.Z.error(`Не удалось обновить данные в Базе Данных ${this.name}: `,e.error),n(!1)},s.onsuccess=()=>{r.Z.log("Данные в Базе Данных обновлены, вы великолепны!"),t(!0)}}},a.onblocked=()=>{const e=a.result;r.Z.error(`База Данных ${this.name} временно заблокирована из-за ошибки: `,e),alert(`LZT Upgrade отключен из-за ошибки при обновление Базы Данных ${this.name}. Закройте все открытые вкладки с Lolzteam и попробуйте снова.`),n(!1)}}else r.Z.error("В чём смысл делать функцию добавления, которая ничего не добавляет?! wut"),n(!1)}))}}},"./src/indexedDB/profile.js":(e,t,n)=>{n.d(t,{M:()=>a});var r=n("./src/indexedDB/default.js");class a extends r.c{constructor(e="LZTUpProfile",t="uniqueStyle",n=1){super(e,t,n,{usernameStyle:"string",bannerStyle:"string",bannerText:"string",badgeIcon:"string",badgeText:"string",badgeFill:"string",badgeStroke:"string",noticesMarks:"string",backgroundImage:"string",backgroundImageEverywhere:"number",badgeIcons:"object"},{key:t,usernameStyle:"",bannerStyle:"",bannerText:"",badgeIcon:"",badgeText:"",badgeFill:"",badgeStroke:"",noticesMarks:"",backgroundImage:"",backgroundImageEverywhere:0,badgeIcons:[]})}async update({usernameStyle:e,bannerStyle:t,bannerText:n,badgeIcon:r,badgeText:a,badgeFill:s,badgeStroke:o,noticesMarks:i,backgroundImage:c,backgroundImageEverywhere:l,badgeIcons:d}){super.update(...arguments)}}},"./src/ui/avatarUserBadges.js":(e,t,n)=>{n.d(t,{Z:()=>l});var r=n("./src/utils/purify.js"),a=n("./src/xenforo/tooltips.js");function s(e,t,n){return e.setAttribute(t,n)}function o(e,t,n,r=!1){if(!["stroke","fill"].includes(t))return;if(!r)return s(e,t,n);s(e,t,n);const a=e.querySelectorAll("*");for(const e of a)s(e,t,n)}var i=n("./src/utils/logger.js"),c=n("./src/utils/utils.js");const l=class{constructor(e,t=!1){this.previewId="LZTUpPreviewBadge",this.customBadgeId="LZTUpUserBadge",this.badgeQuery=t?`#${this.previewId}`:`#${this.customBadgeId}`,this.badges=e,this.isPreview=t}createElement(){const e=document.createElement("div");e.classList.add("avatarUserBadges");for(let t=0;t<this.badges.length;t++){const n=document.createElement("span");n.classList.add("avatarUserBadge","Tooltip"),n.tabIndex=0,n.title=XenForo.htmlspecialchars(this.badges[t].text),this.isPreview?n.id=this.previewId:n.id=this.customBadgeId,this.badges.length>1&&n.classList.add(`avatarUserBadge--${t+1}`),n.dataset.position=t+1,this.badges.length>1&&(n.dataset.multiple=!0),e.appendChild(n)}return e}findBadgeElement(e,t){return document.querySelector(e+`[data-position="${t}"]`)}findAllBadgeElement(e,t){return document.querySelectorAll(e+`[data-position="${t}"]`)}applyBadge(e,t){return t?.length>1&&t?.startsWith(".")?(t=t.replace(".",""),e.classList.add("userBanner",t)):t.startsWith("<svg")&&t.endsWith("svg>")?(e.innerHTML=(0,r.bw)(t),e.classList.add("badgeDefaultBackground")):e.classList.add("uniq_default","badgeDefaultBackground")}updateIcon(e,t){if(e)return(0,c.Bw)(e),e.classList.add("avatarUserBadge","Tooltip"),"true"===e.dataset.multiple&&e.classList.add(`avatarUserBadge--${t.position}`),this.applyBadge(e,t.svg)}updateText(e,t){if(e)return e._tippy?(0,a.w)(e,XenForo.htmlspecialchars(t.text)):XenForo.Tooltip($(e))}updateColor(e,t){if(!e)return;const n=e.querySelector("svg");n&&(o(n,"stroke",t.strokeColor,!0),o(n,"fill",t.fillColor,!0))}updateStyle(e,t){if(e&&t.style&&!t.style?.startsWith("."))return e.style=t.style}updateBadge(e){const t=this.findAllBadgeElement(this.badgeQuery,e.position);if(t.length)for(const n of t)this.updateIcon(n,e),this.updateText(n,e),this.updateColor(n,e),this.updateStyle(n,e)}updateBadges(){i.Z.debug("updateBadges");for(const e of this.badges)"object"==typeof e?(i.Z.debug(e),this.updateBadge(e)):i.Z.error("Invalid badge in array")}}},"./src/ui/components/button.js":(e,t,n)=>{n.d(t,{Z:()=>a});var r=n("./src/ui/components/icon.js");const a=class{constructor(e,t="button",n=undefined){this.buttonText=e,this.className=t,this.iconClassName=n}createElement(e=(()=>{})){const t=document.createElement("button");if(t.className=this.className,t.innerText=this.buttonText,this.iconClassName){const e=new r.Z(this.iconClassName).createElement();e.id="",t.appendChild(e)}return t.onclick=e,t}}},"./src/ui/components/buttons/contestsButton.js":(e,t,n)=>{n.d(t,{c:()=>o,u:()=>s});var r=n("./src/utils/checkers.js"),a=n("./src/utils/utils.js");function s(e=10){if((0,r.IM)()&&!$(`#openContestsButton${XenForo.htmlspecialchars(e)}`).length){const t=$("span.UpdateFeedButton.UpdateFeedButtonIcon"),n=$(`\n      <a class="button" id="openContestsButton${XenForo.htmlspecialchars(e)}">\n        Открыть ${XenForo.htmlspecialchars(e)}\n      </a>\n    `);n.on("click",(async()=>{if(t.click(),!await(0,a.Nc)("div.forumImprovements--mask.hidden"))return;const n=(0,a.Eq)();n.length&&$(n).map(((t,n)=>{if(t<=e){const e=window.open(`https://${window.location.hostname}/${n}`);e?e.focus():alert("Разрешите доступ к всплывающим окнам для этого сайта")}}))})),t.length&&t.parent().prepend(n)}}function o(e=10){if((0,r.IM)()){const t=$(`#openContestsButton${XenForo.htmlspecialchars(e)}`);t.length&&t.remove()}}},"./src/ui/components/buttons/errorPageButton.js":(e,t,n)=>{n.d(t,{Z:()=>r});const r=class{constructor(e,t="#",n="button"){this.buttonContent=e,this.buttonHref=t,this.className=n}createElement(){const e=document.createElement("a");return e.href=this.buttonHref,e.className=this.className,e.innerHTML=this.buttonContent,e}}},"./src/ui/components/buttons/menuButton.js":(e,t,n)=>{n.d(t,{Z:()=>Ce});var r=n("./src/utils/registers.js"),a=n("./src/ui/components/icon.js"),s=n("./src/utils/purify.js");class o{static Row=new o("row");static Column=new o("column");constructor(e){this.name=e}}class i{constructor(e){this.text=e,this.className="LZTUpSectionTitle"}createElement(){const e=document.createElement("span");return e.classList.add(this.className),e.innerText=this.text,e}}class c extends i{constructor(e){super(e),this.className="LZTUpSectionDesc"}createElement(){const e=document.createElement("span");return e.classList.add(this.className),e.innerHTML=(0,s.G6)(this.text),e}}class l{constructor(e,t={}){this.id=e,this.sectionItems=t.sectionItems||[],this.sectionContainers=t.sectionContainers||[],this.direction=t.direction||o.Row,this.hidden=t.hidden??!0}createElement(){const e=document.createElement("div");e.id=this.id,e.classList.add("LZTUpSection",this.direction===o.Row?"row":"column");for(const t of this.sectionItems)e.appendChild(t);return console.log(this),this.hidden&&(console.log(this.id,this.hidden),e.style.display="none"),e}addSectionItem(e,t,n,r,s=(()=>{}),l=!1){const d=document.createElement("div");d.id=r,d.classList.add("LZTUpSectionItem");const u=new a.Z(n).createElement(),p=document.createElement("div");p.classList.add("LZTUpSectionTextContainer");const m=new i(e).createElement(),g=new c(t).createElement();if(p.append(m,g),d.append(u,p),this.direction===o.Column&&l){const e=new a.Z("far fa-angle-right gray right").createElement();d.append(e)}return d.onclick=async t=>await s(t,e),this.sectionItems.push(d),this}addSectionContainer(e,t){const n=document.createElement("div");n.id=e,n.classList.add("LZTUpSubMenu"),n.style.display="none";for(const e of t)n.appendChild(e);return this.sectionContainers.push(n),this}}var d=n("./src/utils/logger.js"),u=n("./src/configs/StorageName.js"),p=n("./src/callbacks/contestsParticipate.js"),m=n("./src/ui/components/buttons/contestsButton.js");const g=class{constructor(e,t){this.elementId=e,this.content=(0,s.G6)(t)}createElement(e,t=(()=>{}),n=(()=>{}),r=(()=>{})){const a=document.createElement("div"),s=document.createElement("input"),o=document.createElement("label");return s.type="checkbox",s.id=this.elementId,s.checked=Boolean(e),o.htmlFor=this.elementId,o.innerHTML=this.content,a.id="LZTUpModalChecksContainer",a.appendChild(s),a.appendChild(o),s.addEventListener("click",(async e=>{await r(e),e.target.checked?await t(e):await n(e)})),a}};var h=n("./src/utils/contests.js"),f=n("./src/utils/utils.js");const b=async()=>{const e=await GM_getValue(u.Z.Contests,{});return[new g("open_ten_contests",'Кнопка "Открыть 10"').createElement(e.openTenContestsBtn,(()=>{(0,m.u)(10)}),(()=>{(0,m.c)(10)}),(async t=>{e.openTenContestsBtn=t.target.checked,await GM_setValue(u.Z.Contests,e)})),new g("auto_close_on_participate",'Автозакрытие страницы при нажатие на кнопку "Участвовать"\n      <span class="fa fa-exclamation-triangle Tooltip" title="При отключение этой функции страница будет перезагружена"></span>\n      ').createElement(e.autoCloseOnParticipate,(async()=>{(0,r.de)('Включено Автозакрытие страницы при нажатие на кнопку "Участвовать"',5e3),(0,p.p)(!0)}),(async()=>{(0,r.de)('Выключено Автозакрытие страницы при нажатие на кнопку "Участвовать"',5e3),await(0,f._v)(500),window.location.reload()}),(async t=>{e.autoCloseOnParticipate=t.target.checked,await GM_setValue(u.Z.Contests,e)})),new g("info_top_in_contests","Отображение информации о розыгрыше вверху темы").createElement(e.infoTopInThread,(()=>{}),(()=>{}),(async t=>{e.infoTopInThread=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,h.Q6)(t.target.checked)})),new g("hide_tags_in_contests","Скрытие тегов в теме розыгрыша").createElement(e.hideTagsInThread,(()=>{}),(()=>{}),(async t=>{e.hideTagsInThread=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,h.s$)(t.target.checked)})),new g("remove_content_in_contests","Скрытие содержимого темы розыгрыша").createElement(e.removeContent,(()=>{}),(()=>{}),(async t=>{e.removeContent=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,h.Q9)(t.target.checked)})),new g("remove_poll_in_contests","Скрытие голосования в теме розыгрыша").createElement(e.removePoll,(()=>{}),(()=>{}),(async t=>{e.removePoll=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,h.Rf)(t.target.checked)})),new g("update_captcha_button_in_contests",'Кнопка "Обновление капчи"').createElement(e.updateCaptchaButton,(async()=>{(0,h.g4)()}),(async()=>{document.querySelector(".LZTUpRefreshButton")?.remove()}),(async t=>{e.updateCaptchaButton=t.target.checked,await GM_setValue(u.Z.Contests,e)})),new g("auto_fix_captcha_in_contests",'Автофикс капчи\n      <span class="fa fa-question Tooltip" title="Автоматически обновляет капчу, если она не появилась"></span>\n      <span class="fa fa-exclamation-triangle Tooltip" title="При отключение этой функции страница будет перезагружена"></span>\n    ').createElement(e.autoFixCaptcha,(async()=>{(0,r.de)("Включен Автофикс капчи",5e3),(0,h.gu)()}),(async()=>{(0,r.de)("Выключен Автофикс капчи",5e3),await(0,f._v)(500),window.location.reload()}),(async t=>{e.autoFixCaptcha=t.target.checked,await GM_setValue(u.Z.Contests,e)})),new g("participate_by_key","Участие по кнопке Tab").createElement(e.participateByKey,(()=>{}),(()=>{}),(async t=>{(0,r.de)("Участие по кнопке "+(t.target.checked?"включено":"выключено"),5e3),e.participateByKey=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,h.sO)(t.target.checked)}))]};var y=n("./src/utils/users.js");const T=async()=>{const e=await GM_getValue(u.Z.Users,{});return[new g("show_userid_in_profile","Показывать ID в профиле пользователя").createElement(e.showUserIdInProfile,(()=>{(0,y.Rj)()}),(()=>{(0,y.UD)()}),(async t=>{e.showUserIdInProfile=t.target.checked,await GM_setValue(u.Z.Users,e)})),new g("show_userid_in_member_card",'Показывать ID в карточке пользователя\n      <span class="fa fa-exclamation-triangle Tooltip" title="При включение/отключение этой функции страница будет перезагружена"></span>\n      ').createElement(e.showUserIdInMemberCard,(()=>{}),(()=>{}),(async t=>{e.showUserIdInMemberCard=t.target.checked,await GM_setValue(u.Z.Users,e),(0,r.de)("Показывать ID в карточке пользователя "+(t.target.checked?"включено":"выключено"),5e3),await(0,f._v)(500),window.location.reload()})),new g("show_fullreg_in_profile","Показывать полную дату регистрации в профиле пользователя").createElement(e.showFullRegInProfile,(()=>{}),(()=>{}),(async t=>{e.showFullRegInProfile=t.target.checked,await GM_setValue(u.Z.Users,e),(0,y.M1)(t.target.checked)})),new g("disable_share_typing",'Неписалка в темах\n      <span class="fa fa-exclamation-triangle Tooltip" title="При включение/отключение этой функции страница будет перезагружена"></span>\n      ').createElement(e.disableShareTyping,(()=>{}),(()=>{}),(async t=>{e.disableShareTyping=t.target.checked,await GM_setValue(u.Z.Users,e),(0,r.de)("Неписалка в темах "+(t.target.checked?"включена":"выключена"),5e3),await(0,f._v)(500),window.location.reload()}))]};var L=n("./src/configs/config.js"),v=n("./src/indexedDB/profile.js");const w=class{constructor(e){this.content=(0,s.G6)(e)}createElement(){const e=document.createElement("div");return e.id="LZTUpModalComment",e.innerHTML=this.content,e}};var Z=n("./src/ui/avatarUserBadges.js");const U=class{constructor(e,t,n,r=null){this.userid=e,this.username=t,this.data=n,this.profileElId=r||"LZTUpPreviewContainer",this.badges=new Z.Z(n.badgeIcons,!0)}createElement(){const e=document.createElement("div");e.id=this.profileElId,e.classList.add("previewContainer");const t=this.badges.createElement(),n=document.createElement("div");n.classList.add("avatarBox"),n.appendChild(t),n.innerHTML+=`\n      <a href="members/${encodeURIComponent(this.userid)}/" class="avatar Av${XenForo.htmlspecialchars(this.userid)}m" data-avatarhtml="true">\n        <span class="img m" style="background-image: url(${(0,y.Dm)(this.userid)})"></span>\n      </a>\n    `;const r=document.createElement("div");return r.classList.add("info"),r.innerHTML=`\n      <span id="LZTUpUsernameStyle" class="UsernameStyle bold">${XenForo.htmlspecialchars(this.username)}</span>\n      <div class="bannerOrStatus">\n        <em id="LZTUpUserBannerStyle" class="UserBannerStyle userBanner"></em>\n      </div>\n    `,e.appendChild(n),e.appendChild(r),e}clearStyle(e){const t=document.querySelector(e);if(t)return t.className="",t.style="",t}async updateUsernameStyle(e){const t=this.clearStyle(`#${this.profileElId} #LZTUpUsernameStyle`);t&&(""===e&&(e=`.${await GM_getValue(u.Z.UserGroup,L.Z.defaultUserGroup)}`),t.classList.add("UsernameStyle","bold"),(0,f.bg)(t,e))}updateBannerStyle(e){const t=this.clearStyle(`#${this.profileElId} #LZTUpUserBannerStyle`);t&&(t.classList.add("UserBannerStyle","userBanner"),(0,f.bg)(t,e))}updateBannerText(e){const t=document.querySelector(`#${this.profileElId} #LZTUpUserBannerStyle`);t&&(t.innerText=XenForo.htmlspecialchars(e))}updateBanner(e){const t=this.clearStyle(`#${this.profileElId} #LZTUpUserBannerStyle`);if(t){if(!e.bannerStyle||!e.bannerText)return t.style.display="none";t.style.display="",this.updateBannerStyle(e.bannerStyle),this.updateBannerText(e.bannerText)}else d.Z.error("Failed to get element by userBanner in PreviewProfile!")}updateBackground(e){const t=document.querySelector(`#${this.profileElId}`);console.log(`#${this.profileElId}`,t),t?(e.length&&(console.log("add imageURL"),e=`linear-gradient(rgba(54, 54, 54, 0.85), rgba(54, 54, 54, 0.85)), url(${e})`),t.style.backgroundImage=e):d.Z.error("Failed to get previewContainer in PreviewProfile!")}updateBadges(){return this.badges.updateBadges()}async updateAll(){await this.updateUsernameStyle(this.data.usernameStyle),this.updateBanner(this.data),this.updateBackground(this.data.backgroundImage),this.badges.badges=this.data.badgeIcons,this.updateBadges()}},S=class{constructor(e="",t="",n=0,r=0){this.text=e,this.placeholder=t,this.minLength=n,this.maxLength=r}createElement(e){const t=document.createElement("textarea");return t.classList.add("LZTUpTextArea","textCtrl"),t.innerText=this.text,t.placeholder=this.placeholder,t.minLength=this.minLength,this.maxLength>0&&(t.maxLength=this.maxLength),t.onkeyup=e,t.onchange=e,t}},x=class{constructor(e="",t="",n=0,r=0){this.text=e,this.placeholder=t,this.minLength=n,this.maxLength=r}createElement(e){const t=document.createElement("input");return t.classList.add("textCtrl"),t.value=this.text,t.placeholder=this.placeholder,t.minLength=this.minLength,this.maxLength>0&&(t.maxLength=this.maxLength),t.onkeyup=e,t.onchange=e,t}};var C=n("./src/ui/components/button.js");const E=class{constructor(e){this.text=e}createElement(){const e=document.createElement("p");return e.classList.add("LZTUpModalDescription","muted"),e.innerText=this.text,e}},I=class{constructor(e,t,n=""){this.id=e,this.value=t,this.description=n}createElement(e){const t=document.createElement("div");t.classList.add("LZTUpColorPickerWrap");const n=document.createElement("input");if(n.id=this.id,n.classList.add("LZTUpColorPicker"),n.value=this.value,n.type="text",n.dataset.coloris="",n.oninput=e,""!==this.description){const e=new E(this.description).createElement();t.appendChild(e)}return t.appendChild(n),t}},k=class{constructor(e,t="",n=""){this.elements=e,this.heading=t,this.description=n}createElement(){const e=document.createElement("div");if(e.classList.add("LZTUpContainer"),this.heading){const t=new class{constructor(e){this.text=e}createElement(){const e=document.createElement("h2");return e.classList.add("LZTUpModalHeading"),e.innerText=this.text,e}}(this.heading).createElement();e.appendChild(t)}if(this.description){const t=new E(this.description).createElement();e.appendChild(t)}for(const t of this.elements)e.appendChild(t);return e}},j=class{constructor(e=""){this.customStyle=e}createElement(){const e=document.createElement("div");return e.classList.add("LZTUpModalSeparator"),""!==this.customStyle&&(e.style.borderBottom=this.customStyle),e}},M=class{constructor(e){this.elements=e}createElement(e=(e=>{})){const t=document.createElement("div");t.classList.add("LZTUpSortableContainer");for(const e of this.elements)t.appendChild(e);return Sortable.create(t,{handle:".LZTUpSortableDraggable",animation:150,onMove:e}),t}},B=class{constructor(e,t=null){this.content=e,this.dataId=t}createElement(e=(()=>{}),t=(()=>{})){const n=document.createElement("div");n.classList.add("LZTUpSortableItem"),this.dataId&&(n.dataset.id=this.dataId);const r=document.createElement("div");r.classList.add("LZTUpSortableDraggable");const s=new a.Z("far fa-grip-vertical","").createElement();r.appendChild(s);const o=document.createElement("div");o.classList.add("LZTUpSortableContent");const i=document.createElement("p");i.innerText=this.content,o.append(i);const c=document.createElement("div");c.classList.add("LZTUpSortableUtility");const l=document.createElement("div");l.classList.add("LZTUpSortableEditButton");const d=new a.Z("far fa-edit","").createElement();l.appendChild(d),l.onclick=async t=>{console.log("Edit button clicked"),await e(t,n)};const u=document.createElement("div");u.classList.add("LZTUpSortableRemoveButton");const p=new a.Z("far fa-trash","").createElement();return u.appendChild(p),u.onclick=async e=>{confirm("Вы точно хотите удалить иконку?")&&(n.remove(),await t(e,n))},c.appendChild(l),c.appendChild(u),n.appendChild(r),n.appendChild(o),n.appendChild(c),n}};var _=n("./src/configs/extData.js");function P(e){const t=document.querySelector(".xenOverlay > .errorOverlay#LZTUpModalOverlay").querySelector("h2.heading");t.id="LZTUpModalMainTitle",t.innerText=e}function A(e="",t=L.Z.extName,n=null,r=(()=>{})){const a="button.LZTUpModalBackButton";return null!==document.querySelector(a)&&document.querySelector(a).remove(),function(s){const o=document.querySelector(".xenOverlay > .errorOverlay#LZTUpModalOverlay"),i=new C.Z("","LZTUpModalBackButton","fas fa-long-arrow-left").createElement();i.onclick=()=>{document.querySelectorAll("div.LZTUpSubMenu").forEach((e=>e.style.display="none")),(()=>{if(document.querySelector(a).remove(),P(t),"tempmenu"===e)document.querySelector(_.Z.uiElementsSelectors.lztupTempSubMenu).style.display="none",n.style.display="",A(),r();else{document.querySelector(".LZTUpModalContent > .LZTUpSection").style.display="";const e=document.querySelector(".LZTUpTabs");e.style.display="";const t=e.querySelectorAll("#LZTUpTab");t.forEach((e=>e.classList.remove("active"))),t[0].classList.add("active"),r()}})()},o.insertAdjacentElement("afterbegin",i)}()}function q(e,t){return document.querySelector(".LZTUpTabs").style.display="none",document.querySelectorAll(".LZTUpSubMenu").forEach((e=>e.style.display="none")),document.querySelectorAll(".LZTUpModalContent > .LZTUpSection").forEach((e=>e.style.display="none")),document.querySelector(`#${e}`).style.display="",P(t),A()}const z=_.Z.uiElementsId.lztupTempSubMenu,D=_.Z.uiElementsSelectors.lztupTempSubMenu,N={theme:"lzt",themeMode:"dark",formatToggle:!0,closeButton:!0,clearButton:!0,alpha:!0,swatches:[]};function G(e=".xenOverlay"){const t=document.querySelectorAll(".LZTUpColorPicker");for(const n of t){if(!document.querySelector(".clr-picker"))try{Coloris.init(e)}catch(e){console.error(e)}try{Coloris(Object.assign(N,{el:`#${n.id}`,parent:e}))}catch(e){console.error(e)}}}var F=n("./src/visuals/users.js"),O=n("./src/visuals/universal.js"),R=n("./src/visuals/profile.js");const H=new v.M;async function V(e,t,n){const a=Number(t.dataset.id),o=document.querySelector(".LZTUpModalContent"),i=document.querySelector("#LZTUpUniqContainer"),c=await H.read(),l=c.badgeIcons.filter((e=>e.position===a));let d=l[0];console.log(a,"==>",c.badgeIcons,"==>",l,"==>",d);const u=W(c,"LZTUpTempPreviewContainer");async function p(e){let t=(await H.read()).badgeIcons;const n=t.find((e=>e.position===a)),r=t.indexOf(n);return t[r]=e,t}const m=function(e){const t=document.querySelector(D);t&&t.remove();const n=document.createElement("div");n.id=z,n.classList.add("LZTUpSubMenu");for(const t of e)n.appendChild(t);return n.style.display="none",n}([u.createElement(),new k([new S(d.svg,"<svg>...</svg>",0,3e3).createElement((async e=>{let t=(0,s.bw)(e.target.value.trim());if(t.length>3e3)return(0,r.de)("Максимальная длина иконки 3000 символов. Уменьшите введенный текст для сохранения.");d.svg=t,u.badges.badges=await p(d),u.updateBadges()}))],"Иконка на аватарке","Максимум 3000 символов.").createElement(),new k([new S(d.style,"background: #fff",0,1500).createElement((async e=>{let t=(0,s.zB)(e.target.value.trim());if(t.length>1500)return(0,r.de)("Максимальная длина стиля иконки 1500 символов. Уменьшите введенный текст для сохранения.");t.length>1&&t.startsWith(".")&&(e.target.value=t.replace(/\s/g,""),t=e.target.value),d.style=t,u.badges.badges=await p(d),u.updateBadges()}))],"Стиль иконки","Максимум 1500 символов.").createElement(),new k([new x(d.text,"Идут два сталкера",0,24).createElement((async e=>{let t=e.target.value;if(t.length>24)return(0,r.de)("Максимальная длина текста в лычке 24 символа. Уменьшите введенный текст для сохранения.");d.text=t,u.badges.badges=await p(d),u.updateBadges()}))],"Текст при наведение на иконку","Максимум 24 символа.").createElement(),new k([new I("LZTUpColorPickerFill",d.fillColor,"Цвет иконки (fill):").createElement((async e=>{let t=e.target.value;d.fillColor=t,u.badges.badges=await p(d),u.updateBadges()})),new I("LZTUpColorPickerStroke",d.strokeColor,"Цвет иконки (stroke):").createElement((async e=>{let t=e.target.value;d.strokeColor=t,u.badges.badges=await p(d),u.updateBadges()}))],"Изменение цвета иконки").createElement(),new k([new C.Z("Сохранить","button primary LZTUpIconButton fit","far fa-save").createElement((async()=>{(0,r.de)("Иконка успешно сохранена.");const e=await p(d);await H.update({badgeIcons:e}),(0,F.Az)(e),u.badges.badges=e,u.updateBadges()}))]).createElement()]);var g,h;o.appendChild(m),G(),g=i,h=async()=>{const e=document.querySelectorAll(".LZTUpSortableContainer > .LZTUpSortableItem"),t=await H.read();for(let n=0;n<t.badgeIcons.length;n++)e[n].querySelector(".LZTUpSortableContent").innerHTML=(0,s.G6)(t.badgeIcons[n].text);n.badges.badges=t.badgeIcons,n.updateBadges()},document.querySelectorAll(".LZTUpSubMenu").forEach((e=>e.style.display="none")),document.querySelector(D).style.display="",P("Управление иконкой"),A("tempmenu","Локальный Уник",g,h),await u.updateAll(c)}function W(e,t=null){const n=(0,y.n5)("me"),r=(0,y.Ms)("me");return new U(n,r,e,t)}const X=async()=>{async function e(e,t="LZTUpPreviewContainer"){const n=document.querySelector(`#${t} > .avatarBox > .avatarUserBadges`);if(n){for(const e of n.children)e.remove();const t=new Z.Z(e.badgeIcons,!0).createElement();n.innerHTML=t.innerHTML,i.data=e,await i.updateAll()}}async function t(e,t){const n=await H.read();let r=n.badgeIcons,a=[];const s=document.querySelector(`#LZTUpPreviewBadge[data-position="${t.dataset.id}"]`);s&&s.remove();const o=document.querySelector("#LZTUpPreviewBadge");o&&(o.dataset.position=1,o.dataset.multiple="false",o?.classList.contains("avatarUserBadge--1")&&o.classList.remove("avatarUserBadge--1"),o?.classList.contains("avatarUserBadge--2")&&o.classList.remove("avatarUserBadge--2"));for(const e of r){if(String(e.position)===t.dataset.id)continue;const n=document.querySelector(".LZTUpSortableContainer > .LZTUpSortableItem");n&&(n.dataset.id=1),e.position=1,a.push(e)}await H.update({badgeIcons:a}),i.data=n,await i.updateAll(),(0,F.Az)(a)}const n=await H.read(),a=await GM_getValue(u.Z.UserGroup,L.Z.defaultUserGroup),o=window.location.hostname,i=W(n);return[new w(`На этой вкладке вы можете выбрать стиль вашего ника и лычки. Этот стиль виден только вам.\n      Чтобы уник был виден всем, рекомендуем <a href="https://${o}/account/upgrades?upgrade_id=14" target="_blank">купить</a> настоящий уник.`).createElement(),i.createElement(),new k([new S(n.usernameStyle,"color: #0daf77",0,1500).createElement((e=>{let t=e.target.value.trim();if(t.length>1500)return(0,r.de)("Максимальная длина стиля ника 1500 символов. Уменьшите введенный текст для сохранения.");t.length>1&&t.startsWith(".")?(e.target.value=t.replace(/\s/g,""),t=e.target.value):t=(0,s.zB)(t),i.updateUsernameStyle(t),n.usernameStyle=t}))],"Стиль ника","Максимум 1500 символов. При отсутствии кода используется цвет вашей группы с форума.").createElement(),new k([new S(n.bannerStyle,"background: #fff",0,1500).createElement((e=>{let t=e.target.value.trim();if(t.length>1500)return(0,r.de)("Максимальная длина стиля лычки 1500 символов. Уменьшите введенный текст для сохранения.");t.length>1&&t.startsWith(".")?(e.target.value=t.replace(/\s/g,""),t=e.target.value):t=(0,s.zB)(t),n.bannerStyle=t,i.updateBanner(n)}))],"Стиль лычки","Максимум 1500 символов. При отсутствии текста или стиля лычка отключается.").createElement(),new k([new x(n.bannerText,"Внимание анекдот",0,24).createElement((e=>{let t=e.target.value;if(t.length>24)return(0,r.de)("Максимальная длина текста в лычке 24 символа. Уменьшите введенный текст для сохранения.");n.bannerText=t,i.updateBanner(n)}))],"Текст в лычке","Максимум 24 символа. При отсутствии текста или стиля лычка отключается.").createElement(),(new j).createElement(),new k([new M(function(e,n){console.log("Generating badge items");const r=[];for(const a of n.badgeIcons.sort(((e,t)=>e.position-t.position)))console.log(a.text,a.position),r.push(new B(a.text,a.position).createElement(((t,n)=>V(0,n,e)),t));return console.log(r),r}(i,n)).createElement((async t=>{const r=t.target.children,a=await H.read();a.badgeIcons.reverse();for(let e=0;e<r.length;e++)d.Z.debug("moving items"),r[e].dataset.id=e+1,a.badgeIcons[e].position=e+1;n.badgeIcons=a.badgeIcons,await H.update({badgeIcons:a.badgeIcons}),await e(n),(0,F.Az)(a.badgeIcons)})),new C.Z("Добавить иконку","button LZTUpIconButton","far fa-plus").createElement((async a=>{const s=a.target.parentElement?.querySelector(".LZTUpSortableContainer");if(!s)return(0,r.de)("Не найден контейнер для добавления!");if(2===s.children.length)return(0,r.de)("Вы не можете добавить больше 2 иконок!");const o=(await H.read()).badgeIcons,c={position:s.children.length+1,style:"",text:"Новая иконка",svg:"",fillColor:"",StrokeColor:""};o.push(c);const l=new B(c.text,c.position).createElement(((e,t)=>V(0,t,i)),t);s.appendChild(l),await H.update({badgeIcons:o}),n.badgeIcons=o,await e(n),(0,F.Az)(o)}))],"Управление иконками","Ниже вы можете легко настроить иконки уника и их порядок (изменения автоматически применяются)").createElement(),(new j).createElement(),new k([new x(n.backgroundImage,"Ссылка на изображение",0,2048).createElement((e=>{let t=XenForo.htmlspecialchars(e.target.value);if(t.length>2048)return(0,r.de)("Максимальная длина ссылки на фон 2048 символов. Введите другую ссылку для сохранения.");console.log("execute background"),n.backgroundImage=t,i.updateBackground(n.backgroundImage)}))],"Фон профиля","Поддерживаются только прямые ссылки на изображения.").createElement(),new g("profile_background_everywhere","Заменить фон на всех страницах форума").createElement(n.backgroundImageEverywhere,(async()=>{await H.update({backgroundImageEverywhere:1}),(0,O.j)(n.backgroundImage)}),(async()=>{await H.update({backgroundImageEverywhere:0}),(0,O.j)(""),(0,R.m)(n.backgroundImage)})),new k([new C.Z("Сохранить","button primary LZTUpIconButton fit","far fa-save").createElement((async()=>{const e=await H.read();await H.update({usernameStyle:n.usernameStyle,bannerStyle:n.bannerStyle,bannerText:n.bannerText,backgroundImage:n.backgroundImage}),(0,r.de)("Настройки локального уника успешно сохранены."),n.usernameStyle?(0,F.bR)(n.usernameStyle):""!==e.usernameStyle&&""==n.usernameStyle&&(0,F.bR)(`.${a}`),n.bannerStyle&&n.bannerText&&(0,F.$)(n.bannerStyle,n.bannerText),n.backgroundImage&&(n.backgroundImageEverywhere?(0,O.j)(n.backgroundImage):(0,R.m)(n.backgroundImage)),i.data=n,await i.updateAll()}))]).createElement()]},K=async()=>{const e=new l("LZTUpInfoSection",{direction:o.Column,hidden:!1});for(const t of _.Z.infoLinks)e.addSectionItem(t.title,t.desc,t.icon,t.sectionId,(()=>window.open(t.href)));return[e.createElement()]};var J=n("./src/indexedDB/default.js");class Q extends J.c{constructor(e="LZTUpAppear",t="appear",n=1){super(e,t,n,{hideUnreadArticleCircle:"number",hideTagsInThreads:"number",forumLogo:"number",hideCounterAlerts:"number",hideCounterConversations:"number",marketLogo:"number",reportButtonsInPost:"string",selectedTheme:"number",themeAutoReload:"number",backgroundEffect:"number",hideOnlyfans:"number",showPollResults:"number",newErrorPage:"number",selfAdOnNewErrorPage:"number"},{key:t,hideUnreadArticleCircle:0,hideTagsInThreads:0,forumLogo:0,hideCounterAlerts:0,hideCounterConversations:0,marketLogo:0,reportButtonsInPost:"",selectedTheme:0,themeAutoReload:0,backgroundEffect:0,hideOnlyfans:0,showPollResults:0,newErrorPage:1,selfAdOnNewErrorPage:1})}async update({hideUnreadArticleCircle:e,hideTagsInThreads:t,forumLogo:n,hideCounterAlerts:r,hideCounterConversations:a,marketLogo:s,reportButtonsInPost:o,selectedTheme:i,themeAutoReload:c,backgroundEffect:l,hideOnlyfans:d,showPollResults:u,newErrorPage:p,selfAdOnNewErrorPage:m}){super.update(...arguments)}}const Y=new Q,ee=new v.M;async function te(){const e=await Y.read(),t=await GM_getValue(u.Z.Contests,{}),n=await ee.read(),a=await GM_getValue(Storage.Settings,{}),s=await GM_getValue(u.Z.Users,{});!function(e,t){const n=new Blob([e],{type:"application/json"}),r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.download="LZTUpgradeConfig.json",r.click()}(JSON.stringify({appear:e,contests:t,profile:n,settings:a,users:s})),(0,r.de)("Файл настроек выгружен",5e3)}async function ne(){const e=await async function(){const e=document.createElement("input");e.type="file",e.accept="application/json",e.click();const t=await new Promise((t=>{e.onchange=()=>{t(e.files[0])}})),n=new FileReader;return n.readAsText(t),await new Promise((e=>{n.onload=()=>{e(n.result)},n.onerror=t=>{d.Z.error("Ошибка загрузки файла настроек",t),e(!1)}}))}();if(e)try{const t=JSON.parse(e);await Y.update(t?.appear),await GM_setValue(u.Z.Contests,t?.contests),await ee.update(t?.profile),await GM_setValue(u.Z.Settings,t?.settings),await GM_setValue(u.Z.Users,t?.users),(0,r.de)("Настройки загружены. Выполняю перезагрузку страницы...",5e3),await(0,f._v)(500),window.location.reload()}catch(e){d.Z.error("Ошибка загрузки файла настроек",e),(0,r.de)("Ошибка загрузки файла настроек",5e3)}else(0,r.de)("Ошибка загрузки файла настроек",5e3)}async function re(){await GM_setValue(u.Z.Cache,{}),(0,r.de)("Кеш успешно очищен",5e3),await(0,f._v)(1e3),window.location.reload()}const ae=async()=>[new l("LZTUpInfoSection",{direction:o.Column,hidden:!1}).addSectionItem("Сохранить настройки в файл","","far fa-file-download","LZTUpSaveSettingsItem",te).addSectionItem("Загрузить настройки из файла","","far fa-upload","LZTUpUploadSettingsItem",ne).addSectionItem("Очистить кеш","","far fa-database","LZTUpClearCacheItem",re).createElement()];var se=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),oe=n.n(se),ie=n("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),ce=n.n(ie),le=n("./node_modules/style-loader/dist/runtime/insertBySelector.js"),de=n.n(le),ue=n("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),pe=n.n(ue),me=n("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),ge=n.n(me),he=n("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),fe=n.n(he),be=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/menu.scss"),ye={};ye.styleTagTransform=fe(),ye.setAttributes=pe(),ye.insert=de().bind(null,"html"),ye.domAPI=ce(),ye.insertStyleElement=ge(),oe()(be.Z,ye),be.Z&&be.Z.locals&&be.Z.locals;const Te=async()=>(await GM_getValue(u.Z.Appear,{}),[new w("Раздел настроек внешнего вида").createElement()]),Le=async()=>[new w("Раздел обновления расширения").createElement()];class ve{constructor(e,t,n,r){this.name=e,this.className=t,this.sectionClassName=n,this.active=r}createElement(){const e=document.createElement("li");e.id="LZTUpTab",e.className=this.className;const t=document.createElement("span");return t.innerText=this.name,e.appendChild(t),e.addEventListener("click",(()=>this.setActive())),e}setActive(){document.querySelectorAll("#LZTUpTab").forEach((e=>e.classList.remove("active"))),document.querySelector(`.${this.className}`).classList.add("active"),document.querySelectorAll(".LZTUpModalContent > .LZTUpSection").forEach((e=>e.style.display="none")),document.getElementById(this.sectionClassName).style.display=""}}var we=n("./src/xenforo/tooltips.js"),Ze=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/buttons.scss"),Ue={};Ue.styleTagTransform=fe(),Ue.setAttributes=pe(),Ue.insert=de().bind(null,"html"),Ue.domAPI=ce(),Ue.insertStyleElement=ge(),oe()(Ze.Z,Ue),Ze.Z&&Ze.Z.locals&&Ze.Z.locals;const Se=document.createElement("li"),xe=document.createElement("a");xe.id="LZTUpButton",xe.innerText=L.Z.extName,Se.appendChild(xe),Se.onclick=async function(){const e=[new ve("Главная","LZTUpMainTab","LZTUpMainSection",!0),new ve("Настройки","LZTUpSettingsTab","LZTUpSettingsSection",!1)],t=await async function(e){const t=[new l("LZTUpMainSection").addSectionItem("Локальный Уник","Максимальная кастомизация","far fa-palette","LZTUpUniqItem",((e,t)=>q("LZTUpUniqContainer",t))).addSectionItem("Розыгрыши","Комфорт для розыгрышей","far fa-gift","LZTUpContestsItem",((e,t)=>q("LZTUpContestsContainer",t))).addSectionItem("Пользователи","Штучки для пользователей","far fa-user","LZTUpUsersItem",((e,t)=>q("LZTUpUsersContainer",t))).addSectionItem("Внешний вид","Темы, логотипы и другое","far fa-drafting-compass","LZTUpAppearItem",((e,t)=>q("LZTUpAppearContainer",t))).addSectionContainer("LZTUpUniqContainer",await X()).addSectionContainer("LZTUpContestsContainer",await b()).addSectionContainer("LZTUpUsersContainer",await T()).addSectionContainer("LZTUpAppearContainer",await Te()),new l("LZTUpSettingsSection").addSectionItem("Настройки","Настройки расширения","far fa-cog","LZTUpSettingsItem",((e,t)=>q("LZTUpSettingsContainer",t))).addSectionItem("Обновления","Установка и проверка обновлений расширения","far fa-cloud-download","LZTUpUpdateItem",((e,t)=>q("LZTUpUpdateContainer",t))).addSectionItem("Информация",`Версия: ${GM_info?.script?.version}`,"far fa-info-circle","LZTUpInformationItem",((e,t)=>q("LZTUpInformationContainer",t))).addSectionContainer("LZTUpSettingsContainer",await ae()).addSectionContainer("LZTUpUpdateContainer",await Le()).addSectionContainer("LZTUpInformationContainer",await K())],n=document.createElement("div");n.classList.add("LZTUpModalContent");const r=document.createElement("ul");r.classList.add("LZTUpTabs"),n.appendChild(r);for(const e of t){const t=e.createElement();n.appendChild(t);for(const t of e.sectionContainers)n.append(t),t.querySelectorAll(".Tooltip").forEach((e=>XenForo.Tooltip($(e))))}d.Z.debug("Generated menu tabs: ",e);for(const t of e)n.querySelector(".LZTUpTabs").appendChild(t.createElement());return n}(e),n=((0,r.Y3)(L.Z.extName,'<div id="LZTUpModalBase"></div>'),document.querySelector("#LZTUpModalBase"));n.appendChild(t);for(const t of e)t.active&&t.setActive();const a=n.parentElement;a.style.whiteSpace="unset",a.parentElement.id="LZTUpModalOverlay",a.parentElement.style="margin-bottom: 15px;",P(L.Z.extName),(0,we.W)(),G();const s=new v.M,o=await s.read(),i=(0,y.n5)("me"),c=(0,y.Ms)("me"),u=new U(i,c,o);await u.updateAll()};const Ce=Se},"./src/ui/components/icon.js":(e,t,n)=>{n.d(t,{Z:()=>r});const r=class{constructor(e,t="LZTUpIcon"){this.className=e,this.id=t}createElement(){const e=document.createElement("i");return e.id=this.id,e.className=this.className,e}}},"./src/utils/checkers.js":(e,t,n)=>{n.d(t,{HI:()=>s,IM:()=>o,Ji:()=>c,cD:()=>i,kK:()=>a});var r=n("./src/configs/extData.js");function a(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function s(){return null!==document.querySelector("div.contestThreadBlock")}function o(){return window.location.pathname.includes("/forums/contests/")}function i(){return null!==document.querySelector("ol#ProfilePostList")}function c(){return null!==document.querySelector(r.Z.selectors.memberCard)}},"./src/utils/contests.js":(e,t,n)=>{n.d(t,{Q6:()=>i,gu:()=>p,Q9:()=>c,Rf:()=>d,sO:()=>g,s$:()=>l,g4:()=>u});var r=n("./src/callbacks/contestsParticipate.js"),a=n("./src/utils/checkers.js"),s=n("./src/ui/components/button.js"),o=n("./src/utils/logger.js");function i(e=!0){if((0,a.HI)()){const t=document.querySelector("div.contestThreadBlock"),n=document.querySelector("li.firstPost > div.messageInfo > div.messageContent > article > blockquote.messageText");e?(t.parentElement.append(n),t.style.borderTop="none",t.style.borderBottom="1px solid rgb(45, 45, 45)"):(t.parentElement.prepend(n),t.style.borderTop="1px solid rgb(45, 45, 45)",t.style.borderBottom="none")}}function c(e=!0){if((0,a.HI)())return function(e){const t=document.querySelector(".message.firstPost > .messageInfo > .messageContent > article > blockquote.messageText");if(null!==t)return t.style.display=e?"none":""}(e)}function l(e=!0){(0,a.HI)()&&function(e=!0){const t=document.querySelector("div.tagBlock");null!==t&&(t.style.display=e?"none":"")}(e)}function d(e=!0){if((0,a.HI)())return function(e){const t=document.querySelector("div.PollContainer");if(null!==t)return t.style.display=e?"none":""}(e)}function u(){if((0,a.HI)()){const e=document.querySelector(".LztContest--Participate");if(!e)return;const t=new s.Z("","button LZTUpRefreshButton","far fa-sync").createElement((e=>{e.preventDefault(),m()}));e.insertAdjacentElement("afterend",t)}}function p(){if((0,a.HI)()){const e=document.querySelector(".captchaBlock > div");return e?.childElementCount>0?o.Z.debug("Captcha exists"):m()}}function m(){const e=document.querySelector(".captchaBlock > div");if(!e)return o.Z.error("CAPTCHA BLOCK MISSING");turnstile.render(`#${e.id}`,{sitekey:"0x4AAAAAAADMHhlDN2zO9nrC",theme:"dark",size:"compact",callback:function(e){console.log(`Challenge Success ${e}`),$(".Captcha--XenForo_ControllerPublic_Thread").prepend('<input type="hidden" name="cf-turnstile-response" value="'+e+'">');let t=$(".LztContest--Participate");t.length&&(t.attr("href",t.attr("href")+"?cf-turnstile-response="+e),t.removeAttr("disabled").removeClass("disabled"))}})}function g(e){document.querySelector("div.contestThreadBlock")&&(e?document.addEventListener("keydown",r.m):document.removeEventListener("keydown",r.m))}},"./src/utils/logger.js":(e,t,n)=>{n.d(t,{Z:()=>r});const r={log:(...e)=>console.log("%c[LZT Upgrade]","background: #0daf77; color: #fff; padding: 5px;",...e),error:(...e)=>console.error("%c[LZT Upgrade]","background: #0daf77; color: #fff; padding: 5px;",...e),warn:(...e)=>console.warn("%c[LZT Upgrade]","background: #0daf77; color: #fff; padding: 5px;",...e),info:(...e)=>console.info("%c[LZT Upgrade]","background: #0daf77; color: #fff; padding: 5px;",...e),debug:(...e)=>{}}},"./src/utils/purify.js":(e,t,n)=>{n.d(t,{G6:()=>s,bw:()=>o,zB:()=>i});var r=n("./src/utils/logger.js");const a=["color","text-shadow","border-radius","background","background-color","background-image","-webkit-background-clip","-webkit-text-fill-color"];function s(e){return DOMPurify.sanitize(e,{USE_PROFILES:{svg:!0,html:!0},FORBID_TAGS:["style"]})}function o(e){return DOMPurify.sanitize(e,{USE_PROFILES:{svg:!0},FORBID_TAGS:["style"]})}function i(e,t=a){let n=e.split(";");const s=[];r.Z.debug(n);for(const e of n){const n=e.split(":"),a=n[0].replace(/\s/,"");r.Z.debug(e,n,a),t.includes(a)&&(r.Z.debug("DETECTED AVAILABLED STYLES"),s.push(e))}const o=s.length?s.join(";"):"";return r.Z.debug(`CLEARED FINAL STRING: ${o}`),o}},"./src/utils/registers.js":(e,t,n)=>{function r(e,t=""){return XenForo.alert(t,e,null,(e=>{document.querySelector("div.modal.fade").remove()}))}function a(e,t=5e3){return XenForo.alert(e,"",t)}function s(e){return document.querySelector("#AccountMenu > ul:nth-child(1) > li:nth-child(10)").insertAdjacentElement("afterend",e),!0}function o(e){const t=new MutationObserver(((t,n)=>{for(const n of t)"childList"===n.type&&e(n)}));return t.observe(document.body,{childList:!0,subtree:!0}),t}n.d(t,{O0:()=>o,Y3:()=>r,de:()=>a,e7:()=>s})},"./src/utils/users.js":(e,t,n)=>{n.d(t,{SL:()=>f,Rj:()=>h,Dm:()=>g,xc:()=>m,n5:()=>u,Ms:()=>p,UD:()=>b,M1:()=>y});var r=n("./src/utils/checkers.js"),a=n("./src/utils/purify.js"),s=n("./src/ui/components/icon.js");const o=class{constructor(e,t,n){this.content=XenForo.htmlspecialchars(e),this.tooltipMessage=t||"",this.messageOnCopy=n||"Успешно скопировано в буфер обмена"}createElement(){const e=document.createElement("span");e.classList.add("copyButton","Tooltip"),e.title=this.tooltipMessage,e.onclick=async e=>{await navigator.clipboard.writeText(this.content),e.target.classList.add("animated"),animateCSS(e.target,["heartBeat","mainc"]),XenForo.alert(this.messageOnCopy,"",5e3)},e.tabIndex=0;const t=new s.Z("far fa-clone","").createElement();return e.appendChild(t),e}},i=class{constructor(e,t,n,r){this.elementId=e,this.label=t,this.content=(0,a.G6)(n),this.copyButton=r}createElement(){const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");if(e.classList.add("clear_fix","profile_info_row"),e.id=this.elementId,t.classList.add("label","fl_l"),n.classList.add("labeled"),t.innerText=this.label+":",(0,r.kK)(this.content)?n.appendChild(this.content):n.innerHTML=this.content,this.copyButton instanceof o){const e=this.copyButton.createElement();n.appendChild(e)}return e.appendChild(t),e.appendChild(n),e}};var c=n("./src/configs/extData.js");const l="LZTUpUserIDRow",d="LZTUpUserIDMemberCard";function u(e){switch(e){case"profile":if((0,r.cD)()){const e=document.querySelector("#profile_short > .userContentLinks > a:nth-child(1)");return e&&""!==e.href?e.href.endsWith("?tab=mythreads")?u("me"):new URL(e.href).searchParams.get("user_id"):null}case"membercard":if((0,r.Ji)()){const e=document.querySelectorAll(c.Z.selectors.memberCard),t=e[e.length-1].querySelector(".memberCardInner > .bottom > .userContentLinks > a:nth-child(1)");return t&&""!==t.href?new URL(t.href).searchParams.get("user_id"):null}case"self":case"me":return XenForo?.visitor?.user_id;default:return null}}function p(e){switch(e){case"self":case"me":return document.querySelector(".accountUsername span")?.innerText;default:return null}}function m(e){switch(e){case"self":case"me":return document.querySelector(".accountUsername.username span").className;default:return null}}function g(e){if(e===u("me"))return document.querySelector("img.navTab--visitorAvatar").src;const t=document.querySelectorAll("a.avatar");return Array.from(t).find((t=>t.classList?.contains(`Av${e}s`)||t.classList?.contains(`Av${e}m`)))?t.src:null}function h(){if((0,r.cD)()&&null===document.querySelector(`#${l}`)){const e=u("profile")??"Не найден",t=document.querySelector("#profile_short > .pairsJustified"),n=new o(e,"Скопировать ID пользователя","ID пользователя успешно скопирован в буфер обмена"),r=new i(l,"ID",e,n).createElement(),a=t.querySelector(".profile_info_row");return a?a.insertAdjacentElement("afterend",r):t.insertAdjacentElement("afterbegin",r)}}function f(){if((0,r.Ji)()){const e=document.querySelectorAll(c.Z.selectors.memberCard),t=u("membercard")??"Не найден",n=e[e.length-1].querySelector(`#memberCard${t}.memberCardInner > .bottom > .userContentLinks`),r=document.createElement("div");r.classList.add("title"),r.id=d,r.innerText=`ID: ${t}`;const a=new o(t,"Скопировать ID пользователя","ID пользователя успешно скопирован в буфер обмена").createElement();r.appendChild(a),n?.insertAdjacentElement("afterbegin",r)}}function b(){if((0,r.cD)()){const e=document.querySelector(`.profile_info_row#${l}`);e&&e.remove()}}function y(e=!1){if((0,r.cD)()){const t=document.querySelector(".profile_info_row > .labeled > span.DateTime");if(!t)return;const n=t.getAttribute("title");if(!n)return;if(!e){let e=-2;1===XenForo?.visitor?.language_id&&(e=-3);const r=n.split(" ").slice(0,e).join(" ");return t.innerText=r}return t.innerText=n}}},"./src/utils/utils.js":(e,t,n)=>{function r(e){return new Promise((t=>{if(document.querySelector(e))return t(document.querySelector(e));const n=new MutationObserver((()=>{document.querySelector(e)&&(t(document.querySelector(e)),n.disconnect())}));n.observe(document.body,{childList:!0,subtree:!0})}))}n.d(t,{Bw:()=>o,Eq:()=>s,Nc:()=>r,_v:()=>a,bg:()=>i});const a=e=>new Promise((t=>setTimeout(t,e)));function s(){return function(){let e=$("div.latestThreads");const t=$("div.stickyThreads");return e=t.is(":visible")?$.merge(e,t):e,e.find("div.discussionListItem--Wrapper")}().find("a.listBlock.main").toArray().map((e=>$(e).attr("href")))}function o(e){if(e)return e.className="",e.style="",e}function i(e,t){return t?.length>1&&t?.startsWith(".")?(t=t.replace(".",""),e.classList.add(t)):e.style=t}},"./src/visuals/profile.js":(e,t,n)=>{n.d(t,{m:()=>s});var r=n("./src/utils/checkers.js"),a=n("./src/visuals/universal.js");function s(e){if((0,r.cD)())return(0,a.j)(e)}},"./src/visuals/universal.js":(e,t,n)=>{n.d(t,{j:()=>o});var r=n("./src/utils/users.js"),a=n("./src/utils/checkers.js");const s="LZTUpCustomBackground";function o(e,t=!1){if(!t&&(0,a.cD)()&&(0,r.n5)("profile")!==(0,r.n5)("me"))return!1;const n=document.querySelector("body");if(!e)return n.id="",void(n.style.backgroundImage="");n.id=s,n.style.backgroundImage=`linear-gradient(rgba(54, 54, 54, 0.85), rgba(54, 54, 54, 0.85)), url(${e})`}},"./src/visuals/users.js":(e,t,n)=>{n.d(t,{Az:()=>d,$:()=>l,bR:()=>c});var r=n("./src/utils/utils.js"),a=n("./src/utils/users.js"),s=n("./src/utils/checkers.js");class o{constructor(e,t){this.elementId=e,this.label=t}createElement(){const e=document.createElement("em");e.id=this.elementId,e.classList.add("userBanner","wrapped"),e.itemprop="title";const t=document.createElement("div");t.className="before",e.appendChild(t);const n=document.createElement("strong");return n.innerText=XenForo.htmlspecialchars(this.label),e.appendChild(n),t.className="after",e.appendChild(t),e}}var i=n("./src/ui/avatarUserBadges.js");function c(e){const t=(0,a.Ms)("me"),n=document.querySelectorAll(".username span").values().filter((e=>e.innerText===t));for(const t of n)t.className="",t.style="",(0,r.bg)(t,e)}function l(e,t){if((0,s.cD)()&&(0,a.n5)("profile")===(0,a.n5)("me")){const n=document.querySelector("em.userBanner#LZTUpCustomBanner");if(n)return n.className="userBanner wrapped",n.style="",n.innerText=t,(0,r.bg)(n,e);const a=document.querySelector(".avatarScaler");if(!a)return;const s=new o("LZTUpCustomBanner",t).createElement();return(0,r.bg)(s,e),a.insertAdjacentElement("afterend",s)}}function d(e){const t=(0,a.n5)("me"),n=new i.Z(e,!1),r=[...document.querySelectorAll(`.avatar.Av${t}m`),...document.querySelectorAll(`.avatar.Av${t}s`)].filter((e=>void 0!==e)).filter((e=>e.parentElement?.classList.contains("avatarHolder")));console.log(r);for(const e of r){console.log(e);const t=e.parentElement,r=n.createElement();console.log(t),t.querySelector(".avatarUserBadges")?.remove(),console.log(r),t.prepend(r),n.updateBadges()}}},"./src/xenforo/bypass.js":(e,t,n)=>{n.d(t,{$:()=>a});var r=n("./src/utils/logger.js");function a(){Object.hasOwn(XenForo,"threadNotify")&&Object.hasOwn(XenForo.threadNotify,"shareTypingActivity")&&(r.Z.debug("bypassShareTyping thread: true"),XenForo.threadNotify.shareTypingActivity=0)}},"./src/xenforo/tooltips.js":(e,t,n)=>{function r(){let e=$("#LZTUpTooltip.Tooltip");return XenForo.Tooltip(e)}function a(e,t){return e.setAttribute("title",""),e.setAttribute("data-cachedtitle",t),e._tippy.setContent(t)}n.d(t,{W:()=>r,w:()=>a})}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,exports:{}};return s[e](n,n.exports,i),n.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",n="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(e,s,o)=>{var i;o&&((i=[]).d=-1);var c,l,d,u=new Set,p=e.exports,m=new Promise(((e,t)=>{d=t,l=e}));m[n]=p,m[t]=e=>(i&&e(i),u.forEach(e),m.catch((e=>{}))),e.exports=m,s((e=>{var s;c=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var s=[];s.d=0,e.then((e=>{o[n]=e,a(s)}),(e=>{o[r]=e,a(s)}));var o={};return o[t]=e=>e(s),o}}var i={};return i[t]=e=>{},i[n]=e,i})))(e);var o=()=>c.map((e=>{if(e[r])throw e[r];return e[n]})),l=new Promise((e=>{(s=()=>e(o)).r=0;var n=e=>e!==i&&!u.has(e)&&(u.add(e),e&&!e.d&&(s.r++,e.push(s)));c.map((e=>e[t](n)))}));return s.r?l:o()}),(e=>(e?d(m[r]=e):l(p),a(i)))),i&&i.d<0&&(i.d=0)},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0,i("./src/index.js")})();