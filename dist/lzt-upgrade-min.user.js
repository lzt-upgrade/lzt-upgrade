// ==UserScript==
// @name [Development Build] LZT Upgrade
// @description A free extension for Lolzteam with many useful features
// @description:ru Бесплатное расширение для Lolzteam с множеством полезных функций
// @version 2.0.0dev
// @author Toil
// @supportURL https://github.com/lzt-upgrade/lzt-upgrade/issues
// @match *://lolz.guru/*
// @match *://lolz.live/*
// @match *://zelenka.guru/*
// @match *://lzt.market/*
// @match *://lolz.market/*
// @connect lztupgrade.toiloff.ru
// @connect greasyfork.org
// @downloadURL https://github.com/lzt-upgrade/lzt-upgrade/raw/master/dist/lzt-upgrade.user.js
// @grant GM_xmlhttpRequest
// @grant GM_info
// @grant GM_addStyle
// @grant GM_setValue
// @grant GM_getValue
// @grant GM_deleteValue
// @grant GM_listValues
// @homepageURL https://github.com/lzt-upgrade/lzt-upgrade
// @icon https://cdn.toil.cc/lztup/brand/logo-mini.png
// @license MIT
// @namespace lztupgrade
// @require https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js
// @require https://raw.githubusercontent.com/lzt-upgrade/coloris-lzt-theme/main/dist/coloris.js
// @require https://raw.githubusercontent.com/lzt-upgrade/lzt-upgrade/2.0.0/libs/purify3.0.3.min.js
// @require https://raw.githubusercontent.com/lzt-upgrade/lzt-upgrade/2.0.0/libs/Sortable1.15.0.min.js
// @run-at document-start
// @updateURL https://github.com/lzt-upgrade/lzt-upgrade/raw/master/dist/lzt-upgrade.user.js
// ==/UserScript==

(()=>{"use strict";var e,t,n,a,r={"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/buttons.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var a=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),r=n.n(a),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(r());o.push([e.id,"#LZTUpButton{color:#0daf77;font-weight:600}",""]);const i=o},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/errorPage.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var a=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),r=n.n(a),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(r());o.push([e.id,".LZTUpErrorPage{background-color:#272727}.LZTUpErrorPage article{color:#d6d6d6}.LZTUpErrorPage article div{display:flex;flex-direction:column;justify-content:center;align-items:center}.LZTUpErrorPage center{display:flex;flex-direction:column;justify-content:center;align-items:center}.LZTUpErrorPage .LZTUpErrorPageSelfAd{border-top:1px solid #363636}.LZTUpErrorPage .LZTUpErrorPageSelfAd .selfAd{font-size:18px;color:#949494;max-width:75%;text-align:center}.LZTUpErrorPage .LZTUpErrorPageSelfAd .buttons{display:flex;flex-direction:row;justify-content:center}.LZTUpErrorPage .LZTUpErrorPageSelfAd .buttons .button{display:flex;align-items:center;background:#0daf77;border-radius:6px;color:#fff;padding:0px 15px;margin:10px;text-decoration:none;line-height:34px;font-size:18px;transition:.5s background ease}.LZTUpErrorPage .LZTUpErrorPageSelfAd .buttons .button:hover{background:rgba(13,175,119,.8) !important}.LZTUpErrorPage .LZTUpErrorPageSelfAd .buttons .button svg{width:24px;height:24px;margin-right:5px;fill:#fff}",""]);const i=o},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/menu.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var a=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),r=n.n(a),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(r());o.push([e.id,"@import url(https://cdn.jsdelivr.net/gh/lzt-upgrade/coloris-lzt-theme@latest/dist/coloris.min.css);"]),o.push([e.id,'.clr-picker{display:none}.LZTUpColorPickerWrap{display:flex;align-items:center}.LZTUpColorPickerWrap:not(:first-of-type){margin-top:10px}.LZTUpColorPickerWrap .LZTUpModalDescription{margin-right:10px !important}.LZTUpColorPickerWrap .clr-field input{width:24px;height:24px}.LZTUpColorPickerWrap .clr-field button{width:28px;height:28px}.LZTUpColorPickerWrap .clr-field input,.LZTUpColorPickerWrap .clr-field button{border-radius:4px}.LZTUpSelect option{background:#272727;padding:10px 15px;font-weight:600;border-radius:6px}.LZTUpSelect option:hover{background:#2d2d2d}.LZTUpIconButton{display:flex;flex-direction:row-reverse;align-items:center;justify-content:center}.LZTUpIconButton.fit{max-width:fit-content}.LZTUpIconButton i{margin:0 8px;margin-top:3.5px}.LZTUpRefreshButton{min-width:32px !important;margin-left:32px !important}.LZTUpSortableItem{display:flex;align-items:center;padding:16px;margin:8px 0;border-radius:8px;background:rgba(54,54,54,.75)}.LZTUpSortableItem .LZTUpSortableDraggable{color:#8c8c8c;margin-right:10px;cursor:move}.LZTUpSortableItem .LZTUpSortableContent p{margin:0 !important}.LZTUpSortableItem .LZTUpSortableUtility{display:flex;margin-left:auto}.LZTUpSortableItem .LZTUpSortableUtility div{margin-left:10px;cursor:pointer;transition:.5s color ease}.LZTUpSortableItem .LZTUpSortableUtility .LZTUpSortableEditButton{color:#6a6a6a}.LZTUpSortableItem .LZTUpSortableUtility .LZTUpSortableEditButton:hover{color:#0daf77}.LZTUpSortableItem .LZTUpSortableUtility .LZTUpSortableRemoveButton{color:#964448}.LZTUpSortableItem .LZTUpSortableUtility .LZTUpSortableRemoveButton:hover{color:#f13838}#LZTUpModalMainTitle{text-align:center;padding:16px;font-size:20px;font-weight:bold}.LZTUpModalBackButton{position:absolute;top:18px;left:25px;padding:0px 5px;margin:-4px -5px;cursor:pointer;line-height:25px;height:26px;width:26px;border:0 !important;background:rgba(0,0,0,0);color:#d6d6d6;font-size:18px}.LZTUpModalBackButton:hover{background:rgba(18,76,50,.4);border-radius:8px}.LZTUpTabs{width:100%;box-sizing:border-box;padding:0 10px;border:none !important;margin:15px auto !important;display:flex;align-items:center;justify-content:center}.LZTUpTabs #LZTUpTab{position:relative;padding:10px;margin:0 4px;float:left;font-weight:600;list-style:none;font-size:14px}.LZTUpTabs #LZTUpTab:hover{cursor:pointer}.LZTUpTabs #LZTUpTab.active{box-shadow:inset 0px -2px 0px 0px #0daf77;transform:translateY(-1px);transition:.2s}.LZTUpTabs #LZTUpTab:not(.active):hover{box-shadow:inset 0px -2px 0px 0px #363636}.LZTUpSection{display:flex;flex-wrap:wrap;margin:20px 15px}.LZTUpSection.row{flex-direction:row}.LZTUpSection.row .LZTUpSectionItem{max-width:284px}.LZTUpSection.row .LZTUpSectionTitle,.LZTUpSection.row .LZTUpSectionDesc{max-width:200px}.LZTUpSection.column{flex-direction:column}.LZTUpSection.column .LZTUpSectionTitle,.LZTUpSection.column .LZTUpSectionDesc{max-width:440px}.LZTUpSection.column .LZTUpSectionDesc{white-space:break-spaces}.LZTUpSection.column .LZTUpSectionItem{max-width:580px}.LZTUpSection .LZTUpSectionItem{flex-basis:50%;flex-grow:1;height:64px;display:flex;align-items:center;transition:all .5s ease}.LZTUpSection .LZTUpSectionItem:hover{background:rgba(54,54,54,.75);border-radius:8px;cursor:pointer}.LZTUpSection .LZTUpSectionItem .LZTUpSectionTextContainer{display:flex;flex-direction:column;justify-content:center;flex:1 1 auto;max-width:100%}.LZTUpGrid{margin:20px 0;display:grid;grid-template-columns:repeat(3, 30%);justify-content:center;gap:20px}.LZTUpGrid .LZTUpGridItem{background:#343434;display:flex;flex-direction:column;align-items:center;justify-content:space-between;border-radius:8px;cursor:pointer}.LZTUpGrid .LZTUpGridItem:hover{background:#3a3a3a}.LZTUpGrid .LZTUpGridItem.active{outline:3px solid #228e5d}.LZTUpGrid .LZTUpGridItem.theme:hover{opacity:.9}.LZTUpGrid .LZTUpGridItem.theme .LZTUpGridTextContainer{padding-top:30px}.LZTUpGrid .LZTUpGridItem .LZTUpGridTextContainer{display:flex;flex-direction:column;align-self:start;margin-left:10px;margin-bottom:10px}.LZTUpGrid .LZTUpGridItem .LZTUpGridImage{max-width:96px;max-height:48px;margin:20px 0}.LZTUpGrid .LZTUpGridItem .LZTUpGridTitle{font-weight:bold;word-wrap:break-word}.LZTUpGrid .LZTUpGridItem .LZTUpGridDesc{word-wrap:break-word}.LZTUpGrid .LZTUpGridItem .LZTUpGridDesc .LZTUpGridAuthor{color:#949494}@media screen and (max-width: 720px){.LZTUpGrid{grid-template-columns:repeat(2, 47%)}}#LZTUpIcon{width:28px;height:28px;margin:20px;font-size:28px;color:#0daf77}#LZTUpIcon.gray{color:#949494}#LZTUpIcon.right{text-align:right}#LZTUpModalContainer{margin:15px;max-width:400px}#LZTUpModalChecksContainer,#LZTUpModalReportButtonsContainer,#LZTUpModalCell,.LZTUpModalMesh,.LZTUpModalSeparator{margin:15px;max-width:95%}.LZTUpContainer{display:flex;flex-direction:column;margin:15px;max-width:95%}.LZTUpModalHeading{margin:10px 0 5px 0 !important}.LZTUpModalDescription{margin:0 !important;margin-bottom:5px !important}.LZTUpTextArea{min-height:40px}.LZTUpModalSeparator{border-bottom:1px solid #363636}#LZTUpModalChecksText{margin:0px 25px 5px}.LZTUpSectionTitle,.LZTUpSectionDesc{display:block;margin-right:20px;font-size:15px;font-weight:bold;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.LZTUpSectionDesc{font-size:13px;font-weight:normal;color:#949494}.LZTUpSectionDesc .mceSmilie{max-height:18px !important}.LZTUpModalSectionTexts{display:flex;flex-direction:column;justify-content:center;flex:1 1 auto}.LZTUpModalSectionTexts .LZTUpSubText{max-width:450px}#LZTUpModalComment{background:#363636;margin:5px 15px;padding:10px 15px;border-radius:10px}#LZTUpModalComment a{color:#00ba78}.LZTUpModalBlock{display:flex}.LZTUpModalBlockButtons{display:flex;flex-wrap:wrap;justify-content:center;margin-top:25px}.LZTUpModalBlockButtons .button{margin:5px;width:250px}.LZTUpSubMenu .previewContainer{display:flex;float:right;margin:25px 15px;padding:10px 10px 15px 10px;background-size:cover;background-position:center;background-attachment:fixed;background-repeat:no-repeat;border-radius:10px;width:92%;max-width:92%}.LZTUpSubMenu .previewContainer .avatar img{width:66px;height:66px}.LZTUpSubMenu .previewContainer .info{padding:0 0 0 20px}.LZTUpSubMenu .previewContainer .info .username{font-weight:600}.LZTUpSubMenu .previewContainer .bannerOrStatus{min-width:150px;margin:10px 0 0;color:#949494}.LZTUpSubMenu .previewContainer .bannerOrStatus em{font-style:inherit}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge .customUniqIcon{padding:2px 0;text-align:center}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge .customUniqIcon svg{width:16px !important;height:16px !important}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge::before{font-family:"Font Awesome 5 Pro";font-weight:600;display:inline-block;font-size:12.32px}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.admin{background:#964448}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.admin::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.bot::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.Designer::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.headDesigner::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.editor::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.sponsor::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.coder::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.uniq_default::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.Legend::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.Ikarus::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.moder{background:#3d6b39}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.curator{background:rgba(8,156,122,.8509803922)}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.moder::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.main_moder::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.curator::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.arbitr::before,.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.main_arbitr::before{content:""}.LZTUpSubMenu .previewContainer #LZTUpPreviewBadge.telegramBot::before{content:""}.LZTUpSubMenu .previewContainer .UsernameStyle.style18,.LZTUpSubMenu .previewContainer .UsernameStyle.style360{text-decoration:line-through;color:#aaa}.LZTUpSubMenu .previewContainer .UsernameStyle.style3{color:#f13838}.LZTUpSubMenu .previewContainer .UsernameStyle.style30{color:#ff9afc}.LZTUpSubMenu .previewContainer .UsernameStyle.style353{background:linear-gradient(98.26deg, #ff42f7 2.08%, #ff24cf 100%);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0)}.LZTUpSubMenu .previewContainer .UsernameStyle.style350{background:linear-gradient(90deg, #5c45ff, #feb5f2 100%);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0)}.LZTUpSubMenu .previewContainer .UsernameStyle.style12{color:#01f73c}.LZTUpSubMenu .previewContainer .UsernameStyle.style1,.LZTUpSubMenu .previewContainer .UsernameStyle.style41,.LZTUpSubMenu .previewContainer .UsernameStyle.style142,.LZTUpSubMenu .previewContainer .UsernameStyle.style144{color:#aaa}.LZTUpSubMenu .previewContainer .UsernameStyle.style32,.LZTUpSubMenu .previewContainer .UsernameStyle.style93,.LZTUpSubMenu .previewContainer .UsernameStyle.style21,.LZTUpSubMenu .previewContainer .UsernameStyle.style2{color:#949494}.LZTUpSubMenu .previewContainer .UsernameStyle.style60{color:#ffa8af}.LZTUpSubMenu .previewContainer .UsernameStyle.style9{color:#0075ad}.LZTUpSubMenu .previewContainer .UsernameStyle.style65{color:#a5e3ff}.LZTUpSubMenu .previewContainer .UsernameStyle.style351{color:#ff0076}.LZTUpSubMenu .previewContainer .UsernameStyle.style29{color:#0acc9e}.LZTUpSubMenu .previewContainer .UsernameStyle.style26{background:linear-gradient(90deg, #0095dd 0%, #f1094b 100%, #0095dd);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0)}.LZTUpSubMenu .previewContainer .UsernameStyle.style4{color:#0e9100}.LZTUpSubMenu .previewContainer .UsernameStyle.style22{color:#eee}.LZTUpSubMenu .previewContainer .UsernameStyle.style11{color:#56b5e0}.LZTUpSubMenu .previewContainer .UsernameStyle.style7{color:#ff9304}.LZTUpSubMenu .previewContainer .UsernameStyle.style349,.LZTUpSubMenu .previewContainer .UsernameStyle.style365{color:#0087ff}.LZTUpSubMenu .previewContainer .UsernameStyle.style354{color:aqua}.LZTUpSubMenu .previewContainer .UsernameStyle.style218{color:#f13838}.LZTUpSubMenu .previewContainer .UsernameStyle.style359{color:#e5d9a3}.LZTUpSubMenu .previewContainer .UsernameStyle.style8{color:gold}.LZTUpSubMenu .previewContainer .UsernameStyle.style265{background:linear-gradient(35deg, #006eff, #00ff81 52%, #fff 50%, #93cbff);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);text-shadow:0 0 7px rgba(0,255,207,.5019607843)}.LZTUpSubMenu .previewContainer .UsernameStyle.style23{color:#b35ede}.LZTUpSubMenu .previewContainer .UsernameStyle.banned,.LZTUpSubMenu .previewContainer .UsernameStyle.is_banned{text-decoration:line-through;background:inherit;-webkit-text-fill-color:inherit;text-shadow:inherit !important;color:#aaa !important}.LZTUpSubMenu .previewContainer .avatarBox{position:relative}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .badgeDefaultBackground{background:#363636}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .avatarUserBadge{position:absolute;bottom:-12px;left:20px;border:2px solid #272727;font-size:0;width:22px;height:22px;margin:0;line-height:22px;border-radius:50%;text-align:center;text-shadow:none !important;box-shadow:none !important;border-radius:50% !important;-webkit-background-clip:unset !important;-webkit-text-fill-color:unset !important;overflow:hidden}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .avatarUserBadge:only-child{left:35px}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .avatarUserBadge.avatarUserBadge--1{left:20px}.LZTUpSubMenu .previewContainer .avatarBox .avatarUserBadges .avatarUserBadge.avatarUserBadge--2{left:40px}.LZTUpSubMenu .previewContainer .avatarBox,.LZTUpSubMenu .previewContainer .info{display:table-cell;vertical-align:top}',""]);const i=o},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/universal.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var a=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),r=n.n(a),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(r());o.push([e.id,"#LZTUpCustomBackground{background-size:cover;background-position:center;background-attachment:fixed;background-repeat:no-repeat}.LZTUpThreadBar{background:#272727;padding:15px 20px;margin-top:15px;border-radius:10px;height:auto}.LZTUpThreadBar .LZTUpThreadBarTitle{font-weight:bold;font-size:18px;padding:0;margin:0 0 2px;line-height:33px;overflow:hidden}.LZTUpThreadBar .LZTUpThreadBarContent{font-size:14px}.LZTUpThreadBar .LZTUpThreadBarContent .LZTUpSummarizeThesises{margin-left:16px}.LZTUpThreadBar .LZTUpThreadBarContent .LZTUpSummarizeThesises li{list-style:decimal;margin:2px 0;line-height:20px}.LZTUpReportButtons{display:flex}.LZTUpReportButtons .LZTUpReportButton{padding:3px 10px;margin-right:5px;font-weight:bold;background:#343434;border-radius:4px;cursor:pointer;transition:1s background ease}.LZTUpReportButtons .LZTUpReportButton:hover{background:#218e5d}",""]);const i=o},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/xenforo.scss":(e,t,n)=>{n.d(t,{Z:()=>i});var a=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),r=n.n(a),s=n("./node_modules/css-loader/dist/runtime/api.js"),o=n.n(s)()(r());o.push([e.id,".copyButton{cursor:pointer;font-size:16px;font-weight:400;padding:1px 4px;margin:-5px 0 0 6px;display:inline-block;color:#505050}.copyButton:hover{color:#949494}",""]);const i=o},"./node_modules/css-loader/dist/runtime/api.js":e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(a)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);a&&o[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":e=>{e.exports=function(e){return e[1]}},"./src/styles/errorPage.scss":(e,t,n)=>{var a=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n.n(a),s=n("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),o=n.n(s),i=n("./node_modules/style-loader/dist/runtime/insertBySelector.js"),c=n.n(i),l=n("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),d=n.n(l),u=n("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),p=n.n(u),m=n("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),g=n.n(m),h=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/errorPage.scss"),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=c().bind(null,"html"),f.domAPI=o(),f.insertStyleElement=p(),r()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals},"./src/styles/universal.scss":(e,t,n)=>{var a=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n.n(a),s=n("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),o=n.n(s),i=n("./node_modules/style-loader/dist/runtime/insertBySelector.js"),c=n.n(i),l=n("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),d=n.n(l),u=n("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),p=n.n(u),m=n("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),g=n.n(m),h=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/universal.scss"),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=c().bind(null,"html"),f.domAPI=o(),f.insertStyleElement=p(),r()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals},"./src/styles/xenforo.scss":(e,t,n)=>{var a=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=n.n(a),s=n("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),o=n.n(s),i=n("./node_modules/style-loader/dist/runtime/insertBySelector.js"),c=n.n(i),l=n("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),d=n.n(l),u=n("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),p=n.n(u),m=n("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),g=n.n(m),h=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/xenforo.scss"),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=c().bind(null,"html"),f.domAPI=o(),f.insertStyleElement=p(),r()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var s={},o=[],i=0;i<e.length;i++){var c=e[i],l=a.base?c[0]+a.base:c[0],d=s[l]||0,u="".concat(l," ").concat(d);s[l]=d+1;var p=n(u),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var g=r(m,a);a.byIndex=i,t.splice(i,0,{identifier:u,updater:g,references:1})}o.push(u)}return o}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=a(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var i=n(s[o]);t[i].references--}for(var c=a(e,r),l=0;l<s.length;l++){var d=n(s[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=c}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},"./src/api/lztupgrade/logoAPI.js":(e,t,n)=>{n.d(t,{Z:()=>s});var a=n("./src/configs/endpoints.json"),r=n("./src/api/requestJSON.js");const s={getLogos:async function(e=null){const t=e??"";return await(0,r.Z)(`${a.eb}?target=${t}`,`Не удалось получить список логотипов (${a.eb})`)},getLogoByUID:async function(e){return await(0,r.Z)(`${a.NI}?uid=${e}`,`Не удалось получить логотип по айди (${a.NI})`)}}},"./src/api/lztupgrade/themeAPI.js":(e,t,n)=>{n.d(t,{Z:()=>i});var a=n("./src/configs/endpoints.json"),r=n("./src/api/requestJSON.js"),s=n("./src/utils/utils.js");function o(e){const t=(0,s.u3)();return GM_addStyle(`\n    @import url(${a.I1}/${e}.css?id=${t});\n  `)}const i={getThemes:async function(){return await(0,r.Z)(a.RC,`Не удалось получить список тем (${a.RC})`)},loadTheme:o,smartLoadTheme:async function(e){return(0,s.VR)().then((()=>(console.log("wait for elm"),o(e))))}}},"./src/api/requestJSON.js":(e,t,n)=>{n.d(t,{Z:()=>r});var a=n("./src/utils/logger.js");const r=async function(e,t,n={}){try{const t=await fetch(e,n).catch((t=>{throw console.error(t),`Failed to fetch from ${e}`}));return await t.json().catch((e=>{throw console.log(e),"Failed to parse response JSON"}))}catch(e){return a.Z.log(t),!1}}},"./src/cache/logo.js":(e,t,n)=>{n.d(t,{U:()=>d});var a=n("./src/configs/SiteType.js"),r=n("./src/configs/StorageName.js"),s=n("./src/configs/config.js"),o=n("./src/api/lztupgrade/logoAPI.js"),i=n("./src/utils/logger.js"),c=n("./src/utils/utils.js"),l=n("./src/visuals/universal.js");async function d(e,t){const n=(0,c.u3)(),d=e===a.Z.Forum?"forumLogo":"marketLogo";let u=await(GM_getValue(r.Z.Cache,{})?.[d]),p=u?.css??"",m=u?.cacheTime??0;if(u?.uid!==t||!p||m<n){i.Z.debug(`Requesting logo with id ${t}...`);const e=await o.Z.getLogoByUID(t).catch((e=>console.error(e)));if(console.log(e),e?.css){const t={uid:e.uid,css:e.css,cacheTime:(0,c.u3)()+s.Z.cacheTime};p=t.css;let n=await GM_getValue(r.Z.Cache,{});n[d]=t,await GM_setValue(r.Z.Cache,n)}}(0,l.E)(p,e)}},"./src/callbacks/contestsParticipate.js":(e,t,n)=>{n.d(t,{p:()=>s,m:()=>o});var a=n("./src/utils/utils.js"),r=n("./src/utils/logger.js");function s(e){e&&function(e,t=1e3){(0,a.Nc)(".LztContest--Participate").then((n=>{r.Z.debug("onParticipateHandler: Participate button finded"),n.addEventListener("click",(async()=>{r.Z.debug("onParticipateHandler: click contest button"),n.classList.contains("disabled")?r.Z.debug("onParticipateHandler: clicked on disabled contest button"):(r.Z.debug("onParticipateHandler: waiting for alreadyParticipate button"),await(0,a.Nc)("span.alreadyParticipate")?(r.Z.debug("onParticipateHandler: alreadyParticipate button finded"),await(0,a._v)(t),e()):r.Z.debug("onParticipateHandler: no alreadyParticipate button"))}))})).catch((()=>{r.Z.debug("onParticipateHandler: no contest button")}))}((()=>{window.close()}))}function o(e){console.log("participateOnBtn",e),"Tab"===e.key&&(e.preventDefault(),document.querySelector(".alreadyParticipate.hidden")&&document.querySelector(".LztContest--Participate:not(.disabled)")?.click())}},"./src/callbacks/extensionStart.js":(e,t,n)=>{n.d(t,{P:()=>s});var a=n("./src/api/lztupgrade/themeAPI.js"),r=n("./src/utils/logger.js");async function s(e){r.Z.debug(`onExtensionStart: Start loading theme with id ${e}`);const t=await a.Z.getThemes();if(t?.length){r.Z.debug("onExtensionStart: Themes arrray getted: ",t);const n=t.find((t=>t.uid===e&&1===t.active));return n?.file}return r.Z.debug("onExtensionStart: Not finded active theme"),!1}},"./src/configs/ErrorLink.js":(e,t,n)=>{n.d(t,{Z:()=>a});class a{static TelegramChannel=new a("https://t.me/lzt_upgrade").src;static Github=new a("https://github.com/lzt-upgrade/lzt-upgrade").src;constructor(e){this.src=e}}},"./src/configs/ForumNode.js":(e,t,n)=>{n.d(t,{Z:()=>r});var a=n("./src/configs/base.js");class r extends a.n{static Contests=new r(".node766")}},"./src/configs/NavbarBalloon.js":(e,t,n)=>{n.d(t,{Z:()=>r});var a=n("./src/configs/base.js");class r extends a.n{static AlertCounter=new r("#AlertsMenu_Counter");static MessageCounter=new r("#ConversationsMenu_Counter")}},"./src/configs/NewStorageName.js":(e,t,n)=>{n.d(t,{Z:()=>s});var a=n("./src/configs/base.js"),r=n("./src/configs/config.js");class s extends a.e{static UserGroup=new s("LZTUserGroup",r.Z.defaultUserGroup);static Cache=new s("cache",{});static Appear=new s("appearData",{});static Adblock=new s("adblockData",{});static ReportButtons=new s("reportButtons",[]);static Contests=new s("contestsData",{});static Profile=new s("profileData",{});static ProfileBadges=new s("profileBadges",[]);static Users=new s("usersData",{});static Settings=new s("settingsData",{});constructor(e,t){super(e),this.value=t}static generateConfigStruct(){const e=[this.Appear,this.Adblock,this.ReportButtons,this.Contests,this.Profile,this.ProfileBadges,this.Users,this.Settings],t=[];for(const n of e)t.push({original:n,name:n.name.split("Data")[0],default:n.value});return t}}},"./src/configs/SiteType.js":(e,t,n)=>{n.d(t,{Z:()=>r});var a=n("./src/configs/base.js");class r extends a.e{static Forum=new r("Forum").name;static Market=new r("Market").name}},"./src/configs/StorageName.js":(e,t,n)=>{n.d(t,{Z:()=>r});var a=n("./src/configs/base.js");class r extends a.e{static UserGroup=new r("LZTUserGroup").name;static Cache=new r("cache").name;static Appear=new r("appearData").name;static Contests=new r("contestsData").name;static Profile=new r("profileData").name;static ProfileBadges=new r("profileBadges").name;static Users=new r("usersData").name;static Settings=new r("settingsData").name}},"./src/configs/base.js":(e,t,n)=>{n.d(t,{e:()=>r,n:()=>a});class a{constructor(e){this.selector=e}getName(){return this.selector.replace(".","").replace("#","")}}class r{constructor(e){this.name=e}}},"./src/configs/config.js":(e,t,n)=>{n.d(t,{Z:()=>a});const a={extName:"LZT Upgrade UNRELEASED",cacheTime:259200,defaultUserGroup:"style2"}},"./src/events/categories.js":(e,t,n)=>{n.d(t,{Z:()=>r});var a=n("./src/utils/utils.js");const r=function(e,t){const n=document.querySelectorAll(`li.node${e}.forum.level-n`);if(n.length)for(const e of n)e.addEventListener("click",(async()=>{await(0,a._v)(750),await(0,a.Nc)("div.pageNavLinkGroup")&&t()}))}},"./src/index.js":(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n("./src/api/lztupgrade/themeAPI.js"),r=n("./src/configs/config.js"),s=n("./src/configs/StorageName.js"),o=n("./src/callbacks/contestsParticipate.js"),i=n("./src/callbacks/extensionStart.js"),c=n("./src/ui/components/buttons/menuButton.js"),l=n("./src/ui/components/buttons/errorPageButton.js"),d=n("./src/events/categories.js"),u=n("./src/utils/logger.js"),p=n("./src/utils/registers.js"),m=n("./src/utils/contests.js"),g=n("./src/utils/users.js"),h=n("./src/xenforo/bypass.js"),f=n("./src/visuals/users.js"),y=n("./src/visuals/universal.js"),b=n("./src/visuals/profile.js"),T=n("./src/utils/checkers.js"),Z=n("./src/configs/SiteType.js"),L=n("./src/cache/logo.js"),w=n("./src/visuals/navbar.js"),v=n("./src/configs/ForumNode.js"),U=(n("./src/styles/errorPage.scss"),n("./src/styles/universal.scss"),n("./src/styles/xenforo.scss"),n("./src/configs/NavbarBalloon.js")),S=n("./src/configs/ErrorLink.js"),x=n("./src/utils/gmWrapper.js"),C=n("./src/configs/NewStorageName.js"),E=n("./src/utils/threads.js"),k=n("./src/utils/utils.js"),I=n("./src/visuals/threads.js"),B=n("./src/visuals/notify.js");async function j(){console.time("init-theme"),console.timeLog("init-theme","getting appearData...");const e=await GM_getValue(s.Z.Appear,{});console.timeLog("init-theme","loading name from cache...");let t=await GM_getValue(s.Z.Cache,{}).themeName;if(console.timeLog("init-theme","Check themeName valid..."),console.log(t,e.selectedTheme),0===e.selectedTheme)return console.timeLog("init-theme","Skip theme"),void console.timeEnd("init-theme");if(!t&&e.selectedTheme>0){u.Z.debug(`Requesting theme with id ${e.selectedTheme}...`),t=await(0,i.P)(e.selectedTheme).catch((e=>console.error(e)));let n=await GM_getValue(s.Z.Cache,{});n.themeName=t,await GM_setValue(s.Z.Cache,n)}console.timeLog("init-theme","Loading theme..."),await a.Z.smartLoadTheme(t),console.timeEnd("init-theme")}async function M(){let e,t=(0,k.u3)();console.time("lztup-start"),console.timeLog("lztup-start","Waiting body...");let n=!1;GM_info?.script?.version&&u.Z.log(`${r.Z.extName} version: ${GM_info?.script?.version}`);const a=await GM_getValue(s.Z.Appear,{});async function i(){if(n)return;if(n=!0,console.timeLog("lztup-start","Body loaded successfully"),/^(Site\sMaintenance|429\sToo\sMany\sRequests|504\sGateway\sTime-out|Error\s502)$/.test(document.head.querySelector("title").innerText)){if(!a.newErrorPage)return void console.log(a.newErrorPage);document.body.classList.add("LZTUpErrorPage");let e=document.querySelector("article > div");u.Z.debug(e),e||(e=document.querySelector("center"),u.Z.debug("updated container",e));const t=document.createElement("img");if(t.src="https://i.imgur.com/iVmKDr7.gif",t.alt="Duck rain",e.appendChild(t),a.disableSelfAdOnNewErrorPage)return;const n=document.createElement("div");n.classList.add("LZTUpErrorPageSelfAd");const r=document.createElement("p");r.innerText="Пока форум недоступен, рекомендуем ознакомиться с нашими соц. сетями",r.classList.add("selfAd");const s=document.createElement("div");s.classList.add("buttons");const o=new l.Z('\n          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">\n            <path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"/>\n          </svg>\n          Telegram\n        ',S.Z.TelegramChannel).createElement(),i=new l.Z('\n          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">\n            <path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/>\n          </svg>\n          Github\n        ',S.Z.Github).createElement();return s.appendChild(o),s.appendChild(i),n.appendChild(r),n.appendChild(s),void e.appendChild(n)}console.timeLog("lztup-start","GET DEBUG INFO");const e=(0,g.Ms)("me"),t=(0,g.n5)("me"),r=(0,g.xc)("me"),i=$("img.navTab--visitorAvatar").attr("src");u.Z.debug("┏━━━━━━━━ DEBUG INFO ━━━━━━━━━━┓"),u.Z.debug(`Script version: ${GM_info?.script?.version}`),u.Z.debug(`Account username: ${e}`),u.Z.debug(`Account userid: ${t}`),u.Z.debug(`Account userGroup: ${r}`),u.Z.debug(`Account userAvatar: ${i}`),u.Z.debug("┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┚"),console.timeLog("lztup-start","Register menu button"),(0,p.e7)(c.Z),console.timeLog("lztup-start","Add user group to cache"),await GM_setValue(s.Z.UserGroup,r);const k=await x.Z.getValue(C.Z.Adblock);k.hideAlertAds&&(0,B.i)(),k.hideThreadListAds&&(0,I.cX)();const j=await x.Z.getValue(C.Z.ReportButtons);console.timeLog("lztup-start","forumLogo"),a.forumLogo>0&&await(0,L.U)(Z.Z.Forum,a.forumLogo),console.timeLog("lztup-start","marketLogo"),a.marketLogo>0&&await(0,L.U)(Z.Z.Market,a.marketLogo),console.timeLog("lztup-start","Check Profile badge style"),j.length&&(0,I.Lp)(j),console.timeLog("lztup-start","hideAlertCounter"),a.hideAlertCounter&&(0,w.R)(U.Z.AlertCounter.getName(),!0),console.timeLog("lztup-start","hideMessageCounter"),a.hideMessageCounter&&(0,w.R)(U.Z.MessageCounter.getName(),!0),console.timeLog("lztup-start","hideUnreadArticlesStatus"),a.hideUnreadArticlesStatus&&(0,w.p)(!0),a.summarizeThreads&&await(0,E.iY)(!0),console.timeLog("lztup-start","Loading Profile DB...");const M=await GM_getValue(s.Z.Profile,{}),_=await GM_getValue(s.Z.ProfileBadges,[]);console.timeLog("lztup-start","Check Profile User style"),M.usernameStyle&&(0,f.bR)(M.usernameStyle),console.timeLog("lztup-start","Check Profile badge style"),_.length&&(0,f.Az)(_),console.timeLog("lztup-start","Reg big observer"),(0,p.O0)((async e=>{if(u.Z.debug(e),e.target.classList.contains("messageList")||e.target.classList.contains("messageSimpleList")||e.target.classList.contains("messageResponse")||e.target.classList.contains("CommentPostList")||e.target.classList.contains("discussionList")||e.target.classList.contains("chat2-messages")||e.target.classList.contains("fe-ac-user")||e.target.classList.contains("latestThreads")||e.target.classList.contains("liveAlerts")||e.target.parentElement?.classList.contains("conversationMessages")||e.nextSibling?.classList?.contains("modal")||e.previousSibling?.classList?.contains("Alert")||e.previousSibling?.nextSibling?.classList?.contains("Alert")||"AjaxProgress"===e.removedNodes?.[0]?.id||"AlertsDestinationWrapper"===e.target.id||"StackAlerts"===e.target.id){const e=await x.Z.getValue(C.Z.Profile),t=await x.Z.getValue(C.Z.ProfileBadges),n=await x.Z.getValue(C.Z.ReportButtons);e.usernameStyle&&(0,f.bR)(e.usernameStyle),t&&(0,f.Az)(t),n&&(0,I.Lp)(n)}})),console.timeLog("lztup-start","Check Profile banner"),M.bannerStyle&&M.bannerText&&(0,f.$)(M.bannerStyle,M.bannerText),console.timeLog("lztup-start","Check Profile bg"),M.backgroundImage&&(M.backgroundImageEverywhere?(0,y.j)(M.backgroundImage):(0,b.m)(M.backgroundImage)),console.timeLog("lztup-start","Profile bg loaded"),console.timeLog("lztup-start","Loading Contests DB...");const A=await GM_getValue(s.Z.Contests,{});console.timeLog("lztup-start","Add reg 10 btn"),A.openTenContestsBtn&&(0,m.uu)(),console.timeLog("lztup-start","Add onclick contests category"),(0,d.Z)(v.Z.Contests.selector,(async()=>{(await GM_getValue(s.Z.Contests,{})).openTenContestsBtn&&(0,m.uu)()})),console.timeLog("lztup-start","hideTagsInThread"),A.hideTagsInThread&&(0,m.s$)(!0),console.timeLog("lztup-start","autoCloseOnParticipate"),A.autoCloseOnParticipate&&(0,o.p)(!0),console.timeLog("lztup-start","infoTopInThread"),A.infoTopInThread&&(0,m.Q6)(!0),console.timeLog("lztup-start","removeContent"),A.removeContent&&(0,m.Q9)(!0),console.timeLog("lztup-start","removePoll"),A.removePoll&&(0,m.Rf)(!0),console.timeLog("lztup-start","updateCaptchaButton"),A.updateCaptchaButton&&(0,m.g4)(),console.timeLog("lztup-start","autoFixCaptcha"),A.autoFixCaptcha&&(0,m.gu)(),console.timeLog("lztup-start","participateByKey"),A.participateByKey&&(0,m.sO)(!0),console.timeLog("lztup-start","Loading Users DB...");const P=await GM_getValue(s.Z.Users,{});console.timeLog("lztup-start","showUserIdInMemberCard"),P.showUserIdInMemberCard&&((0,g.SL)(),(0,p.O0)((e=>{e.nextSibling&&e.nextSibling?.classList?.contains("modal")&&(0,g.SL)()}))),console.timeLog("lztup-start","disableShareTyping"),P.disableShareTyping&&(0,h.$)(),(0,T.cD)()&&(console.timeLog("lztup-start","showUserIdInProfile"),P.showUserIdInProfile&&(0,g.Rj)(),console.timeLog("lztup-start","showFullRegInProfile"),P.showFullRegInProfile&&(0,g.M1)(!0)),console.timeEnd("lztup-start")}document.addEventListener("DOMContentLoaded",i),document.addEventListener("load",i),"complete"===document.readyState&&await i(),e=setInterval((async()=>{XenForo&&XenForo._pageLoadTime?(await i(),clearInterval(e)):t+20<(0,k.u3)()&&clearInterval(e)}),1e3)}try{await Promise.allSettled([j(),M()])}catch(_){console.error(_)}t()}catch(A){t(A)}}),1)},"./src/ui/avatarUserBadges.js":(e,t,n)=>{n.d(t,{Z:()=>l});var a=n("./src/utils/purify.js"),r=n("./src/xenforo/tooltips.js");function s(e,t,n){return e.setAttribute(t,n)}function o(e,t,n,a=!1){if(!["stroke","fill"].includes(t))return;if(!a)return s(e,t,n);s(e,t,n);const r=e.querySelectorAll("*");for(const e of r)s(e,t,n)}var i=n("./src/utils/logger.js"),c=n("./src/utils/utils.js");const l=class{constructor(e,t=!1){this.previewId="LZTUpPreviewBadge",this.customBadgeId="LZTUpUserBadge",this.badgeQuery=t?`#${this.previewId}`:`#${this.customBadgeId}`,this.badges=e,this.isPreview=t}createElement(){const e=document.createElement("div");e.classList.add("avatarUserBadges");for(let t=0;t<this.badges.length;t++){const n=document.createElement("span");n.classList.add("avatarUserBadge","Tooltip"),n.tabIndex=0,n.title=XenForo.htmlspecialchars(this.badges[t].text),this.isPreview?n.id=this.previewId:n.id=this.customBadgeId,this.badges.length>1&&n.classList.add(`avatarUserBadge--${t+1}`),n.dataset.position=t+1,this.badges.length>1&&(n.dataset.multiple=!0),e.appendChild(n)}return e}findBadgeElement(e,t){return document.querySelector(e+`[data-position="${t}"]`)}findAllBadgeElement(e,t){return document.querySelectorAll(e+`[data-position="${t}"]`)}applyBadge(e,t){return t?.length>1&&t?.startsWith(".")?(t=t.replace(".",""),e.classList.add("userBanner",t)):t.startsWith("<svg")&&t.endsWith("svg>")?(e.innerHTML=(0,a.bw)(t),e.classList.add("badgeDefaultBackground")):e.classList.add("uniq_default","badgeDefaultBackground")}updateIcon(e,t){if(e)return(0,c.Bw)(e),e.classList.add("avatarUserBadge","Tooltip"),"true"===e.dataset.multiple&&e.classList.add(`avatarUserBadge--${t.position}`),this.applyBadge(e,t.svg)}updateText(e,t){if(e)return e._tippy?(0,r.w)(e,XenForo.htmlspecialchars(t.text)):XenForo.Tooltip($(e))}updateColor(e,t){if(!e)return;const n=e.querySelector("svg");n&&(o(n,"stroke",t.strokeColor,!0),o(n,"fill",t.fillColor,!0))}updateStyle(e,t){if(e&&t.style&&!t.style?.startsWith("."))return e.style=t.style}updateBadge(e){const t=this.findAllBadgeElement(this.badgeQuery,e.position);if(t.length)for(const n of t)this.updateIcon(n,e),this.updateText(n,e),this.updateColor(n,e),this.updateStyle(n,e)}updateBadges(){i.Z.debug("updateBadges");for(const e of this.badges)"object"==typeof e?(i.Z.debug(e),this.updateBadge(e)):i.Z.error("Invalid badge in array")}}},"./src/ui/components/button.js":(e,t,n)=>{n.d(t,{Z:()=>r});var a=n("./src/ui/components/icon.js");const r=class{constructor(e,t="button",n=undefined){this.buttonText=e,this.className=t,this.iconClassName=n}createElement(e=(()=>{})){const t=document.createElement("button");if(t.className=this.className,t.innerText=this.buttonText,this.iconClassName){const e=new a.Z(this.iconClassName).createElement();e.id="",t.appendChild(e)}return t.onclick=e,t}}},"./src/ui/components/buttons/errorPageButton.js":(e,t,n)=>{n.d(t,{Z:()=>a});const a=class{constructor(e,t="#",n="button"){this.buttonContent=e,this.buttonHref=t,this.className=n}createElement(){const e=document.createElement("a");return e.href=this.buttonHref,e.className=this.className,e.innerHTML=this.buttonContent,e}}},"./src/ui/components/buttons/menuButton.js":(e,t,n)=>{n.d(t,{Z:()=>Ye});var a=n("./src/utils/registers.js"),r=n("./src/ui/components/icon.js"),s=n("./src/utils/purify.js");class o{static Row=new o("row");static Column=new o("column");constructor(e){this.name=e}}class i{constructor(e){this.text=e,this.className="LZTUpSectionTitle"}createElement(){const e=document.createElement("span");return e.classList.add(this.className),e.innerHTML=(0,s.G6)(this.text),e}}class c extends i{constructor(e){super(e),this.className="LZTUpSectionDesc"}createElement(){const e=document.createElement("span");return e.classList.add(this.className),e.innerHTML=(0,s.G6)(this.text),e}}class l{constructor(e,t={}){this.id=e,this.sectionItems=t.sectionItems||[],this.sectionContainers=t.sectionContainers||[],this.direction=t.direction||o.Row,this.hidden=t.hidden??!0}createElement(){const e=document.createElement("div");e.id=this.id,e.classList.add("LZTUpSection",this.direction===o.Row?"row":"column");for(const t of this.sectionItems)e.appendChild(t);return console.log(this),this.hidden&&(console.log(this.id,this.hidden),e.style.display="none"),e}addSectionItem(e,t,n,a,s={}){const l=s.onClick||function(){},d=s.rightArrow||!1,u=document.createElement("div");u.id=a,u.classList.add("LZTUpSectionItem");const p=new r.Z(n).createElement(),m=document.createElement("div");m.classList.add("LZTUpSectionTextContainer");const g=new i(e).createElement(),h=new c(t).createElement();if(m.append(g,h),u.append(p,m),this.direction===o.Column&&d){const e=new r.Z("far fa-angle-right gray right").createElement();u.append(e)}return u.onclick=async t=>await l(t,e),this.sectionItems.push(u),this}addSectionContainer(e,t){const n=document.createElement("div");n.id=e,n.classList.add("LZTUpSubMenu"),n.style.display="none";for(const e of t)n.appendChild(e);return this.sectionContainers.push(n),this}}var d=n("./src/utils/logger.js"),u=n("./src/configs/StorageName.js"),p=n("./src/callbacks/contestsParticipate.js");const m=class{constructor(e,t){this.elementId=e,this.content=(0,s.G6)(t)}createElement(e,t=(()=>{}),n=(()=>{}),a=(()=>{})){const r=document.createElement("div"),s=document.createElement("input"),o=document.createElement("label");return s.type="checkbox",s.id=this.elementId,s.checked=Boolean(e),o.htmlFor=this.elementId,o.innerHTML=this.content,r.id="LZTUpModalChecksContainer",r.appendChild(s),r.appendChild(o),s.addEventListener("click",(async e=>{await a(e),e.target.checked?await t(e):await n(e)})),r}};var g=n("./src/utils/contests.js"),h=n("./src/utils/utils.js");const f=class{constructor(e){this.text=e}createElement(){const e=document.createElement("p");return e.classList.add("LZTUpModalDescription","muted"),e.innerText=this.text,e}},y=class{constructor(e,t="",n=""){this.elements=e,this.heading=t,this.description=n}createElement(e=""){const t=document.createElement("div");if(t.classList.add("LZTUpContainer"),t.style=e,this.heading){const e=new class{constructor(e){this.text=e}createElement(){const e=document.createElement("h2");return e.classList.add("LZTUpModalHeading"),e.innerText=this.text,e}}(this.heading).createElement();t.appendChild(e)}if(this.description){const e=new f(this.description).createElement();t.appendChild(e)}for(const e of this.elements)t.appendChild(e);return t}},b=async()=>{const e=await GM_getValue(u.Z.Contests,{});return[new y([new m("hide_tags_in_contests","Скрыть теги в теме розыгрыша").createElement(e.hideTagsInThread,(()=>{}),(()=>{}),(async t=>{e.hideTagsInThread=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,g.s$)(t.target.checked)})),new m("remove_content_in_contests","Скрыть содержимое темы розыгрыша").createElement(e.removeContent,(()=>{}),(()=>{}),(async t=>{e.removeContent=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,g.Q9)(t.target.checked)})),new m("remove_poll_in_contests","Скрыть голосование в теме розыгрыша").createElement(e.removePoll,(()=>{}),(()=>{}),(async t=>{e.removePoll=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,g.Rf)(t.target.checked)}))],"Скрытие элементов","Скройте лишние элементы в теме").createElement("display: block;"),new y([new m("open_ten_contests",'Кнопка "Открыть 10"').createElement(e.openTenContestsBtn,(()=>{(0,g.uu)()}),(()=>{(0,g.cy)()}),(async t=>{e.openTenContestsBtn=t.target.checked,await GM_setValue(u.Z.Contests,e)})),new m("auto_close_on_participate",'Автозакрытие страницы при нажатие на кнопку "Участвовать"\n          <span class="fa fa-exclamation-triangle Tooltip" title="При отключение этой функции страница будет перезагружена"></span>\n          ').createElement(e.autoCloseOnParticipate,(async()=>{(0,a.de)('Включено Автозакрытие страницы при нажатие на кнопку "Участвовать"',5e3),(0,p.p)(!0)}),(async()=>{(0,a.de)('Выключено Автозакрытие страницы при нажатие на кнопку "Участвовать"',5e3),await(0,h._v)(500),window.location.reload()}),(async t=>{e.autoCloseOnParticipate=t.target.checked,await GM_setValue(u.Z.Contests,e)})),new m("info_top_in_contests","Отображение информации о розыгрыше вверху темы").createElement(e.infoTopInThread,(()=>{}),(()=>{}),(async t=>{e.infoTopInThread=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,g.Q6)(t.target.checked)})),new m("update_captcha_button_in_contests",'Кнопка "Обновление капчи"').createElement(e.updateCaptchaButton,(async()=>{(0,g.g4)()}),(async()=>{document.querySelector(".LZTUpRefreshButton")?.remove()}),(async t=>{e.updateCaptchaButton=t.target.checked,await GM_setValue(u.Z.Contests,e)})),new m("auto_fix_captcha_in_contests",'Автофикс капчи\n          <span class="far fa-info-circle Tooltip" title="Автоматически обновляет капчу, если она не появилась"></span>\n          <span class="fa fa-exclamation-triangle Tooltip" title="При отключение этой функции страница будет перезагружена"></span>\n          ').createElement(e.autoFixCaptcha,(async()=>{(0,a.de)("Включен Автофикс капчи",5e3),(0,g.gu)()}),(async()=>{(0,a.de)("Выключен Автофикс капчи",5e3),await(0,h._v)(500),window.location.reload()}),(async t=>{e.autoFixCaptcha=t.target.checked,await GM_setValue(u.Z.Contests,e)})),new m("participate_by_key","Участие по кнопке Tab").createElement(e.participateByKey,(()=>{}),(()=>{}),(async t=>{(0,a.de)("Участие по кнопке "+(t.target.checked?"включено":"выключено"),5e3),e.participateByKey=t.target.checked,await GM_setValue(u.Z.Contests,e),(0,g.sO)(t.target.checked)}))],"Полезные фишечки","Просто полезные фишечки для быстрого участия в розыгрышах").createElement("display: block;")]};var T=n("./src/utils/users.js");const Z=async()=>{const e=await GM_getValue(u.Z.Users,{});return[new y([new m("show_userid_in_profile","Показывать ID в профиле пользователя").createElement(e.showUserIdInProfile,(()=>{(0,T.Rj)()}),(()=>{(0,T.UD)()}),(async t=>{e.showUserIdInProfile=t.target.checked,await GM_setValue(u.Z.Users,e)})),new m("show_userid_in_member_card",'Показывать ID в карточке пользователя\n          <span class="fa fa-exclamation-triangle Tooltip" title="При включение/отключение этой функции страница будет перезагружена"></span>\n          ').createElement(e.showUserIdInMemberCard,(()=>{}),(()=>{}),(async t=>{e.showUserIdInMemberCard=t.target.checked,await GM_setValue(u.Z.Users,e),(0,a.de)("Показывать ID в карточке пользователя "+(t.target.checked?"включено":"выключено"),5e3),await(0,h._v)(500),window.location.reload()})),new m("show_fullreg_in_profile","Показывать полную дату регистрации в профиле пользователя").createElement(e.showFullRegInProfile,(()=>{}),(()=>{}),(async t=>{e.showFullRegInProfile=t.target.checked,await GM_setValue(u.Z.Users,e),(0,T.M1)(t.target.checked)}))],"Доп. информация о пользователе","Включите отображение дополнительной информации о пользователе").createElement("display:block;"),new y([new m("disable_share_typing",'Неписалка в темах\n          <span class="fa fa-exclamation-triangle Tooltip" title="При включение/отключение этой функции страница будет перезагружена"></span>\n          ').createElement(e.disableShareTyping,(()=>{}),(()=>{}),(async t=>{e.disableShareTyping=t.target.checked,await GM_setValue(u.Z.Users,e),(0,a.de)("Неписалка в темах "+(t.target.checked?"включена":"выключена"),5e3),await(0,h._v)(500),window.location.reload()}))],"Другое","Другие функции связанные с пользователями").createElement("display:block;")]};var L=n("./src/configs/NewStorageName.js");const w=class{constructor(e){this.content=(0,s.G6)(e)}createElement(){const e=document.createElement("div");return e.id="LZTUpModalComment",e.innerHTML=this.content,e}};var v=n("./src/ui/avatarUserBadges.js"),U=n("./src/utils/gmWrapper.js");const S=class{constructor(e,t,n,a,r=null){this.userid=e,this.username=t,this.profileData=n,this.badgesData=a,this.profileElId=r||"LZTUpPreviewContainer",this.badges=new v.Z(a,!0)}createElement(){const e=document.createElement("div");e.id=this.profileElId,e.classList.add("previewContainer");const t=this.badges.createElement(),n=document.createElement("div");n.classList.add("avatarBox"),n.appendChild(t),n.innerHTML+=`\n      <a href="members/${encodeURIComponent(this.userid)}/" class="avatar Av${XenForo.htmlspecialchars(this.userid)}m" data-avatarhtml="true">\n        <span class="img m" style="background-image: url(${(0,T.Dm)(this.userid)})"></span>\n      </a>\n    `;const a=document.createElement("div");return a.classList.add("info"),a.innerHTML=`\n      <span id="LZTUpUsernameStyle" class="UsernameStyle bold">${XenForo.htmlspecialchars(this.username)}</span>\n      <div class="bannerOrStatus">\n        <em id="LZTUpUserBannerStyle" class="UserBannerStyle userBanner"></em>\n      </div>\n    `,e.appendChild(n),e.appendChild(a),e}clearStyle(e){const t=document.querySelector(e);if(t)return t.className="",t.style="",t}async updateUsernameStyle(e){const t=this.clearStyle(`#${this.profileElId} #LZTUpUsernameStyle`);t&&(e||(e=`.${await U.Z.getValue(L.Z.UserGroup)}`),t.classList.add("UsernameStyle","bold"),(0,h.bg)(t,e))}updateBannerStyle(e){const t=this.clearStyle(`#${this.profileElId} #LZTUpUserBannerStyle`);t&&(t.classList.add("UserBannerStyle","userBanner"),(0,h.bg)(t,e))}updateBannerText(e){const t=document.querySelector(`#${this.profileElId} #LZTUpUserBannerStyle`);t&&(t.innerText=XenForo.htmlspecialchars(e))}updateBanner(e){const t=this.clearStyle(`#${this.profileElId} #LZTUpUserBannerStyle`);if(t){if(!e.bannerStyle||!e.bannerText)return t.style.display="none";t.style.display="",this.updateBannerStyle(e.bannerStyle),this.updateBannerText(e.bannerText)}else d.Z.error("Failed to get element by userBanner in PreviewProfile!")}updateBackground(e){const t=document.querySelector(`#${this.profileElId}`);t?(e?.length&&(e=`linear-gradient(rgba(54, 54, 54, 0.85), rgba(54, 54, 54, 0.85)), url(${e})`),t.style.backgroundImage=e):d.Z.error("Failed to get previewContainer in PreviewProfile!")}updateBadges(){return this.badges.updateBadges()}async updateAll(){await this.updateUsernameStyle(this.profileData.usernameStyle),this.updateBanner(this.profileData),this.updateBackground(this.profileData.backgroundImage),this.badges.badges=this.badgesData,this.updateBadges()}},x=class{constructor(e="",t="",n=0,a=0){this.text=e,this.placeholder=t,this.minLength=n,this.maxLength=a}createElement(e){const t=document.createElement("textarea");return t.classList.add("LZTUpTextArea","textCtrl"),t.innerText=this.text,t.placeholder=this.placeholder,t.minLength=this.minLength,this.maxLength>0&&(t.maxLength=this.maxLength),t.onkeyup=e,t.onchange=e,t}},C=class{constructor(e="",t="",n=0,a=0){this.text=e,this.placeholder=t,this.minLength=n,this.maxLength=a}createElement(e){const t=document.createElement("input");return t.classList.add("textCtrl"),t.value=this.text,t.placeholder=this.placeholder,t.minLength=this.minLength,this.maxLength>0&&(t.maxLength=this.maxLength),t.onkeyup=e,t.onchange=e,t}};var E=n("./src/ui/components/button.js");const k=class{constructor(e,t,n=""){this.id=e,this.value=t,this.description=n}createElement(e){const t=document.createElement("div");t.classList.add("LZTUpColorPickerWrap");const n=document.createElement("input");if(n.id=this.id,n.classList.add("LZTUpColorPicker"),n.value=this.value,n.type="text",n.dataset.coloris="",n.oninput=e,""!==this.description){const e=new f(this.description).createElement();t.appendChild(e)}return t.appendChild(n),t}},I=class{constructor(e=""){this.customStyle=e}createElement(){const e=document.createElement("div");return e.classList.add("LZTUpModalSeparator"),""!==this.customStyle&&(e.style.borderBottom=this.customStyle),e}},B=class{constructor(e){this.elements=e}createElement(e=(()=>{})){const t=document.createElement("div");t.classList.add("LZTUpSortableContainer");for(const e of this.elements)t.appendChild(e);return Sortable.create(t,{handle:".LZTUpSortableDraggable",animation:150,onMove:e}),t}},j=class{constructor(e,t=null){this.content=e,this.dataId=t}createElement(e=(()=>{}),t=(()=>{})){const n=document.createElement("div");n.classList.add("LZTUpSortableItem"),this.dataId&&(n.dataset.id=this.dataId);const a=document.createElement("div");a.classList.add("LZTUpSortableDraggable");const s=new r.Z("far fa-grip-vertical","").createElement();a.appendChild(s);const o=document.createElement("div");o.classList.add("LZTUpSortableContent");const i=document.createElement("p");i.innerText=this.content,o.append(i);const c=document.createElement("div");c.classList.add("LZTUpSortableUtility");const l=document.createElement("div");l.classList.add("LZTUpSortableEditButton");const d=new r.Z("far fa-edit","").createElement();l.appendChild(d),l.onclick=async t=>{console.log("Edit button clicked"),await e(t,n)};const u=document.createElement("div");u.classList.add("LZTUpSortableRemoveButton");const p=new r.Z("far fa-trash","").createElement();return u.appendChild(p),u.onclick=async e=>{confirm("Вы точно хотите удалить иконку?")&&(n.remove(),await t(e,n))},c.appendChild(l),c.appendChild(u),n.appendChild(a),n.appendChild(o),n.appendChild(c),n}};var M=n("./src/configs/base.js");class _ extends M.n{static TempSubMenu=new _("#LZTUpTempSubMenu")}var A=n("./src/configs/config.js");function P(e){const t=document.querySelector(".xenOverlay > .errorOverlay#LZTUpModalOverlay").querySelector("h2.heading");t.id="LZTUpModalMainTitle",t.innerText=e}function G(e="",t=A.Z.extName,n=null,a=(()=>{})){const r="button.LZTUpModalBackButton";return null!==document.querySelector(r)&&document.querySelector(r).remove(),function(s){const o=document.querySelector(".xenOverlay > .errorOverlay#LZTUpModalOverlay"),i=new E.Z("","LZTUpModalBackButton","fas fa-long-arrow-left").createElement();i.onclick=()=>{document.querySelectorAll("div.LZTUpSubMenu").forEach((e=>e.style.display="none")),(()=>{if(document.querySelector(r).remove(),P(t),"tempmenu"===e)document.querySelector(_.TempSubMenu.selector).style.display="none",n.style.display="",G(),a();else{document.querySelector(".LZTUpModalContent > .LZTUpSection").style.display="";const e=document.querySelector(".LZTUpTabs");e.style.display="";const t=e.querySelectorAll("#LZTUpTab");t.forEach((e=>e.classList.remove("active"))),t[0].classList.add("active"),a()}})()},o.insertAdjacentElement("afterbegin",i)}()}function q(e,t){return document.querySelector(".LZTUpTabs").style.display="none",document.querySelectorAll(".LZTUpSubMenu").forEach((e=>e.style.display="none")),document.querySelectorAll(".LZTUpModalContent > .LZTUpSection").forEach((e=>e.style.display="none")),document.getElementById(e).style.display="",P(t),G()}function N(e,t,n,a){document.querySelectorAll(".LZTUpSubMenu").forEach((e=>e.style.display="none")),document.querySelector(_.TempSubMenu.selector).style.display="",P(e),G("tempmenu",t,n,a)}function z(e){const t=document.querySelector(_.TempSubMenu.selector);t&&t.remove();const n=document.createElement("div");n.id=_.TempSubMenu.getName(),n.classList.add("LZTUpSubMenu");for(const t of e)n.appendChild(t);return n.style.display="none",n}const D={theme:"lzt",themeMode:"dark",formatToggle:!0,closeButton:!0,clearButton:!0,alpha:!0,swatches:[]};function V(e=".xenOverlay"){const t=document.querySelectorAll(".LZTUpColorPicker");for(const n of t){if(!document.querySelector(".clr-picker"))try{Coloris.init(e)}catch(e){console.error(e)}try{Coloris(Object.assign(D,{el:`#${n.id}`,parent:e}))}catch(e){console.error(e)}}}var F=n("./src/visuals/users.js"),R=n("./src/visuals/universal.js"),O=n("./src/visuals/profile.js");async function H(e,t,n){const r=Number(t.dataset.id),o=document.querySelector(".LZTUpModalContent"),i=document.querySelector("#LZTUpUniqContainer"),c=await U.Z.getValue(L.Z.Profile),l=await U.Z.getValue(L.Z.ProfileBadges);let d=l.filter((e=>e.position===r))[0];const u=X(c,l,"LZTUpTempPreviewContainer");async function p(e){const t=await U.Z.getValue(L.Z.ProfileBadges),n=t.find((e=>e.position===r)),a=t.indexOf(n);return t[a]=e,t}const m=z([u.createElement(),new y([new x(d.svg,"<svg>...</svg>",0,3e3).createElement((async e=>{let t=(0,s.bw)(e.target.value.trim());if(t.length>3e3)return(0,a.de)("Максимальная длина иконки 3000 символов. Уменьшите введенный текст для сохранения.");d.svg=t,u.badges.badges=await p(d),u.updateBadges()}))],"Иконка на аватарке","Максимум 3000 символов.").createElement(),new y([new x(d.style,"background: #fff",0,1500).createElement((async e=>{let t=(0,s.zB)(e.target.value.trim());if(t.length>1500)return(0,a.de)("Максимальная длина стиля иконки 1500 символов. Уменьшите введенный текст для сохранения.");t.length>1&&t.startsWith(".")&&(e.target.value=t.replace(/\s/g,""),t=e.target.value),d.style=t,u.badges.badges=await p(d),u.updateBadges()}))],"Стиль иконки","Максимум 1500 символов.").createElement(),new y([new C(d.text,"Идут два сталкера",0,24).createElement((async e=>{let t=e.target.value;if(t.length>24)return(0,a.de)("Максимальная длина текста в лычке 24 символа. Уменьшите введенный текст для сохранения.");d.text=t,u.badges.badges=await p(d),u.updateBadges()}))],"Текст при наведение на иконку","Максимум 24 символа.").createElement(),new y([new k("LZTUpColorPickerFill",d.fillColor,"Цвет иконки (fill):").createElement((async e=>{let t=e.target.value;d.fillColor=t,u.badges.badges=await p(d),u.updateBadges()})),new k("LZTUpColorPickerStroke",d.strokeColor,"Цвет иконки (stroke):").createElement((async e=>{let t=e.target.value;d.strokeColor=t,u.badges.badges=await p(d),u.updateBadges()}))],"Изменение цвета иконки").createElement(),new y([new E.Z("Сохранить","button primary LZTUpIconButton fit","far fa-save").createElement((async()=>{const e=await p(d);await U.Z.setValue(L.Z.ProfileBadges,e),(0,F.Az)(e),u.badges.badges=e,u.updateBadges(),(0,a.de)("Иконка успешно сохранена.")}))]).createElement()]);o.appendChild(m),V(),N("Управление иконкой","Локальный Уник",i,(async()=>{const e=i.querySelectorAll(".LZTUpSortableContainer > .LZTUpSortableItem"),t=await U.Z.getValue(L.Z.ProfileBadges);for(let n=0;n<t.length;n++)e[n].querySelector(".LZTUpSortableContent").innerHTML=(0,s.G6)(t[n].text);n.badges.badges=t,n.updateBadges()})),await u.updateAll(c)}function X(e,t,n=null){const a=(0,T.n5)("me"),r=(0,T.Ms)("me");return new S(a,r,e,t,n)}const W=async()=>{async function e(e,t,n="LZTUpPreviewContainer"){const a=document.querySelector(`#${n} > .avatarBox > .avatarUserBadges`);if(a){for(const e of a.children)e.remove();const n=new v.Z(t,!0).createElement();a.innerHTML=n.innerHTML,c.data=e,c.badgesData=t,await c.updateAll()}}async function t(e,t){const n=document.querySelector("#LZTUpUniqContainer");let a=await U.Z.getValue(L.Z.ProfileBadges),r=[];const s=document.querySelector(`#LZTUpPreviewBadge[data-position="${t.dataset.id}"]`);s&&s.remove();const o=document.querySelector("#LZTUpPreviewBadge");o&&(o.dataset.position=1,o.dataset.multiple="false",o?.classList.contains("avatarUserBadge--1")&&o.classList.remove("avatarUserBadge--1"),o?.classList.contains("avatarUserBadge--2")&&o.classList.remove("avatarUserBadge--2"));for(const e of a){if(String(e.position)===t.dataset.id)continue;const a=n.querySelector(".LZTUpSortableContainer > .LZTUpSortableItem");a&&(a.dataset.id=1),e.position=1,r.push(e)}await U.Z.setValue(L.Z.ProfileBadges,r),c.badgesData=r,await c.updateAll(),(0,F.Az)(r)}const n=await U.Z.getValue(L.Z.Profile);console.log("TEST 123",n);const r=await U.Z.getValue(L.Z.ProfileBadges),o=await U.Z.getValue(L.Z.UserGroup),i=window.location.hostname,c=X(n,r);return[new w(`На этой вкладке вы можете выбрать стиль вашего ника и лычки. Этот стиль виден только вам.\n      Чтобы уник был виден всем, рекомендуем <a href="https://${i}/account/upgrades?upgrade_id=14" target="_blank">купить</a> настоящий уник.`).createElement(),c.createElement(),new y([new x(n.usernameStyle,"color: #0daf77",0,1500).createElement((e=>{let t=e.target.value.trim();if(t.length>1500)return(0,a.de)("Максимальная длина стиля ника 1500 символов. Уменьшите введенный текст для сохранения.");t.length>1&&t.startsWith(".")?(e.target.value=t.replace(/\s/g,""),t=e.target.value):t=(0,s.zB)(t),c.updateUsernameStyle(t),n.usernameStyle=t,console.log("TEST use",n)}))],"Стиль ника","Максимум 1500 символов. При отсутствии кода используется цвет вашей группы с форума.").createElement(),new y([new x(n.bannerStyle,"background: #fff",0,1500).createElement((e=>{let t=e.target.value.trim();if(t.length>1500)return(0,a.de)("Максимальная длина стиля лычки 1500 символов. Уменьшите введенный текст для сохранения.");t.length>1&&t.startsWith(".")?(e.target.value=t.replace(/\s/g,""),t=e.target.value):t=(0,s.zB)(t),n.bannerStyle=t,c.updateBanner(n)}))],"Стиль лычки","Максимум 1500 символов. При отсутствии текста или стиля лычка отключается.").createElement(),new y([new C(n.bannerText,"Внимание анекдот",0,24).createElement((e=>{let t=e.target.value;if(t.length>24)return(0,a.de)("Максимальная длина текста в лычке 24 символа. Уменьшите введенный текст для сохранения.");n.bannerText=t,c.updateBanner(n)}))],"Текст в лычке","Максимум 24 символа. При отсутствии текста или стиля лычка отключается.").createElement(),(new I).createElement(),new y([new B(function(e,n){console.log("Generating badge items");const a=[];for(const r of n.sort(((e,t)=>e.position-t.position)))console.log(r.text,r.position),a.push(new j(r.text,r.position).createElement(((t,n)=>H(0,n,e)),t));return console.log(a),a}(c,r)).createElement((async t=>{const a=t.target.children,r=await U.Z.getValue(L.Z.ProfileBadges);r.reverse();for(let e=0;e<a.length;e++)d.Z.debug("moving items"),a[e].dataset.id=e+1,r[e].position=e+1;await U.Z.setValue(L.Z.ProfileBadges,r),await e(n,r),(0,F.Az)(r)})),new E.Z("Добавить иконку","button LZTUpIconButton","far fa-plus").createElement((async r=>{const s=r.target.parentElement?.querySelector(".LZTUpSortableContainer");if(!s)return(0,a.de)("Не найден контейнер для добавления!");if(2===s.children.length)return(0,a.de)("Вы не можете добавить больше 2 иконок!");const o=await U.Z.getValue(L.Z.ProfileBadges),i={position:s.children.length+1,style:"",text:"Новая иконка",svg:"",fillColor:"",StrokeColor:""};o.push(i);const l=new j(i.text,i.position).createElement(((e,t)=>H(0,t,c)),t);s.appendChild(l),await U.Z.setValue(L.Z.ProfileBadges,o),await e(n,o),(0,F.Az)(o)}))],"Управление иконками","Ниже вы можете легко настроить иконки уника и их порядок (изменения автоматически применяются).").createElement(),(new I).createElement(),new y([new C(n.backgroundImage,"Ссылка на изображение",0,2048).createElement((e=>{let t=XenForo.htmlspecialchars(e.target.value);if(t.length>2048)return(0,a.de)("Максимальная длина ссылки на фон 2048 символов. Введите другую ссылку для сохранения.");console.log("execute background"),n.backgroundImage=t,console.log("TEST bacl",n),c.updateBackground(n.backgroundImage)}))],"Фон профиля","Поддерживаются только прямые ссылки на изображения.").createElement(),new m("profile_background_everywhere","Заменить фон на всех страницах форума").createElement(n.backgroundImageEverywhere,(async()=>{(0,R.j)(n.backgroundImage)}),(async()=>{(0,R.j)(""),(0,O.m)(n.backgroundImage)}),(async e=>{const t=await U.Z.getValue(L.Z.Profile);t.backgroundImageEverywhere=n.backgroundImageEverywhere=e.target.checked,await U.Z.setValue(L.Z.Profile,t),(0,a.de)((e.target.checked?"Включен":"Выключен")+" кастомный фон на всех страницах",5e3)})),new y([new E.Z("Сохранить","button primary LZTUpIconButton fit","far fa-save").createElement((async()=>{const e=await U.Z.getValue(L.Z.Profile);await U.Z.setValue(L.Z.Profile,n),(0,a.de)("Настройки локального уника успешно сохранены."),n.usernameStyle?(0,F.bR)(n.usernameStyle):""!==e.usernameStyle&&""==n.usernameStyle&&(0,F.bR)(`.${o}`),n.bannerStyle&&n.bannerText&&(0,F.$)(n.bannerStyle,n.bannerText),n.backgroundImage&&(n.backgroundImageEverywhere?(0,R.j)(n.backgroundImage):(0,O.m)(n.backgroundImage)),c.data=n,await c.updateAll()}))]).createElement()]};class K{static Donate=new K("far fa-donate","Поддержать разработку",'Можете немного закинуть, если хотите <img src="/styles/default/xenforo/smilies/ok_lol.png" class="mceSmilie" alt=":ok_lol:" title="Lol">',"https://lzt.market/balance/transfer?user_id=667866","LZTUpInfoDonateItem");static Thread=new K("far fa-comments",'<span style="color: orange">[SOON]</span> Тема на форуме',"Новости об обновлениях и отзывы других пользователей без всякого мусора","https://zelenka.guru/threads/1","LZTUpInfoThreadItem");static TelegramChannel=new K("fab fa-telegram-plane","Telegram канал","Все новости расширения и анонсы новых функций","https://t.me/lzt_upgrade","LZTUpInfoTGChannelItem");static TelegramChat=new K("fab fa-telegram-plane","Telegram чат","Чатик для общения с другими пользователями расширения","https://t.me/lzt_upgrade_chat","LZTUpInfoTGChatItem");static Github=new K("fab fa-github","Github","Исходники расширения + все версии расширения","https://github.com/lzt-upgrade/lzt-upgrade","LZTUpInfoGithubItem");static GreasyFork=new K("far fa-code-branch","Greasy Fork","Альтернативный источник для установки расширения","https://greasyfork.org/ru/scripts/460328-lzt-upgrade","LZTUpInfoGreasyForkItem");static DevTasks=new K("far fa-tasks","Доска задач","Следите за разработкой расширения","https://app.weeek.net/ws/438227/shared/board/4prKcWJhKKxLuKNm0CiP7qJEZUH3quST","LZTUpInfoFollowDevItem");constructor(e,t,n,a,r){this.icon=e,this.title=t,this.desc=n,this.href=a,this.sectionItemId=r}static getLinks(){return[this.Donate,this.Thread,this.TelegramChannel,this.TelegramChat,this.Github,this.GreasyFork,this.DevTasks]}}const J=async()=>{const e=new l("LZTUpInfoSection",{direction:o.Column,hidden:!1});console.log(K.getLinks());for(const t of K.getLinks())e.addSectionItem(t.title,t.desc,t.icon,t.sectionItemId,{onClick:()=>window.open(t.href)});return[e.createElement()]};async function Q(){let e=L.Z.generateConfigStruct();const t={};await Promise.all(e.map((async e=>{t[e.name]=await U.Z.getValue(e.original)||e.default}))),function(e,t){const n=new Blob([e],{type:"application/json"}),a=document.createElement("a");a.href=window.URL.createObjectURL(n),a.download="LZTUpgradeConfig.json",a.click()}(JSON.stringify(t)),(0,a.de)("Файл настроек выгружен",5e3)}async function Y(){const e=await async function(){const e=document.createElement("input");e.type="file",e.accept="application/json",e.click();const t=await new Promise((t=>{e.onchange=()=>{t(e.files[0])}})),n=new FileReader;return n.readAsText(t),await new Promise((e=>{n.onload=()=>{e(n.result)},n.onerror=t=>{d.Z.error("Ошибка загрузки файла настроек",t),e(!1)}}))}();if(e)try{let t=L.Z.generateConfigStruct();const n=JSON.parse(e);await Promise.all(t.map((async e=>{await U.Z.setValue(e.original,n[e.name]||e.default)}))),(0,a.de)("Настройки загружены. Выполняю перезагрузку страницы...",5e3),await(0,h._v)(500),window.location.reload()}catch(e){d.Z.error("Ошибка загрузки файла настроек",e),(0,a.de)("Ошибка загрузки файла настроек",5e3)}else(0,a.de)("Ошибка загрузки файла настроек",5e3)}async function ee(){await U.Z.setValue(u.Z.Cache,u.Z.Cache.value),(0,a.de)("Кеш успешно очищен",5e3),await(0,h._v)(1e3),window.location.reload()}const te=async()=>[new l("LZTUpInfoSection",{direction:o.Column,hidden:!1}).addSectionItem("Сохранить настройки в файл","","far fa-file-download","LZTUpSaveSettingsItem",{onClick:Q}).addSectionItem("Загрузить настройки из файла","","far fa-upload","LZTUpUploadSettingsItem",{onClick:Y}).addSectionItem("Очистить кеш","","far fa-database","LZTUpClearCacheItem",{onClick:ee}).createElement()];var ne=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ae=n.n(ne),re=n("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),se=n.n(re),oe=n("./node_modules/style-loader/dist/runtime/insertBySelector.js"),ie=n.n(oe),ce=n("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),le=n.n(ce),de=n("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),ue=n.n(de),pe=n("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),me=n.n(pe),ge=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/menu.scss"),he={};he.styleTagTransform=me(),he.setAttributes=le(),he.insert=ie().bind(null,"html"),he.domAPI=se(),he.insertStyleElement=ue(),ae()(ge.Z,he),ge.Z&&ge.Z.locals&&ge.Z.locals;class fe{constructor(e){this.text=e,this.className="LZTUpGridTitle"}createElement(){const e=document.createElement("span");return e.classList.add(this.className),e.innerText=this.text,e}}class ye extends fe{constructor(e,t=null){super(e),this.className=t??"LZTUpGridDesc"}createElement(){const e=document.createElement("span");return e.classList.add(this.className),e.innerHTML=(0,s.G6)(this.text),e}}class be{constructor(e,t){this.text=e,this.userId=Number(t)>0?Number(t):"",this.className="LZTUpGridAuthor"}createElement(){const e=window.location.hostname,t=document.createElement("a");return t.classList.add(this.className),t.href=`https://${e}/members/${this.userId}`,t.innerHTML=(0,s.G6)(this.text),t}}class Te{constructor(e,t=null){this.imageLink=e,this.altText=t??"[IMG]",this.className="LZTUpGridImage"}createElement(){const e=document.createElement("img");return e.classList.add(this.className),e.alt=this.altText,e.src=this.imageLink,e.importance=!0,e}}class Ze{constructor(e,t={}){this.id=e,this.gridItems=t.gridItems||[]}createElement(){const e=document.createElement("div");e.id=this.id,e.classList.add("LZTUpGrid");for(const t of this.gridItems)e.appendChild(t);return e}addGridItem(e,t,n={}){const a=n.onClick||function(){},r=n.imageLink??"",s=n.altText,o=n.active??!1,i=n.authors??[],c=n.backgroundColor??"",l=n.textColor??"",d=n.additionalClass??"",u=document.createElement("div");if(u.id=t,u.classList.add("LZTUpGridItem"),o&&u.classList.add("active"),d&&u.classList.add(d),u.style.background=c,u.style.color=l,r){const e=new Te(r,s).createElement();u.append(e)}const p=document.createElement("div");p.classList.add("LZTUpGridTextContainer");const m=new fe(e).createElement(),g=i.map((e=>new be(e.name,e.userId).createElement().outerHTML)),h=new ye(g.join(", ")).createElement();return p.append(m,h),u.append(p),u.onclick=async e=>{this.setActive(u),await a(e,u)},this.gridItems.push(u),this}setActive(e){for(const e of this.gridItems)e.classList.remove("active");return e.classList.add("active"),this}}var Le=n("./src/configs/SiteType.js"),we=n("./src/visuals/navbar.js"),ve=n("./src/configs/NavbarBalloon.js"),Ue=n("./src/utils/threads.js");class Se extends M.e{static availabledForumLogos=new Se("availabledForumLogos",[]);static availabledMarketLogos=new Se("availabledMarketLogos",[]);static availabledThemes=new Se("availabledThemes",[]);static themeName=new Se("themeName","");constructor(e,t){super(e),this.value=t}static getKeys(){return[this.availabledForumLogos,this.availabledMarketLogos,this.availabledThemes]}static getKeyByName(e){return this.getKeys().find((t=>t.name===e))}}var xe=n("./src/visuals/threads.js");const Ce={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Ee;const ke=new Uint8Array(16);function Ie(){if(!Ee&&(Ee="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ee))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ee(ke)}const Be=[];for(let e=0;e<256;++e)Be.push((e+256).toString(16).slice(1));const je=function(e,t,n){if(Ce.randomUUID&&!t&&!e)return Ce.randomUUID();const a=(e=e||{}).random||(e.rng||Ie)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return Be[e[t+0]]+Be[e[t+1]]+Be[e[t+2]]+Be[e[t+3]]+"-"+Be[e[t+4]]+Be[e[t+5]]+"-"+Be[e[t+6]]+Be[e[t+7]]+"-"+Be[e[t+8]]+Be[e[t+9]]+"-"+Be[e[t+10]]+Be[e[t+11]]+Be[e[t+12]]+Be[e[t+13]]+Be[e[t+14]]+Be[e[t+15]]}(a)},Me="LZTUpAppearContainer",_e=".LZTUpModalContent";async function Ae(e){const t=`availabled${(0,h.zf)(e)}Logos`,n=Se.getKeyByName(t),a=`${e.toLowerCase()}Logo`,r=await U.Z.getValue(L.Z.Appear),s=r?.[a]??0,o=await U.Z.getCache(n),i=e===Le.Z.Forum?"https://raw.githubusercontent.com/ilyhalight/lzt-upgrade/master/public/static/img/logos/forum/default.svg":"https://raw.githubusercontent.com/ilyhalight/lzt-upgrade/master/public/static/img/logos/market/default.svg";o.unshift({uid:0,name:"По умолчанию",preview:i,target:1,css:"",author:"Lolzteam",author_userid:"",active:1,created_at:1696777530});const c=document.querySelector(_e),l=document.getElementById(Me),u=new Ze("LZTUpLogoGrid");for(const t of o){const n=(0,h.P6)(t.author,t.author_userid);u.addGridItem(t.name,`LZTUpLogo${t.uid}`,{onClick:async()=>{(0,R.E)(t.css,e),r[a]=t.uid,await U.Z.setValue(L.Z.Appear,r),d.Z.debug(`Change logo to ${t.name} (by ${t.author})`),await U.Z.setCache(a,{uid:t.uid,css:t.css,cacheTime:(0,h.u3)()+A.Z.cacheTime})},imageLink:t.preview,altText:t.name,active:t.uid===s,authors:n})}const p=z([new y([u.createElement()],"Выберите логотип",`Выберите логотип, который у вас будет отображаться как логотип ${e===Le.Z.Forum?"форума":"маркета"}.`).createElement()]);c.appendChild(p),N("Выбор логотипа","Внешний вид",l,(()=>{}))}async function Pe(){const e=await U.Z.getValue(L.Z.Appear),t=e?.selectedTheme??0,n=await U.Z.getCache(Se.availabledThemes);n.unshift({uid:0,name:"Обычная",file:"",author:"Lolzteam",author_userid:null,accent_color:"",text_color:"",active:1});const r=document.querySelector(_e),s=document.getElementById(Me),o=new Ze("LZTUpThemeGrid");for(const r of n){const n=(0,h.P6)(r.author,r.author_userid);o.addGridItem(r.name,`LZTUpTheme${r.uid}`,{onClick:async()=>{e.selectedTheme=r.uid,await U.Z.setValue(L.Z.Appear,e),d.Z.debug(`Change theme to ${r.name} (by ${r.author})`),(0,a.de)(`Тема изменена на ${r.name}`,5e3),await U.Z.setCache(Se.themeName.name,r.file),await(0,h._v)(500),window.location.reload()},active:r.uid===t,authors:n,backgroundColor:r.accent_color,textColor:r.text_color,additionalClass:"theme"})}const i=z([new y([o.createElement()],"Выберите тему","Выберите тему, которая у вас будет отображаться как тема сайта.").createElement()]);r.appendChild(i),N("Выбор темы","Внешний вид",s,(()=>{}))}async function Ge(){const e=await U.Z.getValue(L.Z.Adblock),t=document.querySelector(_e),n=document.getElementById(Me),r=z([new y([new y([new m("hide_alert_ads","Отключить рекламу в уведомлениях").createElement(e.hideAlertAds,(()=>{}),(()=>{}),(async t=>{e.hideAlertAds=t.target.checked})),new m("hide_thread_list_ads","Отключить рекламу в списке тем").createElement(e.hideThreadListAds,(()=>{}),(()=>{}),(async t=>{e.hideThreadListAds=t.target.checked}))]).createElement("display: block;"),new E.Z("Сохранить","button primary LZTUpIconButton fit","far fa-save").createElement((async()=>{await U.Z.setValue(L.Z.Adblock,e),(0,a.de)("Настройки продвинутого Adblock успешно сохранены."),window.location.reload()}))],"Выберите типы рекламы","Выберите все типы рекламы, которые хотите отключить. Для применения настроек нажмите на кнопку сохранить. При сохранение настроек страница автоматически перезагрузится.").createElement()]);t.appendChild(r),N("Выбор темы","Внешний вид",n,(()=>{}))}async function qe(){console.log("Generating buttons items");const e=[],t=await U.Z.getValue(L.Z.ReportButtons);console.log(t.sort(((e,t)=>e.position-t.position)));for(const n of t.sort(((e,t)=>e.position-t.position))){console.log(n.text,n.position);const t=new j(n.text,n.position).createElement(Ne,ze);t.dataset.uuid=n.uuid,e.push(t)}return console.log(e),e}async function Ne(e,t){const n=t.dataset.uuid,r=document.querySelector(_e),o=document.getElementById(Me);let i=(await U.Z.getValue(L.Z.ReportButtons)).find((e=>e.uuid===n))||[];const c=z([new y([new C(i.text,"Неправильный отзыв",1,12).createElement((async e=>{let t=XenForo.htmlspecialchars(e.target.value.trim());return t.length<1?(0,a.de)("Минимальная длина текста 1 символ. Увеличьте введенный текст для сохранения."):t.length>12?(0,a.de)("Максимальная длина текста 12 символов. Уменьшите введенный текст для сохранения."):void(i.text=t)}))],"Текст кнопки","Этот текст видите только вы. Минимальная длина - 1 символ, максимальная - 12 символов.").createElement(),new y([new C(i.reason,"Нарушение 3.15",1,120).createElement((async e=>{let t=XenForo.htmlspecialchars(e.target.value.trim());return t.length<1?(0,a.de)("Минимальная длина причины репорта 1 символ. Увеличьте введенный текст для сохранения."):t.length>120?(0,a.de)("Максимальная длина причины репорта 120 символов. Уменьшите введенный текст для сохранения."):void(i.reason=t)}))],"Причина репорта","Внимание! Причина репорта видна ВСЕМ. Не используйте в ней какие-либо оскорбления. Минимальная длина - 1 символ, максимальная - 120 символов.").createElement(),new y([new E.Z("Сохранить","button primary LZTUpIconButton fit","far fa-save").createElement((async()=>{const e=await async function(e){const t=await U.Z.getValue(L.Z.ReportButtons),a=t.find((e=>e.uuid===n)),r=t.indexOf(a);return t[r]=e,t}(i);await U.Z.setValue(L.Z.ReportButtons,e),(0,xe.Lp)(e),(0,a.de)("Кнопка быстрого репорта успешно сохранена.")}))]).createElement()]);r.appendChild(c),N("Управление быстрыми репортами","Внешний вид",o,(async()=>{const e=o.querySelectorAll(".LZTUpSortableContainer > .LZTUpSortableItem"),t=await U.Z.getValue(L.Z.ReportButtons);for(let n=0;n<t.length;n++)e[n].querySelector(".LZTUpSortableContent").innerHTML=(0,s.G6)(t[n].text)}))}async function ze(e,t){const n=document.getElementById("LZTUpAppearContainer");let a=await U.Z.getValue(L.Z.ReportButtons),r=[],s=1;for(let e=0;e<a.length;e++){const o=a[e];if(o.uuid===t.dataset.uuid)continue;const i=n.querySelector(".LZTUpSortableContainer > .LZTUpSortableItem");i&&(i.dataset.id=s),o.position=s,r.push(o),s++}await U.Z.setValue(L.Z.ReportButtons,r),(0,xe.Lp)(r)}const De=async()=>{const e=await GM_getValue(u.Z.Appear,{});return[new l("LZTUpInfoSection",{direction:o.Column,hidden:!1}).addSectionItem("Логотип","Выберите логотип для форума из списка","far fa-comments","LZTUpLogoManager",{onClick:async()=>await Ae(Le.Z.Forum),rightArrow:!0}).addSectionItem("Логотип маркета","Выберите логотип для маркета из списка","far fa-shopping-cart","LZTUpMarketLogoManager",{onClick:async()=>await Ae(Le.Z.Market),rightArrow:!0}).addSectionItem("Менеджер тем","Выберите тему для форума из списка","far fa-paint-brush","LZTUpThemeManager",{onClick:Pe,rightArrow:!0}).addSectionItem("Продвинутый Adblock","Избавьтесь от назойливой рекламы в пару нажатий","far fa-shield","LZTUpAdblockManager",{onClick:Ge,rightArrow:!0}).createElement(),(new I).createElement(),new y([new B(await qe()).createElement((async e=>{console.log("target",e,e.target);const t=e.target.children;console.log("items",t);const n=await U.Z.getValue(L.Z.ReportButtons),a=[];console.log(n);for(let e=0;e<t.length;e++){const r=t[e],s=n.find((e=>e.uuid===r.dataset.uuid));console.log("moving items",r,s),r.dataset.id=e+1,s.position=e+1,a.push(s)}console.log("Finish",a),await U.Z.setValue(L.Z.ReportButtons,a),(0,xe.Lp)(a)})),new E.Z("Добавить кнопку","button LZTUpIconButton","far fa-plus").createElement((async e=>{const t=e.target.parentElement?.querySelector(".LZTUpSortableContainer");if(!t)return(0,a.de)("Не найден контейнер для добавления!");if(4===t.children.length)return(0,a.de)("Вы не можете добавить больше 4 иконок!");const n=await U.Z.getValue(L.Z.ReportButtons),r={position:t.children.length+1,text:"Новая кнопка",reason:"Флуд / Оффтоп / Спам / Бесполезная тема",uuid:je()};n.push(r);const s=new j(r.text,r.position).createElement(Ne,ze);s.dataset.uuid=r.uuid,t.appendChild(s),await U.Z.setValue(L.Z.ReportButtons,n),(0,xe.Lp)(n)}))],"Управление быстрыми репортами","Ниже вы можете легко настроить порядок, причины и названия для кнопок быстрого репорта.").createElement(),(new I).createElement(),new y([new m("hide_alert_counter","Скрыть счётчик уведомлений в навбаре").createElement(e.hideAlertCounter,(()=>{}),(()=>{}),(async t=>{e.hideAlertCounter=t.target.checked,await GM_setValue(u.Z.Appear,e),(0,we.R)(ve.Z.AlertCounter.getName(),t.target.checked),(0,a.de)((t.target.checked?"Включено":"Выключено")+" скрытие счетчика уведомлений в навбаре",5e3)})),new m("hide_message_counter","Скрыть счётчик сообщений в навбаре").createElement(e.hideMessageCounter,(()=>{}),(()=>{}),(async t=>{e.hideMessageCounter=t.target.checked,await GM_setValue(u.Z.Appear,e),(0,we.R)(ve.Z.MessageCounter.getName(),t.target.checked),(0,a.de)((t.target.checked?"Включено":"Выключено")+" скрытие счетчика сообщений в навбаре",5e3)})),new m("hide_unread_articles_status","Скрыть статус непрочитанных статей").createElement(e.hideUnreadArticlesStatus,(()=>{}),(()=>{}),(async t=>{e.hideUnreadArticlesStatus=t.target.checked,await GM_setValue(u.Z.Appear,e),(0,we.p)(t.target.checked),(0,a.de)((t.target.checked?"Включено":"Выключено")+" скрытие статуса непрочитанных статей",5e3)}))],"Скрытие элементов","Скройте лишние элементы сайта").createElement("display: block;"),new y([new m("new_error_page",'Небольшое изменение страницы "тех. работ" и "ошибок"').createElement(e.newErrorPage,(()=>{}),(()=>{}),(async t=>{e.newErrorPage=t.target.checked,await GM_setValue(u.Z.Appear,e),(0,a.de)((t.target.checked?"Включено":"Выключено")+' Небольшое изменение страницы "тех. работ" и "ошибок"',5e3)})),new m("disable_self_ad_error",'Убрать саморекламу на измененной странице "тех. работ" и "ошибок"').createElement(e.disableSelfAdOnNewErrorPage,(()=>{}),(()=>{}),(async t=>{e.disableSelfAdOnNewErrorPage=t.target.checked,await GM_setValue(u.Z.Appear,e),(0,a.de)((t.target.checked?"Включена":"Выключена")+' самореклама на изменнной странице "тех. работ" и "ошибок"',5e3)}))],"Страницы тех. работ и ошибок","Измените оформление страницы тех. работ и ошибки").createElement("display: block;"),new y([new m("summarize_threads",'\n          Суммаризатор тем\n          <span class="far fa-info-circle Tooltip" title="Собирает все самое важное из темы, если содержимое темы более 300 символов"></span>\n          ').createElement(e.summarizeThreads,(()=>{}),(()=>{}),(async t=>{e.summarizeThreads=t.target.checked,await GM_setValue(u.Z.Appear,e),await(0,Ue.iY)(t.target.checked),(0,a.de)((t.target.checked?"Включен":"Выключен")+" суммаризатор тем",5e3)}))],"Другое","Другие функции связанные с внешним видом").createElement("display: block;")]},$e=async()=>[new w("Раздел обновления расширения").createElement()];class Ve{constructor(e,t,n,a){this.name=e,this.className=t,this.sectionClassName=n,this.active=a}createElement(){const e=document.createElement("li");e.id="LZTUpTab",e.className=this.className;const t=document.createElement("span");return t.innerText=this.name,e.appendChild(t),e.addEventListener("click",(()=>this.setActive())),e}setActive(){document.querySelectorAll("#LZTUpTab").forEach((e=>e.classList.remove("active"))),document.querySelector(`.${this.className}`).classList.add("active"),document.querySelectorAll(".LZTUpModalContent > .LZTUpSection").forEach((e=>e.style.display="none")),document.getElementById(this.sectionClassName).style.display=""}}var Fe=n("./src/xenforo/tooltips.js"),Re=n("./src/api/lztupgrade/logoAPI.js"),Oe=n("./src/api/lztupgrade/themeAPI.js");async function He(e){const t=`availabled${(0,h.zf)(e)}Logos`,n=Se.getKeyByName(t),a=e===Le.Z.Forum?1:2,r=await Re.Z.getLogos(a)||n.value;return await U.Z.setCache(n.name,r)}async function Xe(){const e=await Oe.Z.getThemes()||[];return await U.Z.setCache(Se.availabledThemes.name,e)}var We=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/buttons.scss"),Ke={};Ke.styleTagTransform=me(),Ke.setAttributes=le(),Ke.insert=ie().bind(null,"html"),Ke.domAPI=se(),Ke.insertStyleElement=ue(),ae()(We.Z,Ke),We.Z&&We.Z.locals&&We.Z.locals;const Je=document.createElement("li"),Qe=document.createElement("a");Qe.id="LZTUpButton",Qe.innerText=A.Z.extName,Je.appendChild(Qe),Je.onclick=async function(){const e=[new Ve("Главная","LZTUpMainTab","LZTUpMainSection",!0),new Ve("Настройки","LZTUpSettingsTab","LZTUpSettingsSection",!1)],t=await async function(e){const t=[new l("LZTUpMainSection").addSectionItem("Локальный Уник","Максимальная кастомизация","far fa-palette","LZTUpUniqItem",{onClick:(e,t)=>q("LZTUpUniqContainer",t)}).addSectionItem("Розыгрыши","Комфорт для розыгрышей","far fa-gift","LZTUpContestsItem",{onClick:(e,t)=>q("LZTUpContestsContainer",t)}).addSectionItem("Пользователи","Штучки для пользователей","far fa-user","LZTUpUsersItem",{onClick:(e,t)=>q("LZTUpUsersContainer",t)}).addSectionItem("Внешний вид","Темы, логотипы и другое","far fa-drafting-compass","LZTUpAppearItem",{onClick:(e,t)=>q("LZTUpAppearContainer",t)}).addSectionContainer("LZTUpUniqContainer",await W()).addSectionContainer("LZTUpContestsContainer",await b()).addSectionContainer("LZTUpUsersContainer",await Z()).addSectionContainer("LZTUpAppearContainer",await De()),new l("LZTUpSettingsSection").addSectionItem("Настройки","Настройки расширения","far fa-cog","LZTUpSettingsItem",{onClick:(e,t)=>q("LZTUpSettingsContainer",t)}).addSectionItem("Обновления","Установка и проверка обновлений расширения","far fa-cloud-download","LZTUpUpdateItem",{onClick:(e,t)=>q("LZTUpUpdateContainer",t)}).addSectionItem("Информация",`Версия: ${GM_info?.script?.version}`,"far fa-info-circle","LZTUpInformationItem",{onClick:(e,t)=>q("LZTUpInformationContainer",t)}).addSectionContainer("LZTUpSettingsContainer",await te()).addSectionContainer("LZTUpUpdateContainer",await $e()).addSectionContainer("LZTUpInformationContainer",await J())],n=document.createElement("div");n.classList.add("LZTUpModalContent");const a=document.createElement("ul");a.classList.add("LZTUpTabs"),n.appendChild(a);for(const e of t){const t=e.createElement();n.appendChild(t);for(const t of e.sectionContainers)n.append(t),t.querySelectorAll(".Tooltip").forEach((e=>XenForo.Tooltip($(e))))}d.Z.debug("Generated menu tabs: ",e);for(const t of e)n.querySelector(".LZTUpTabs").appendChild(t.createElement());return n}(e);(0,a.Y3)(A.Z.extName,'<div id="LZTUpModalBase"></div>');const n=document.querySelector("#LZTUpModalBase");n.appendChild(t);for(const t of e)t.active&&t.setActive();const r=n.parentElement;r.style.whiteSpace="unset",r.parentElement.id="LZTUpModalOverlay",r.parentElement.style="margin-bottom: 15px;",P(A.Z.extName),(0,Fe.W)(),V();const s=await U.Z.getValue(L.Z.Profile),o=await U.Z.getValue(L.Z.ProfileBadges),i=(0,T.n5)("me"),c=(0,T.Ms)("me"),u=new S(i,c,s,o);await u.updateAll(),await Promise.allSettled([He(Le.Z.Forum),He(Le.Z.Market),Xe()])};const Ye=Je},"./src/ui/components/icon.js":(e,t,n)=>{n.d(t,{Z:()=>a});const a=class{constructor(e,t="LZTUpIcon"){this.className=e,this.id=t}createElement(){const e=document.createElement("i");return e.id=this.id,e.className=this.className,e}}},"./src/utils/checkers.js":(e,t,n)=>{function a(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function r(){return!!document.querySelector("div.contestThreadBlock")}function s(){return window.location.pathname.includes("/forums/contests/")}function o(){return!!document.querySelector("#content.member_view")}function i(){return!!document.querySelector("#content.thread_view")||!!document.querySelector("#content.EWRporta2_ArticleView")}function c(){return!!document.querySelector(".xenOverlay.memberCard")}n.d(t,{Fw:()=>i,HI:()=>r,IM:()=>s,Ji:()=>c,cD:()=>o,kK:()=>a})},"./src/utils/contests.js":(e,t,n)=>{n.d(t,{Q6:()=>g,gu:()=>T,Q9:()=>h,Rf:()=>y,sO:()=>L,s$:()=>f,g4:()=>b,uu:()=>p,cy:()=>m});var a=n("./src/callbacks/contestsParticipate.js"),r=n("./src/visuals/threads.js"),s=n("./src/ui/components/button.js"),o=n("./src/utils/logger.js"),i=n("./src/utils/registers.js"),c=n("./src/utils/utils.js"),l=n("./src/utils/checkers.js");const d=10,u="LZTUpOpenContestsButton";function p(){if((0,l.IM)()&&!document.getElementById(u)){const e=new s.Z(`Открыть ${XenForo.htmlspecialchars(d)}`).createElement((async()=>{if((0,c.j1)(),!await(0,c.Nc)(".forumImprovements--mask.hidden"))return;const e=(0,c.Eq)();if(e.length)for(let t=0;t<Math.min(d,e.length);t++)window.open(e[t])}));e.id=u,(0,i.Wh)(e)}}function m(){(0,l.IM)()&&document.getElementById(u)?.remove()}function g(e=!0){if((0,l.HI)()){const t=document.querySelector("div.contestThreadBlock"),n=document.querySelector("li.firstPost > div.messageInfo > div.messageContent > article > blockquote.messageText");e?(t.parentElement.append(n),t.style.borderTop="none",t.style.borderBottom="1px solid rgb(45, 45, 45)"):(t.parentElement.prepend(n),t.style.borderTop="1px solid rgb(45, 45, 45)",t.style.borderBottom="none")}}function h(e=!0){if((0,l.HI)())return(0,r.OL)(e)}function f(e=!0){(0,l.HI)()&&function(e=!0){const t=document.querySelector("div.tagBlock");null!==t&&(t.style.display=e?"none":"")}(e)}function y(e=!0){if((0,l.HI)())return(0,r.aC)(e)}function b(){if((0,l.HI)()){const e=document.querySelector(".LztContest--Participate");if(!e)return;const t=new s.Z("","button LZTUpRefreshButton","far fa-sync").createElement((e=>{e.preventDefault(),Z()}));e.insertAdjacentElement("afterend",t)}}function T(){if((0,l.HI)()){const e=document.querySelector(".captchaBlock > div");return e?.childElementCount>0?o.Z.debug("Captcha exists"):Z()}}function Z(){const e=document.querySelector(".captchaBlock > div");if(!e)return o.Z.error("CAPTCHA BLOCK MISSING");turnstile.render(`#${e.id}`,{sitekey:"0x4AAAAAAADMHhlDN2zO9nrC",theme:"dark",size:"compact",callback:function(e){console.log(`Challenge Success ${e}`),$(".Captcha--XenForo_ControllerPublic_Thread").prepend('<input type="hidden" name="cf-turnstile-response" value="'+e+'">');let t=$(".LztContest--Participate");t.length&&(t.attr("href",t.attr("href")+"?cf-turnstile-response="+e),t.removeAttr("disabled").removeClass("disabled"))}})}function L(e){document.querySelector("div.contestThreadBlock")&&(e?document.addEventListener("keydown",a.m):document.removeEventListener("keydown",a.m))}},"./src/utils/gmWrapper.js":(e,t,n)=>{n.d(t,{Z:()=>s});var a=n("./src/configs/NewStorageName.js");const r={checkType:e=>{if(!(e instanceof a.Z))throw new Error("The variable is not an instance of the 'StorageName' class");return!0},getValue:async e=>(r.checkType(e),await GM.getValue(e.name,e.value)),setValue:async(e,t)=>(r.checkType(e),await GM.setValue(e.name,t)),setCache:async(e,t)=>{e instanceof a.Z&&(e=e.name);const n=await r.getValue(a.Z.Cache);return n[e]=t,await GM.setValue(a.Z.Cache.name,n)},getCache:async e=>(await r.getValue(a.Z.Cache))[e.name]??e.value},s=r},"./src/utils/logger.js":(e,t,n)=>{n.d(t,{Z:()=>a});const a={log:(...e)=>console.log("%c[LZT Upgrade]","background: #0daf77; color: #fff; padding: 5px;",...e),error:(...e)=>console.error("%c[LZT Upgrade]","background: #0daf77; color: #fff; padding: 5px;",...e),warn:(...e)=>console.warn("%c[LZT Upgrade]","background: #0daf77; color: #fff; padding: 5px;",...e),info:(...e)=>console.info("%c[LZT Upgrade]","background: #0daf77; color: #fff; padding: 5px;",...e),debug:(...e)=>{}}},"./src/utils/purify.js":(e,t,n)=>{n.d(t,{G6:()=>s,bw:()=>o,zB:()=>i});var a=n("./src/utils/logger.js");const r=["color","text-shadow","border-radius","background","background-color","background-image","-webkit-background-clip","-webkit-text-fill-color"];function s(e){return DOMPurify.sanitize(e,{USE_PROFILES:{svg:!0,html:!0},FORBID_TAGS:["style"]})}function o(e){return DOMPurify.sanitize(e,{USE_PROFILES:{svg:!0},FORBID_TAGS:["style"]})}function i(e,t=r){let n=e.split(";");const s=[];a.Z.debug(n);for(const e of n){const n=e.split(":"),r=n[0].replace(/\s/,"");a.Z.debug(e,n,r),t.includes(r)&&(a.Z.debug("DETECTED AVAILABLED STYLES"),s.push(e))}const o=s.length?s.join(";"):"";return a.Z.debug(`CLEARED FINAL STRING: ${o}`),o}},"./src/utils/registers.js":(e,t,n)=>{function a(e,t=""){return XenForo.alert(t,e,null,(()=>{document.querySelector("div.modal.fade").remove()}))}function r(e,t=5e3){return XenForo.alert(e,"",t)}function s(e){return document.querySelector("#AccountMenu > ul:nth-child(1) > li:nth-child(10)").insertAdjacentElement("afterend",e),!0}function o(e){const t=document.querySelector(".pageNavLinkGroup > .linkGroup");return e.style.marginRight="10px",t.prepend(e),!0}function i(e){const t=new MutationObserver((t=>{for(const n of t)"childList"===n.type&&e(n)}));return t.observe(document.body,{childList:!0,subtree:!0}),t}n.d(t,{O0:()=>i,Wh:()=>o,Y3:()=>a,de:()=>r,e7:()=>s})},"./src/utils/threads.js":(e,t,n)=>{n.d(t,{iY:()=>y});var a=n("./src/utils/purify.js");const r=class{constructor(e,t,n=""){this.title=(0,a.G6)(e),this.content=(0,a.G6)(t),this.customId=n}createElement(){const e=document.createElement("div");e.classList.add("LZTUpThreadBar"),e.id=this.customId;const t=document.createElement("h2");t.classList.add("LZTUpThreadBarTitle"),t.innerHTML=this.title,e.appendChild(t);const n=document.createElement("p");return n.classList.add("LZTUpThreadBarContent","muted"),n.innerHTML=this.content,e.appendChild(n),{container:e,title:t,content:n}}};var s=n("./src/utils/checkers.js"),o=n("./src/configs/endpoints.json"),i=n("./src/api/requestJSON.js");const c={genSummarize:async function(e,t){return await(0,i.Z)(o.OC,`Не удалось сгенерировать краткий пересказ текста (${o.OC})`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,session_id:t})})}};var l=n("./src/configs/base.js");const d={StatusInProgress:1,StatusSuccess:2,StatusError:3,StatusFetchError:999};class u extends l.e{static Waiting=new u("waiting").name;static Error=new u("error").name;static Success=new u("success").name}var p=n("./src/utils/logger.js"),m=n("./src/utils/utils.js");const g="LZTUpSummarizeBlock",h="<i class='fas fa-sparkles'></i> Суммаризатор тем",f=/^\/threads\/([^d]+)\//;async function y(e){if(e&&(0,s.Fw)()){const e=new r(h,"Получение данных...",g).createElement();document.querySelector(".pageNavLinkGroup").before(e.container);let t,n=document.querySelector(".message.firstPost > .messageInfo article")?.innerText;if(null==n){p.Z.log("Getting the content via an Ajax request");const e=function(){const e=window.location.pathname,t=e.match(f)?.[1];return Number(t)||void 0}();n=await async function(e){try{const t=(await XenForo.ajax(`/threads/${e}`)).templateHtml,n=(0,m.Cy)(t),a=n.querySelector(".message.firstPost > .messageInfo article")?.innerText;return a}catch{return}}(e)}if(!(n?.length>=300))return e.title.innerHTML=`${h} (Ошибка валидации)`,e.content.innerHTML="Не удалось выполнить суммаризацию темы. Содержимое темы не найдено или содержит менее 300 символов.",!1;let a="";t=setInterval((async()=>{const r=await c.genSummarize(n,a);if(p.Z.log("Summarize Generated Info",r),!r)return p.Z.log("Clear summarize interval (ext error)"),e.title.innerHTML=`${h} (Внутренняя ошибка)`,e.content.innerText="Не удалось выполнить суммаризацию темы. Произошла внутренняя ошибка при запросе к Summarize API. Для детальной информации смотри консоль.",clearInterval(t),!1;a=r.session_id;const s=function(e){switch(e.status_code){case d.StatusInProgress:return{status:u.Waiting,title:"Суммаризация...",desc:[{id:0,content:"Ожидание окончания суммаризации текста"}]};case d.StatusFetchError:return{status:u.Error,title:"Ошибка запроса",desc:[{id:0,content:"Не удалось совершить запрос к Yandex Summarize API"}]};case d.StatusError:return{status:u.Error,title:"Ошибка YandexGPT",desc:[{id:0,content:"Возникла ошибка при суммаризации текста"}]};case d.StatusSuccess:return{status:u.Success,title:"Успех",desc:e.thesis};default:return{status:u.Error,title:"Неизвестная ошибка",desc:[{id:0,content:"Во время выполнения что-то пошло не так и не удалось определить результат суммаризации"}]}}}(r);s.status!==u.Waiting&&(p.Z.log("Clear summarize interval (by status code)"),clearInterval(t));const o=document.createElement("ul");s.desc.length>1&&o.classList.add("LZTUpSummarizeThesises");for(const e of s.desc){const t=document.createElement("li");t.innerText=e.content,o.appendChild(t)}e.title.innerHTML=`${h} (${s.title})`,e.content.innerHTML=o.outerHTML}),500)}else document.getElementById(g)?.remove()}},"./src/utils/users.js":(e,t,n)=>{n.d(t,{SL:()=>h,Rj:()=>g,Dm:()=>m,xc:()=>p,n5:()=>d,Ms:()=>u,UD:()=>f,M1:()=>y});var a=n("./src/utils/checkers.js"),r=n("./src/utils/purify.js"),s=n("./src/ui/components/icon.js");const o=class{constructor(e,t=null,n=null){this.content=XenForo.htmlspecialchars(e),this.tooltipMessage=t||"",this.messageOnCopy=n||"Успешно скопировано в буфер обмена"}createElement(){const e=document.createElement("span");e.classList.add("copyButton","Tooltip"),e.title=this.tooltipMessage,e.onclick=async e=>{await navigator.clipboard.writeText(this.content),e.target.classList.add("animated"),animateCSS(e.target,["heartBeat","mainc"]),XenForo.alert(this.messageOnCopy,"",5e3)},e.tabIndex=0;const t=new s.Z("far fa-clone","").createElement();return e.appendChild(t),e}},i=class{constructor(e,t,n,a){this.elementId=e,this.label=t,this.content=(0,r.G6)(n),this.copyButton=a}createElement(){const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");if(e.classList.add("clear_fix","profile_info_row"),e.id=this.elementId,t.classList.add("label","fl_l"),n.classList.add("labeled"),t.innerText=this.label+":",(0,a.kK)(this.content)?n.appendChild(this.content):n.innerHTML=this.content,this.copyButton instanceof o){const e=this.copyButton.createElement();n.appendChild(e)}return e.appendChild(t),e.appendChild(n),e}},c="LZTUpUserIDRow",l="LZTUpUserIDMemberCard";function d(e){switch(e){case"profile":if((0,a.cD)()){const e=document.querySelector("#profile_short > .userContentLinks > a:nth-child(1)");return e&&""!==e.href?e.href.endsWith("?tab=mythreads")?d("me"):new URL(e.href).searchParams.get("user_id"):null}case"membercard":if((0,a.Ji)()){const e=document.querySelectorAll(".xenOverlay.memberCard"),t=e[e.length-1].querySelector(".memberCardInner > .bottom > .userContentLinks > a:nth-child(1)");return t&&""!==t.href?new URL(t.href).searchParams.get("user_id"):null}return null;case"self":case"me":return XenForo?.visitor?.user_id;default:return null}}function u(e){switch(e){case"self":case"me":return document.querySelector(".accountUsername span")?.innerText;default:return null}}function p(e){switch(e){case"self":case"me":return document.querySelector(".accountUsername.username span").className;default:return null}}function m(e){if(e===d("me"))return document.querySelector("img.navTab--visitorAvatar").src;const t=document.querySelectorAll("a.avatar");return Array.from(t).find((t=>t.classList?.contains(`Av${e}s`)||t.classList?.contains(`Av${e}m`)))?t.src:null}function g(){if((0,a.cD)()&&null===document.querySelector(`#${c}`)){const e=d("profile")??"Не найден",t=document.querySelector("#profile_short > .pairsJustified"),n=new o(e,"Скопировать ID пользователя","ID пользователя успешно скопирован в буфер обмена"),a=new i(c,"ID",e,n).createElement(),r=t.querySelector(".profile_info_row"),s=r?"afterend":"afterbegin";r.insertAdjacentElement(s,a)}}function h(){if((0,a.Ji)()){const e=document.querySelectorAll(".xenOverlay.memberCard"),t=d("membercard")??"Не найден",n=e[e.length-1].querySelector(`#memberCard${t}.memberCardInner > .bottom`),a=document.createElement("div");a.classList.add("title"),a.id=l,a.innerText=`ID: ${t}`;const r=new o(t,"Скопировать ID пользователя","ID пользователя успешно скопирован в буфер обмена").createElement();a.appendChild(r),n?.insertAdjacentElement("afterbegin",a)}}function f(){if((0,a.cD)()){const e=document.querySelector(`.profile_info_row#${c}`);e&&e.remove()}}function y(e=!1){if((0,a.cD)()){const t=document.querySelector(".profile_info_row > .labeled > span.DateTime");if(!t)return;const n=t.getAttribute("title");if(!n)return;if(!e){let e=-2;1===XenForo?.visitor?.language_id&&(e=-3);const a=n.split(" ").slice(0,e).join(" ");return t.innerText=a}return t.innerText=n}}},"./src/utils/utils.js":(e,t,n)=>{function a(e){return new Promise((t=>{if(document.querySelector(e))return t(document.querySelector(e));const n=new MutationObserver((()=>{document.querySelector(e)&&(t(document.querySelector(e)),n.disconnect())}));n.observe(document.body,{childList:!0,subtree:!0})}))}function r(){return new Promise((e=>{if(document.body)return e(document.body);const t=new MutationObserver((()=>{document.body&&(e(document.body),t.disconnect())}));t.observe(document,{childList:!0,subtree:!0})}))}n.d(t,{Bw:()=>c,Cy:()=>p,Eq:()=>i,Nc:()=>a,P6:()=>u,VR:()=>r,_v:()=>s,bg:()=>l,j1:()=>m,u3:()=>d,zf:()=>o});const s=e=>new Promise((t=>setTimeout(t,e)));function o(e){return e?e[0].toUpperCase()+e.slice(1):e}function i(){return Array.from(document.querySelectorAll(".discussionListItem--Wrapper")).map((e=>e.querySelector(".listBlock.main")?.href))}function c(e){if(e)return e.className="",e.style="",e}function l(e,t){return t?.length>1&&t?.startsWith(".")?(t=t.replace(".",""),e.classList.add(t)):e.style=t}function d(){return Math.floor(Date.now()/1e3)}function u(e,t){switch(""===t&&(t=null),typeof t){case"string":{const n=t.split(","),a=e.split(","),r=[];return n.map(((e,t)=>{r.push({name:XenForo.htmlspecialchars(a?.[t]),userId:Number(e)})})),r}case"number":return[{name:XenForo.htmlspecialchars(e),userId:XenForo.htmlspecialchars(t)}];default:return[{name:XenForo.htmlspecialchars(e),userId:null}]}}function p(e){return(new DOMParser).parseFromString(e,"text/html")}function m(){document.querySelector(".UpdateFeedButton")?.click()}},"./src/visuals/navbar.js":(e,t,n)=>{function a(e,t){const n=document.getElementById(e);n&&(n.style.opacity=Number(!t))}function r(e){const t=document.querySelector(".hasUnreadArticles");t&&(t.style.display=e?"none":"")}n.d(t,{R:()=>a,p:()=>r})},"./src/visuals/notify.js":(e,t,n)=>{function a(){return GM_addStyle('\n    li.Alert[data-author="Реклама"] {\n      display: none !important;\n    }\n  ')}n.d(t,{i:()=>a})},"./src/visuals/profile.js":(e,t,n)=>{n.d(t,{m:()=>s});var a=n("./src/utils/checkers.js"),r=n("./src/visuals/universal.js");function s(e){if((0,a.cD)())return(0,r.j)(e)}},"./src/visuals/threads.js":(e,t,n)=>{n.d(t,{OL:()=>i,cX:()=>d,aC:()=>c,Lp:()=>l});var a=n("./src/xenforo/tooltips.js"),r=n("./src/utils/logger.js"),s=n("./src/utils/registers.js");const o=class{constructor(e){this.buttonsClass=".LZTUpReportButtons",this.buttonsQuery=`.${this.buttonsClass}`,this.buttons=e}createElement(e){const t=document.createElement("div");t.classList.add("LZTUpReportButtons");for(let n=0;n<this.buttons.length;n++){const a=document.createElement("span");a.classList.add("LZTUpReportButton"),a.tabIndex=0,a.innerText=XenForo.htmlspecialchars(this.buttons[n].text),a.title=XenForo.htmlspecialchars(this.buttons[n].reason),a.dataset.position=n+1,a.onclick=async()=>{if(!confirm("Вы уверены, что хотите отправить репорт?"))return;let t=new FormData;t.append("message",this.buttons[n].reason),t.append("is_common_reason",0),t.append("_xfToken",XenForo._csrfToken),t.append("_xfNoRedirect",1),t.append("_xfToken",XenForo._csrfToken),t.append("redirect",window.location.href),await fetch(`posts/${e}/report`,{method:"POST",body:t}),(0,s.de)("Жалоба отправлена",5e3)},t.appendChild(a)}return t}findBadgeElement(e,t){return document.querySelector(e+`[data-position="${t}"]`)}findAllBadgeElement(e,t){return document.querySelectorAll(e+`[data-position="${t}"]`)}updateText(e,t){if(e)return e.innerText=XenForo.htmlspecialchars(t.text),e._tippy?(0,a.w)(e,XenForo.htmlspecialchars(t.reason)):XenForo.Tooltip($(e))}updateButton(e){const t=this.findAllBadgeElement(this.buttonsQuery,e.position);if(t.length)for(const n of t)this.updateText(n,e)}updateButtons(){r.Z.debug("updateButtons");for(const e of this.buttons)"object"==typeof e?(r.Z.debug(e),this.updateButton(e)):r.Z.error("Invalid button in array")}};function i(e){const t=document.querySelector(".message.firstPost > .messageInfo > .messageContent > article > blockquote.messageText");if(null!==t)return t.style.display=e?"none":""}function c(e){const t=document.querySelector("div.PollContainer");if(null!==t)return t.style.display=e?"none":""}function l(e){e=e.sort(((e,t)=>e.position-t.position));const t=[...document.querySelectorAll(".messageList > li.message"),...document.querySelectorAll(".CommentPostList > li.comment")];for(const n of t){const t=n.querySelector(".publicControls");if(!t)continue;t.querySelector(".LZTUpReportButtons")?.remove();let a=n.id.split("-")?.[1];a||console.error("Failed to add report buttons to message element:",n),a.includes("comment-")&&(a=a.replace("comment-","comments/"));const r=new o(e).createElement(a);t.prepend(r),Array.from(r.children).forEach((e=>XenForo.Tooltip($(e))))}}function d(){return GM_addStyle("\n    .text_Ads {\n      display: none;\n    }\n  ")}},"./src/visuals/universal.js":(e,t,n)=>{n.d(t,{E:()=>c,j:()=>i});var a=n("./src/utils/users.js"),r=n("./src/utils/checkers.js"),s=n("./src/configs/SiteType.js");const o="LZTUpCustomBackground";function i(e,t=!1){if(!t&&(0,r.cD)()&&(0,a.n5)("profile")!==(0,a.n5)("me"))return!1;const n=document.querySelector("body");if(!e)return n.id="",void(n.style.backgroundImage="");n.id=o,n.style.backgroundImage=`linear-gradient(rgba(54, 54, 54, 0.85), rgba(54, 54, 54, 0.85)), url(${e})`}function c(e,t=s.Z.Forum){let n;switch(t){case s.Z.Forum:n=document.getElementById("lzt-logo");break;case s.Z.Market:n=document.getElementById("lzt-market-logo");break;default:return!1}return!!n&&(n.style=e,!0)}},"./src/visuals/users.js":(e,t,n)=>{n.d(t,{Az:()=>d,$:()=>l,bR:()=>c});var a=n("./src/utils/utils.js"),r=n("./src/utils/users.js"),s=n("./src/utils/checkers.js");class o{constructor(e,t){this.elementId=e,this.label=t}createElement(){const e=document.createElement("em");e.id=this.elementId,e.classList.add("userBanner","wrapped"),e.itemprop="title";const t=document.createElement("div");t.className="before",e.appendChild(t);const n=document.createElement("strong");return n.innerText=XenForo.htmlspecialchars(this.label),e.appendChild(n),t.className="after",e.appendChild(t),e}}var i=n("./src/ui/avatarUserBadges.js");function c(e){const t=(0,r.Ms)("me"),n=document.querySelectorAll(".username span").values().filter((e=>e.innerText===t));for(const t of n)t.className="",t.style="",(0,a.bg)(t,e)}function l(e,t){if((0,s.cD)()&&(0,r.n5)("profile")===(0,r.n5)("me")){const n=document.querySelector("em.userBanner#LZTUpCustomBanner");if(n)return n.className="userBanner wrapped",n.style="",n.innerText=t,(0,a.bg)(n,e);const r=document.querySelector(".avatarScaler");if(!r)return;const s=new o("LZTUpCustomBanner",t).createElement();return(0,a.bg)(s,e),r.insertAdjacentElement("afterend",s)}}function d(e){const t=(0,r.n5)("me"),n=new i.Z(e,!1),a=[...document.querySelectorAll(`.avatar.Av${t}m`),...document.querySelectorAll(`.avatar.Av${t}s`)].filter((e=>void 0!==e)).filter((e=>e.parentElement?.classList.contains("avatarHolder")));console.log(a);for(const e of a){console.log(e);const t=e.parentElement,a=n.createElement();console.log(t),t.querySelector(".avatarUserBadges")?.remove(),console.log(a),t.prepend(a),n.updateBadges()}}},"./src/xenforo/bypass.js":(e,t,n)=>{n.d(t,{$:()=>r});var a=n("./src/utils/logger.js");function r(){Object.hasOwn(XenForo,"threadNotify")&&Object.hasOwn(XenForo.threadNotify,"shareTypingActivity")&&(a.Z.debug("bypassShareTyping thread: true"),XenForo.threadNotify.shareTypingActivity=0)}},"./src/xenforo/tooltips.js":(e,t,n)=>{function a(){let e=$("#LZTUpTooltip.Tooltip");return XenForo.Tooltip(e)}function r(e,t){return e.setAttribute("title",""),e.setAttribute("data-cachedtitle",t),e._tippy.setContent(t)}n.d(t,{W:()=>a,w:()=>r})},"./src/configs/endpoints.json":e=>{e.exports=JSON.parse('{"RC":"https://lztupgrade.toiloff.ru/api/themes","I1":"https://lztupgrade.toiloff.ru/static/themes","eb":"https://lztupgrade.toiloff.ru/api/logos","NI":"https://lztupgrade.toiloff.ru/api/logo","OC":"https://foswly-sa.toil.cc/generation"}')}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,exports:{}};return r[e](n,n.exports,o),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o.a=(r,s,o)=>{var i;o&&((i=[]).d=-1);var c,l,d,u=new Set,p=r.exports,m=new Promise(((e,t)=>{d=t,l=e}));m[t]=p,m[e]=e=>(i&&e(i),u.forEach(e),m.catch((e=>{}))),r.exports=m,s((r=>{var s;c=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var s=[];s.d=0,r.then((e=>{o[t]=e,a(s)}),(e=>{o[n]=e,a(s)}));var o={};return o[e]=e=>e(s),o}}var i={};return i[e]=e=>{},i[t]=r,i})))(r);var o=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(s=()=>t(o)).r=0;var n=e=>e!==i&&!u.has(e)&&(u.add(e),e&&!e.d&&(s.r++,e.push(s)));c.map((t=>t[e](n)))}));return s.r?l:o()}),(e=>(e?d(m[n]=e):l(p),a(i)))),i&&i.d<0&&(i.d=0)},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nc=void 0,o("./src/index.js")})();